{"version":3,"sources":["../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/primitives/chars.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/primitives/bigint.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/compat.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/ifaces.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/primitives/buffer.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/errors/base.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/errors/tags.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/errors/index.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/primitives/lru.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/codecs/consts.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/codecs/ifaces.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/codecs/boolean.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/codecs/numbers.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/codecs/numerics.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/codecs/text.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/codecs/uuid.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/codecs/bytes.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/codecs/json.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/datatypes/dateutil.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/datatypes/datetime.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/codecs/datetime.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/datatypes/memory.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/codecs/memory.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/codecs/pgvector.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/codecs/codecs.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/codecs/tuple.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/datatypes/range.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/codecs/range.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/codecs/namedtuple.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/codecs/array.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/codecs/enum.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/codecs/object.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/codecs/set.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/utils.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/codecs/sparseObject.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/codecs/registry.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/options.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/primitives/event.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/primitives/queues.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/retry.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/transaction.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/baseClient.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/credentials.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/adapter.shared.node.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/primitives/crcHqx.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/conUtils.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/errors/map.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/errors/resolve.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/baseConn.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/scram.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/httpScram.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/fetchConn.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/browserClient.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/adapter.node.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/platform.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/conUtils.server.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/rawConn.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/nodeClient.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/index.shared.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/reflection/enums.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/reflection/util.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/reflection/typeutil.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/reflection/strictMap.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/reflection/reservedKeywords.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/reflection/queries/types.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/reflection/queries/casts.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/reflection/queries/functions.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/reflection/queries/globals.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/reflection/queries/operators.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/reflection/queries/scalars.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/reflection/queries.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/reflection/analyzeQuery.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/reflection/index.js","../node_modules/.pnpm/edgedb@1.3.4/node_modules/edgedb/dist/index.node.js","../src/crud-service.ts"],"sourcesContent":["\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2019-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.chr = exports.ord = exports.$v = exports.$s = exports.$r = exports.$p = exports.$o = exports.$n = exports.$m = exports.$j = exports.$b = exports.$Z = exports.$Y = exports.$X = exports.$V = exports.$T = exports.$S = exports.$R = exports.$Q = exports.$P = exports.$O = exports.$M = exports.$L = exports.$K = exports.$I = exports.$H = exports.$E = exports.$D = exports.$C = exports.$A = exports.$1 = exports.$0 = void 0;\nexports.$0 = ord(\"0\");\nexports.$1 = ord(\"1\");\nexports.$A = ord(\"A\");\nexports.$C = ord(\"C\");\nexports.$D = ord(\"D\");\nexports.$E = ord(\"E\");\nexports.$H = ord(\"H\");\nexports.$I = ord(\"I\");\nexports.$K = ord(\"K\");\nexports.$L = ord(\"L\");\nexports.$M = ord(\"M\");\nexports.$O = ord(\"O\");\nexports.$P = ord(\"P\");\nexports.$Q = ord(\"Q\");\nexports.$R = ord(\"R\");\nexports.$S = ord(\"S\");\nexports.$T = ord(\"T\");\nexports.$V = ord(\"V\");\nexports.$X = ord(\"X\");\nexports.$Y = ord(\"Y\");\nexports.$Z = ord(\"Z\");\nexports.$b = ord(\"b\");\nexports.$j = ord(\"j\");\nexports.$m = ord(\"m\");\nexports.$n = ord(\"n\");\nexports.$o = ord(\"o\");\nexports.$p = ord(\"p\");\nexports.$r = ord(\"r\");\nexports.$s = ord(\"s\");\nexports.$v = ord(\"v\");\nfunction ord(str) {\n    const ch = str.charCodeAt(0);\n    if (ch <= 0 || ch >= 255) {\n        throw new TypeError(`char \"${ch}\" is outside ASCII`);\n    }\n    return ch & 0xff;\n}\nexports.ord = ord;\nfunction chr(ch) {\n    if (ch <= 0 || ch >= 255) {\n        throw new TypeError(`char \"${ch}\" is outside ASCII`);\n    }\n    return String.fromCharCode(ch);\n}\nexports.chr = chr;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.remainder = exports.lt = exports.gte = exports.bitand = exports.rshift = exports.mul = exports.div = exports.sub = exports.add = exports.make = exports.isBigInt = exports.plugJSBI = exports.hasNativeBigInt = void 0;\nlet JSBI = null;\nexports.hasNativeBigInt = typeof BigInt !== \"undefined\";\nfunction plugJSBI(jsbi) {\n    JSBI = jsbi;\n}\nexports.plugJSBI = plugJSBI;\nlet _isBigInt;\nlet _make;\nlet _add;\nlet _div;\nlet _sub;\nlet _mul;\nlet _rshift;\nlet _bitand;\nlet _gte;\nlet _lt;\nlet _remainder;\nif (exports.hasNativeBigInt) {\n    _isBigInt = (val) => typeof val === \"bigint\";\n    _make = (val) => BigInt(val);\n    _add = (op1, op2) => (op1 + op2);\n    _sub = (op1, op2) => (op1 - op2);\n    _div = (op1, op2) => (op1 / op2);\n    _mul = (op1, op2) => (op1 * op2);\n    _rshift = (op1, op2) => (op1 >> op2);\n    _bitand = (op1, op2) => (op1 & op2);\n    _gte = (op1, op2) => op1 >= op2;\n    _lt = (op1, op2) => op1 < op2;\n    _remainder = (op1, op2) => (op1 % op2);\n}\nelse {\n    _isBigInt = (val) => {\n        const j = ensureJSBI();\n        return val instanceof j;\n    };\n    _make = (val) => {\n        const j = ensureJSBI();\n        return j.BigInt(val);\n    };\n    _add = (op1, op2) => {\n        const j = ensureJSBI();\n        return j.add(op1, op2);\n    };\n    _sub = (op1, op2) => {\n        const j = ensureJSBI();\n        return j.subtract(op1, op2);\n    };\n    _div = (op1, op2) => {\n        const j = ensureJSBI();\n        return j.divide(op1, op2);\n    };\n    _mul = (op1, op2) => {\n        const j = ensureJSBI();\n        return j.multiply(op1, op2);\n    };\n    _rshift = (op1, op2) => {\n        const j = ensureJSBI();\n        return j.signedRightShift(op1, op2);\n    };\n    _bitand = (op1, op2) => {\n        const j = ensureJSBI();\n        return j.bitwiseAnd(op1, op2);\n    };\n    _gte = (op1, op2) => {\n        const j = ensureJSBI();\n        return j.greaterThanOrEqual(op1, op2);\n    };\n    _lt = (op1, op2) => {\n        const j = ensureJSBI();\n        return j.lessThan(op1, op2);\n    };\n    _remainder = (op1, op2) => {\n        const j = ensureJSBI();\n        return j.remainder(op1, op2);\n    };\n}\nfunction ensureJSBI() {\n    if (JSBI == null) {\n        throw new Error(\"JSBI library is required to polyfill BigInt\");\n    }\n    return JSBI;\n}\nexports.isBigInt = _isBigInt;\nexports.make = _make;\nexports.add = _add;\nexports.sub = _sub;\nexports.div = _div;\nexports.mul = _mul;\nexports.rshift = _rshift;\nexports.bitand = _bitand;\nexports.gte = _gte;\nexports.lt = _lt;\nexports.remainder = _remainder;\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2019-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.decodeInt64ToString = void 0;\nfunction decodeInt64ToString(buf) {\n    if (buf.length !== 8) {\n        throw new Error(\"expected 8 bytes buffer\");\n    }\n    let inp = Array.from(buf);\n    let negative = false;\n    if (inp[0] & 0x80) {\n        inp = inp.map((x) => x ^ 0xff);\n        inp[inp.length - 1]++;\n        negative = true;\n    }\n    let result = \"0\";\n    for (const digit of inp) {\n        let acc = digit;\n        let ret = \"\";\n        for (let j = result.length - 1; j >= 0; j--) {\n            const num = parseInt(result[j], 10) * 256 + acc;\n            ret = (num % 10) + ret;\n            acc = Math.floor(num / 10);\n        }\n        result = acc ? acc + ret : ret;\n    }\n    return negative ? `-${result}` : result;\n}\nexports.decodeInt64ToString = decodeInt64ToString;\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2020-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LegacyHeaderCodes = exports.Cardinality = exports.OutputFormat = void 0;\nconst chars = __importStar(require(\"./primitives/chars\"));\nvar OutputFormat;\n(function (OutputFormat) {\n    OutputFormat[OutputFormat[\"BINARY\"] = chars.$b] = \"BINARY\";\n    OutputFormat[OutputFormat[\"JSON\"] = chars.$j] = \"JSON\";\n    OutputFormat[OutputFormat[\"NONE\"] = chars.$n] = \"NONE\";\n})(OutputFormat = exports.OutputFormat || (exports.OutputFormat = {}));\nvar Cardinality;\n(function (Cardinality) {\n    Cardinality[Cardinality[\"NO_RESULT\"] = chars.$n] = \"NO_RESULT\";\n    Cardinality[Cardinality[\"AT_MOST_ONE\"] = chars.$o] = \"AT_MOST_ONE\";\n    Cardinality[Cardinality[\"ONE\"] = chars.$A] = \"ONE\";\n    Cardinality[Cardinality[\"MANY\"] = chars.$m] = \"MANY\";\n    Cardinality[Cardinality[\"AT_LEAST_ONE\"] = chars.$M] = \"AT_LEAST_ONE\";\n})(Cardinality = exports.Cardinality || (exports.Cardinality = {}));\nexports.LegacyHeaderCodes = {\n    implicitLimit: 0xff01,\n    implicitTypenames: 0xff02,\n    implicitTypeids: 0xff03,\n    allowCapabilities: 0xff04,\n    capabilities: 0x1001,\n    explicitObjectids: 0xff05,\n};\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2019-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ReadBuffer = exports.ReadMessageBuffer = exports.uuidToBuffer = exports.WriteMessageBuffer = exports.WriteBuffer = exports.BufferError = exports.encodeB64 = exports.decodeB64 = exports.utf8Decoder = exports.utf8Encoder = void 0;\nconst chars = __importStar(require(\"./chars\"));\nconst bi = __importStar(require(\"./bigint\"));\nconst compat = __importStar(require(\"../compat\"));\nconst ifaces_1 = require(\"../ifaces\");\nconst BUFFER_INC_SIZE = 4096;\nconst EMPTY_BUFFER = new Uint8Array(0);\nexports.utf8Encoder = new TextEncoder();\nexports.utf8Decoder = new TextDecoder(\"utf8\");\nlet decodeB64;\nexports.decodeB64 = decodeB64;\nlet encodeB64;\nexports.encodeB64 = encodeB64;\nif (typeof btoa === \"undefined\") {\n    exports.decodeB64 = decodeB64 = (b64) => {\n        return Buffer.from(b64, \"base64\");\n    };\n    exports.encodeB64 = encodeB64 = (data) => {\n        return Buffer.from(data).toString(\"base64\");\n    };\n}\nelse {\n    exports.decodeB64 = decodeB64 = (b64) => {\n        const binaryString = atob(b64);\n        const size = binaryString.length;\n        const bytes = new Uint8Array(size);\n        for (let i = 0; i < size; i++) {\n            bytes[i] = binaryString.charCodeAt(i);\n        }\n        return bytes;\n    };\n    exports.encodeB64 = encodeB64 = (data) => {\n        const binaryString = String.fromCharCode(...data);\n        return btoa(binaryString);\n    };\n}\nconst useBigInt64Fallback = typeof DataView.prototype.getBigInt64 === \"undefined\";\nclass BufferError extends Error {\n}\nexports.BufferError = BufferError;\nclass WriteBuffer {\n    constructor() {\n        Object.defineProperty(this, \"_rawBuffer\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"buffer\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"size\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"pos\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.size = BUFFER_INC_SIZE;\n        this.pos = 0;\n        this._rawBuffer = new Uint8Array(this.size);\n        this.buffer = new DataView(this._rawBuffer.buffer);\n    }\n    get position() {\n        return this.pos;\n    }\n    reset() {\n        this.pos = 0;\n    }\n    ensureAlloced(extraLength) {\n        const newSize = this.pos + extraLength;\n        if (newSize > this.size) {\n            this.__realloc(newSize);\n        }\n    }\n    __realloc(newSize) {\n        newSize += BUFFER_INC_SIZE;\n        const newBuffer = new Uint8Array(newSize);\n        newBuffer.set(this._rawBuffer);\n        this._rawBuffer = newBuffer;\n        this.buffer = new DataView(this._rawBuffer.buffer);\n        this.size = newSize;\n    }\n    writeChar(ch) {\n        this.ensureAlloced(1);\n        this.buffer.setUint8(this.pos, ch);\n        this.pos++;\n        return this;\n    }\n    writeString(s) {\n        return this.writeBytes(exports.utf8Encoder.encode(s));\n    }\n    writeBytes(buf) {\n        this.ensureAlloced(buf.length + 4);\n        this.buffer.setInt32(this.pos, buf.length);\n        this.pos += 4;\n        this._rawBuffer.set(buf, this.pos);\n        this.pos += buf.length;\n        return this;\n    }\n    writeInt16(i) {\n        this.ensureAlloced(2);\n        this.buffer.setInt16(this.pos, i);\n        this.pos += 2;\n        return this;\n    }\n    writeInt32(i) {\n        this.ensureAlloced(4);\n        this.buffer.setInt32(this.pos, i);\n        this.pos += 4;\n        return this;\n    }\n    writeFloat32(i) {\n        this.ensureAlloced(4);\n        this.buffer.setFloat32(this.pos, i);\n        this.pos += 4;\n        return this;\n    }\n    writeFloat64(i) {\n        this.ensureAlloced(8);\n        this.buffer.setFloat64(this.pos, i);\n        this.pos += 8;\n        return this;\n    }\n    writeUInt8(i) {\n        this.ensureAlloced(1);\n        this.buffer.setUint8(this.pos, i);\n        this.pos += 1;\n        return this;\n    }\n    writeUInt16(i) {\n        this.ensureAlloced(2);\n        this.buffer.setUint16(this.pos, i);\n        this.pos += 2;\n        return this;\n    }\n    writeUInt32(i) {\n        this.ensureAlloced(4);\n        this.buffer.setUint32(this.pos, i);\n        this.pos += 4;\n        return this;\n    }\n    writeInt64(i) {\n        this.ensureAlloced(8);\n        const hi = Math.floor(i / 0x100000000);\n        const lo = i - hi * 0x100000000;\n        this.buffer.setInt32(this.pos, hi);\n        this.buffer.setUint32(this.pos + 4, lo);\n        this.pos += 8;\n        return this;\n    }\n    writeBigInt64(i) {\n        let ii = i;\n        if (bi.lt(ii, bi.make(0))) {\n            ii = bi.add(bi.make(\"18446744073709551616\"), i);\n        }\n        const hi = bi.rshift(ii, bi.make(32));\n        const lo = bi.bitand(ii, bi.make(0xffffffff));\n        this.writeUInt32(Number(hi));\n        this.writeUInt32(Number(lo));\n        return this;\n    }\n    writeBuffer(buf) {\n        const len = buf.length;\n        this.ensureAlloced(len);\n        this._rawBuffer.set(buf, this.pos);\n        this.pos += len;\n        return this;\n    }\n    unwrap() {\n        return this._rawBuffer.subarray(0, this.pos);\n    }\n}\nexports.WriteBuffer = WriteBuffer;\nclass WriteMessageBuffer {\n    constructor() {\n        Object.defineProperty(this, \"buffer\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"messagePos\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.messagePos = -1;\n        this.buffer = new WriteBuffer();\n    }\n    reset() {\n        this.messagePos = -1;\n        this.buffer.reset();\n        return this;\n    }\n    beginMessage(mtype) {\n        if (this.messagePos >= 0) {\n            throw new BufferError(\"cannot begin a new message: the previous message is not finished\");\n        }\n        this.messagePos = this.buffer.position;\n        this.buffer.writeChar(mtype);\n        this.buffer.writeInt32(0);\n        return this;\n    }\n    endMessage() {\n        if (this.messagePos < 0) {\n            throw new BufferError(\"cannot end the message: no current message\");\n        }\n        this.buffer.buffer.setInt32(this.messagePos + 1, this.buffer.position - this.messagePos - 1);\n        this.messagePos = -1;\n        return this;\n    }\n    writeLegacyHeaders(headers) {\n        if (this.messagePos < 0) {\n            throw new BufferError(\"cannot writeHeaders: no current message\");\n        }\n        if (!headers) {\n            this.buffer.writeUInt16(0);\n            return this;\n        }\n        const entries = Object.entries(headers).filter(([_, value]) => value !== undefined);\n        this.buffer.writeUInt16(entries.length);\n        for (const [code, value] of entries) {\n            this.buffer.writeUInt16(ifaces_1.LegacyHeaderCodes[code]);\n            if (value instanceof Uint8Array) {\n                this.buffer.writeUInt32(value.byteLength);\n                this.buffer.writeBuffer(value);\n            }\n            else if (typeof value === \"string\") {\n                this.buffer.writeString(value);\n            }\n            else {\n                throw new BufferError(\"cannot write header: value is not a Uint8Array or string\");\n            }\n        }\n        return this;\n    }\n    writeChar(ch) {\n        if (this.messagePos < 0) {\n            throw new BufferError(\"cannot writeChar: no current message\");\n        }\n        this.buffer.writeChar(ch);\n        return this;\n    }\n    writeString(s) {\n        if (this.messagePos < 0) {\n            throw new BufferError(\"cannot writeString: no current message\");\n        }\n        this.buffer.writeString(s);\n        return this;\n    }\n    writeBytes(val) {\n        if (this.messagePos < 0) {\n            throw new BufferError(\"cannot writeBytes: no current message\");\n        }\n        this.buffer.writeBytes(val);\n        return this;\n    }\n    writeInt16(i) {\n        if (this.messagePos < 0) {\n            throw new BufferError(\"cannot writeInt16: no current message\");\n        }\n        this.buffer.writeInt16(i);\n        return this;\n    }\n    writeInt32(i) {\n        if (this.messagePos < 0) {\n            throw new BufferError(\"cannot writeInt32: no current message\");\n        }\n        this.buffer.writeInt32(i);\n        return this;\n    }\n    writeUInt16(i) {\n        if (this.messagePos < 0) {\n            throw new BufferError(\"cannot writeInt16: no current message\");\n        }\n        this.buffer.writeUInt16(i);\n        return this;\n    }\n    writeUInt32(i) {\n        if (this.messagePos < 0) {\n            throw new BufferError(\"cannot writeInt32: no current message\");\n        }\n        this.buffer.writeUInt32(i);\n        return this;\n    }\n    writeBigInt64(i) {\n        if (this.messagePos < 0) {\n            throw new BufferError(\"cannot writeChar: no current message\");\n        }\n        this.buffer.writeBigInt64(i);\n        return this;\n    }\n    writeFlags(h, l) {\n        if (this.messagePos < 0) {\n            throw new BufferError(\"cannot writeChar: no current message\");\n        }\n        this.buffer.writeUInt32(h);\n        this.buffer.writeUInt32(l);\n        return this;\n    }\n    writeBuffer(buf) {\n        if (this.messagePos < 0) {\n            throw new BufferError(\"cannot writeBuffer: no current message\");\n        }\n        this.buffer.writeBuffer(buf);\n        return this;\n    }\n    writeSync() {\n        if (this.messagePos >= 0) {\n            throw new BufferError(\"cannot writeSync: the previous message is not finished\");\n        }\n        this.buffer.writeBuffer(SYNC_MESSAGE);\n        return this;\n    }\n    writeFlush() {\n        if (this.messagePos >= 0) {\n            throw new BufferError(\"cannot writeFlush: the previous message is not finished\");\n        }\n        this.buffer.writeBuffer(FLUSH_MESSAGE);\n        return this;\n    }\n    unwrap() {\n        if (this.messagePos >= 0) {\n            throw new BufferError(\"cannot unwrap: an unfinished message is in the buffer\");\n        }\n        return this.buffer.unwrap();\n    }\n}\nexports.WriteMessageBuffer = WriteMessageBuffer;\nconst SYNC_MESSAGE = new WriteMessageBuffer()\n    .beginMessage(chars.$S)\n    .endMessage()\n    .unwrap();\nconst FLUSH_MESSAGE = new WriteMessageBuffer()\n    .beginMessage(chars.$H)\n    .endMessage()\n    .unwrap();\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n    byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nfunction uuidToBuffer(uuid) {\n    const buf = new Uint8Array(16);\n    for (let i = 0; i < 16; i++) {\n        buf[i] = parseInt(uuid.slice(i * 2, i * 2 + 2), 16);\n    }\n    return buf;\n}\nexports.uuidToBuffer = uuidToBuffer;\nclass ReadMessageBuffer {\n    constructor() {\n        Object.defineProperty(this, \"bufs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"len\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"buf0\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"pos0\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"len0\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"curMessageType\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"curMessageLen\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"curMessageLenUnread\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"curMessageReady\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.bufs = [];\n        this.buf0 = null;\n        this.pos0 = 0;\n        this.len0 = 0;\n        this.len = 0;\n        this.curMessageType = 0;\n        this.curMessageLen = 0;\n        this.curMessageLenUnread = 0;\n        this.curMessageReady = false;\n    }\n    get length() {\n        return this.len;\n    }\n    feed(buf) {\n        if (this.buf0 == null ||\n            (this.pos0 === this.len0 && this.bufs.length === 0)) {\n            this.buf0 = new DataView(buf.buffer, buf.byteOffset, buf.byteLength);\n            this.len0 = buf.byteLength;\n            this.pos0 = 0;\n            this.len = this.len0;\n        }\n        else {\n            this.feedEnqueue(buf);\n        }\n    }\n    feedEnqueue(buf) {\n        this.bufs.push(buf);\n        this.len += buf.byteLength;\n    }\n    ensureFirstBuf() {\n        if (this.pos0 === this.len0) {\n            this.__nextBuf();\n        }\n        const buf0 = this.buf0;\n        if (buf0 == null || buf0.byteLength < 1) {\n            throw new BufferError(\"empty buffer\");\n        }\n        return buf0;\n    }\n    checkOverread(size) {\n        if (this.curMessageLenUnread < size || size > this.len) {\n            throw new BufferError(\"buffer overread\");\n        }\n    }\n    __nextBuf() {\n        const nextBuf = this.bufs.shift();\n        if (nextBuf == null) {\n            throw new BufferError(\"buffer overread\");\n        }\n        this.buf0 = new DataView(nextBuf.buffer, nextBuf.byteOffset, nextBuf.byteLength);\n        this.pos0 = 0;\n        this.len0 = nextBuf.byteLength;\n    }\n    discardBuffer(size) {\n        this.ensureFirstBuf();\n        while (true) {\n            if (this.pos0 + size > this.len0) {\n                const nread = this.len0 - this.pos0;\n                this.pos0 = this.len0;\n                this.len -= nread;\n                size -= nread;\n                this.ensureFirstBuf();\n            }\n            else {\n                this.pos0 += size;\n                this.len -= size;\n                break;\n            }\n        }\n    }\n    _finishMessage() {\n        this.curMessageLen = 0;\n        this.curMessageLenUnread = 0;\n        this.curMessageReady = false;\n        this.curMessageType = 0;\n    }\n    __readBufferCopy(buf0, size) {\n        const ret = new Uint8Array(size);\n        let retPos = 0;\n        while (true) {\n            if (this.pos0 + size > this.len0) {\n                const nread = this.len0 - this.pos0;\n                ret.set(new Uint8Array(buf0.buffer, buf0.byteOffset + this.pos0, nread), retPos);\n                retPos += nread;\n                this.pos0 = this.len0;\n                this.len -= nread;\n                size -= nread;\n                buf0 = this.ensureFirstBuf();\n            }\n            else {\n                ret.set(new Uint8Array(buf0.buffer, buf0.byteOffset + this.pos0, size), retPos);\n                this.pos0 += size;\n                this.len -= size;\n                break;\n            }\n        }\n        return ret;\n    }\n    _readBuffer(size) {\n        if (size === 0) {\n            return EMPTY_BUFFER;\n        }\n        const buf0 = this.ensureFirstBuf();\n        if (this.pos0 + size <= this.len0) {\n            const ret = new Uint8Array(buf0.buffer, buf0.byteOffset + this.pos0, size);\n            this.pos0 += size;\n            this.len -= size;\n            return ret;\n        }\n        return this.__readBufferCopy(buf0, size);\n    }\n    readBuffer(size) {\n        this.checkOverread(size);\n        const buf = this._readBuffer(size);\n        this.curMessageLenUnread -= size;\n        return buf;\n    }\n    readUUID() {\n        const buf = this.readBuffer(16);\n        return (byteToHex[buf[0]] +\n            byteToHex[buf[1]] +\n            byteToHex[buf[2]] +\n            byteToHex[buf[3]] +\n            byteToHex[buf[4]] +\n            byteToHex[buf[5]] +\n            byteToHex[buf[6]] +\n            byteToHex[buf[7]] +\n            byteToHex[buf[8]] +\n            byteToHex[buf[9]] +\n            byteToHex[buf[10]] +\n            byteToHex[buf[11]] +\n            byteToHex[buf[12]] +\n            byteToHex[buf[13]] +\n            byteToHex[buf[14]] +\n            byteToHex[buf[15]]);\n    }\n    readChar() {\n        this.checkOverread(1);\n        const buf0 = this.ensureFirstBuf();\n        const ret = buf0.getUint8(this.pos0);\n        this.pos0++;\n        this.curMessageLenUnread--;\n        this.len--;\n        return ret;\n    }\n    readInt16() {\n        this.checkOverread(2);\n        const buf0 = this.ensureFirstBuf();\n        if (this.pos0 + 2 <= this.len0) {\n            const ret = buf0.getInt16(this.pos0);\n            this.pos0 += 2;\n            this.curMessageLenUnread -= 2;\n            this.len -= 2;\n            return ret;\n        }\n        const buf = this._readBuffer(2);\n        this.curMessageLenUnread -= 2;\n        return new DataView(buf.buffer, buf.byteOffset, buf.byteLength).getInt16(0);\n    }\n    readInt32() {\n        this.checkOverread(4);\n        const buf0 = this.ensureFirstBuf();\n        if (this.pos0 + 4 <= this.len0) {\n            const ret = buf0.getInt32(this.pos0);\n            this.pos0 += 4;\n            this.curMessageLenUnread -= 4;\n            this.len -= 4;\n            return ret;\n        }\n        const buf = this._readBuffer(4);\n        this.curMessageLenUnread -= 4;\n        return new DataView(buf.buffer, buf.byteOffset, buf.byteLength).getInt32(0);\n    }\n    readUInt16() {\n        this.checkOverread(2);\n        const buf0 = this.ensureFirstBuf();\n        if (this.pos0 + 2 <= this.len0) {\n            const ret = buf0.getUint16(this.pos0);\n            this.pos0 += 2;\n            this.curMessageLenUnread -= 2;\n            this.len -= 2;\n            return ret;\n        }\n        const buf = this._readBuffer(2);\n        this.curMessageLenUnread -= 2;\n        return new DataView(buf.buffer, buf.byteOffset, buf.byteLength).getUint16(0);\n    }\n    readUInt32() {\n        this.checkOverread(4);\n        const buf0 = this.ensureFirstBuf();\n        if (this.pos0 + 4 <= this.len0) {\n            const ret = buf0.getUint32(this.pos0);\n            this.pos0 += 4;\n            this.curMessageLenUnread -= 4;\n            this.len -= 4;\n            return ret;\n        }\n        const buf = this._readBuffer(4);\n        this.curMessageLenUnread -= 4;\n        return new DataView(buf.buffer, buf.byteOffset, buf.byteLength).getUint32(0);\n    }\n    readBigInt64() {\n        this.checkOverread(8);\n        const buf0 = this.ensureFirstBuf();\n        if (this.pos0 + 8 <= this.len0) {\n            const ret = buf0.getBigInt64(this.pos0);\n            this.pos0 += 8;\n            this.curMessageLenUnread -= 8;\n            this.len -= 8;\n            return ret;\n        }\n        const buf = this._readBuffer(8);\n        this.curMessageLenUnread -= 8;\n        return new DataView(buf.buffer, buf.byteOffset, buf.byteLength).getBigInt64(0);\n    }\n    readString() {\n        const len = this.readInt32();\n        const buf = this.readBuffer(len);\n        return exports.utf8Decoder.decode(buf);\n    }\n    readLenPrefixedBuffer() {\n        const len = this.readInt32();\n        return this.readBuffer(len);\n    }\n    takeMessage() {\n        if (this.curMessageReady) {\n            return true;\n        }\n        if (this.curMessageType === 0) {\n            if (this.len < 1) {\n                return false;\n            }\n            const buf0 = this.ensureFirstBuf();\n            this.curMessageType = buf0.getUint8(this.pos0);\n            this.pos0++;\n            this.len--;\n        }\n        if (this.curMessageLen === 0) {\n            if (this.len < 4) {\n                return false;\n            }\n            const buf0 = this.ensureFirstBuf();\n            if (this.pos0 + 4 <= this.len0) {\n                this.curMessageLen = buf0.getInt32(this.pos0);\n                this.pos0 += 4;\n                this.len -= 4;\n            }\n            else {\n                const buf = this._readBuffer(4);\n                this.curMessageLen = new DataView(buf.buffer, buf.byteOffset, buf.byteLength).getInt32(0);\n            }\n            this.curMessageLenUnread = this.curMessageLen - 4;\n        }\n        if (this.len < this.curMessageLenUnread) {\n            return false;\n        }\n        this.curMessageReady = true;\n        return true;\n    }\n    getMessageType() {\n        return this.curMessageType;\n    }\n    takeMessageType(mtype) {\n        if (this.curMessageReady) {\n            return this.curMessageType === mtype;\n        }\n        if (this.len >= 1) {\n            const buf0 = this.ensureFirstBuf();\n            const unreadMessageType = buf0.getUint8(this.pos0);\n            return mtype === unreadMessageType && this.takeMessage();\n        }\n        return false;\n    }\n    putMessage() {\n        if (!this.curMessageReady) {\n            throw new BufferError(\"cannot put message: no message taken\");\n        }\n        if (this.curMessageLenUnread !== this.curMessageLen - 4) {\n            throw new BufferError(\"cannot put message: message is partially read\");\n        }\n        this.curMessageReady = false;\n    }\n    discardMessage() {\n        if (!this.curMessageReady) {\n            throw new BufferError(\"no message to discard\");\n        }\n        if (this.curMessageLenUnread > 0) {\n            this.discardBuffer(this.curMessageLenUnread);\n        }\n        this._finishMessage();\n    }\n    consumeMessage() {\n        if (!this.curMessageReady) {\n            throw new BufferError(\"no message to consume\");\n        }\n        let buf;\n        if (this.curMessageLenUnread > 0) {\n            buf = this._readBuffer(this.curMessageLenUnread);\n            this.curMessageLenUnread = 0;\n        }\n        else {\n            buf = EMPTY_BUFFER;\n        }\n        this._finishMessage();\n        return buf;\n    }\n    consumeMessageInto(frb) {\n        if (!this.curMessageReady) {\n            throw new BufferError(\"no message to consume\");\n        }\n        if (this.curMessageLenUnread > 0) {\n            if (this.pos0 + this.curMessageLenUnread <= this.len0) {\n                ReadBuffer.init(frb, new Uint8Array(this.buf0.buffer, this.buf0.byteOffset + this.pos0, this.curMessageLenUnread));\n                this.pos0 += this.curMessageLenUnread;\n                this.len -= this.curMessageLenUnread;\n            }\n            else {\n                const buf = this._readBuffer(this.curMessageLenUnread);\n                ReadBuffer.init(frb, buf);\n            }\n            this.curMessageLenUnread = 0;\n        }\n        else {\n            ReadBuffer.init(frb, EMPTY_BUFFER);\n        }\n        this._finishMessage();\n    }\n    finishMessage() {\n        if (this.curMessageType === 0 || !this.curMessageReady) {\n            return;\n        }\n        if (this.curMessageLenUnread) {\n            throw new BufferError(`cannot finishMessage: unread data in message ` +\n                `\"${chars.chr(this.curMessageType)}\"`);\n        }\n        this._finishMessage();\n    }\n}\nexports.ReadMessageBuffer = ReadMessageBuffer;\nclass ReadBuffer {\n    constructor(buf) {\n        Object.defineProperty(this, \"_rawBuffer\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"buffer\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"pos\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"len\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this._rawBuffer = buf;\n        this.buffer = new DataView(buf.buffer, buf.byteOffset, buf.byteLength);\n        this.len = buf.length;\n        this.pos = 0;\n    }\n    get position() {\n        return this.pos;\n    }\n    get length() {\n        return this.len - this.pos;\n    }\n    finish() {\n        if (this.len !== this.pos) {\n            throw new BufferError(\"unexpected trailing data in buffer\");\n        }\n    }\n    discard(size) {\n        if (this.pos + size > this.len) {\n            throw new BufferError(\"buffer overread\");\n        }\n        this.pos += size;\n    }\n    readUInt8() {\n        if (this.pos + 1 > this.len) {\n            throw new BufferError(\"buffer overread\");\n        }\n        const num = this.buffer.getUint8(this.pos);\n        this.pos++;\n        return num;\n    }\n    readUInt16() {\n        if (this.pos + 2 > this.len) {\n            throw new BufferError(\"buffer overread\");\n        }\n        const num = this.buffer.getUint16(this.pos);\n        this.pos += 2;\n        return num;\n    }\n    readInt8() {\n        if (this.pos + 1 > this.len) {\n            throw new BufferError(\"buffer overread\");\n        }\n        const num = this.buffer.getInt8(this.pos);\n        this.pos++;\n        return num;\n    }\n    readInt16() {\n        if (this.pos + 2 > this.len) {\n            throw new BufferError(\"buffer overread\");\n        }\n        const num = this.buffer.getInt16(this.pos);\n        this.pos += 2;\n        return num;\n    }\n    readInt32() {\n        if (this.pos + 4 > this.len) {\n            throw new BufferError(\"buffer overread\");\n        }\n        const num = this.buffer.getInt32(this.pos);\n        this.pos += 4;\n        return num;\n    }\n    readFloat32() {\n        if (this.pos + 4 > this.len) {\n            throw new BufferError(\"buffer overread\");\n        }\n        const num = this.buffer.getFloat32(this.pos);\n        this.pos += 4;\n        return num;\n    }\n    readFloat64() {\n        if (this.pos + 8 > this.len) {\n            throw new BufferError(\"buffer overread\");\n        }\n        const num = this.buffer.getFloat64(this.pos);\n        this.pos += 8;\n        return num;\n    }\n    readUInt32() {\n        if (this.pos + 4 > this.len) {\n            throw new BufferError(\"buffer overread\");\n        }\n        const num = this.buffer.getUint32(this.pos);\n        this.pos += 4;\n        return num;\n    }\n    reportInt64Overflow(hi, lo) {\n        const bhi = bi.make(hi);\n        const blo = bi.make(lo >>> 0);\n        const num = bi.add(bi.mul(bhi, bi.make(0x100000000)), blo);\n        throw new BufferError(`integer overflow: cannot unpack <std::int64>'${num.toString()}' ` +\n            `into JavaScript Number type without losing precision`);\n    }\n    readInt64() {\n        if (this.pos + 8 > this.len) {\n            throw new BufferError(\"buffer overread\");\n        }\n        const hi = this.buffer.getInt32(this.pos);\n        const lo = this.buffer.getInt32(this.pos + 4);\n        this.pos += 8;\n        if (hi === 0) {\n            return lo >>> 0;\n        }\n        else if (hi >= -0x200000 && hi < 0x200000) {\n            return hi * 4294967296 + (lo >>> 0);\n        }\n        return this.reportInt64Overflow(hi, lo);\n    }\n    readBigInt64Fallback() {\n        if (bi.hasNativeBigInt) {\n            const hi = this.buffer.getUint32(this.pos);\n            const lo = this.buffer.getUint32(this.pos + 4);\n            this.pos += 8;\n            let res = (BigInt(hi) << BigInt(32)) + BigInt(lo);\n            if (hi >= 0x80000000) {\n                res = BigInt(\"-18446744073709551616\") + res;\n            }\n            return res;\n        }\n        else {\n            const buf = this.readBuffer(8);\n            const snum = compat.decodeInt64ToString(buf);\n            return bi.make(snum);\n        }\n    }\n    readBigInt64() {\n        if (this.pos + 8 > this.len) {\n            throw new BufferError(\"buffer overread\");\n        }\n        if (!useBigInt64Fallback) {\n            const ret = this.buffer.getBigInt64(this.pos);\n            this.pos += 8;\n            return ret;\n        }\n        else {\n            return this.readBigInt64Fallback();\n        }\n    }\n    readBuffer(size) {\n        if (this.pos + size > this.len) {\n            throw new BufferError(\"buffer overread\");\n        }\n        const buf = this._rawBuffer.subarray(this.pos, this.pos + size);\n        this.pos += size;\n        return buf;\n    }\n    readUUID(dash = \"\") {\n        if (this.pos + 16 > this.len) {\n            throw new BufferError(\"buffer overread\");\n        }\n        const buf = this._rawBuffer;\n        const pos = this.pos;\n        const uuid = byteToHex[buf[pos + 0]] +\n            byteToHex[buf[pos + 1]] +\n            byteToHex[buf[pos + 2]] +\n            byteToHex[buf[pos + 3]] +\n            dash +\n            byteToHex[buf[pos + 4]] +\n            byteToHex[buf[pos + 5]] +\n            dash +\n            byteToHex[buf[pos + 6]] +\n            byteToHex[buf[pos + 7]] +\n            dash +\n            byteToHex[buf[pos + 8]] +\n            byteToHex[buf[pos + 9]] +\n            dash +\n            byteToHex[buf[pos + 10]] +\n            byteToHex[buf[pos + 11]] +\n            byteToHex[buf[pos + 12]] +\n            byteToHex[buf[pos + 13]] +\n            byteToHex[buf[pos + 14]] +\n            byteToHex[buf[pos + 15]];\n        this.pos += 16;\n        return uuid;\n    }\n    readString() {\n        const len = this.readUInt32();\n        const buf = this.readBuffer(len);\n        return exports.utf8Decoder.decode(buf);\n    }\n    consumeAsString() {\n        if (this.pos === this.len) {\n            return \"\";\n        }\n        const res = exports.utf8Decoder.decode(this._rawBuffer.subarray(this.pos, this.len));\n        this.pos = this.len;\n        return res;\n    }\n    consumeAsBuffer() {\n        const res = this._rawBuffer.subarray(this.pos, this.len);\n        this.pos = this.len;\n        return res;\n    }\n    sliceInto(frb, size) {\n        if (this.pos + size > this.len) {\n            throw new BufferError(\"buffer overread\");\n        }\n        frb._rawBuffer = this._rawBuffer;\n        frb.buffer = this.buffer;\n        frb.pos = this.pos;\n        frb.len = this.pos + size;\n        this.pos += size;\n    }\n    static init(frb, buffer) {\n        frb._rawBuffer = buffer;\n        frb.buffer = new DataView(buffer.buffer, buffer.byteOffset, buffer.byteLength);\n        frb.pos = 0;\n        frb.len = buffer.byteLength;\n    }\n    static alloc() {\n        return new this(EMPTY_BUFFER);\n    }\n}\nexports.ReadBuffer = ReadBuffer;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.prettyPrintError = exports.EdgeDBError = void 0;\nconst buffer_1 = require(\"../primitives/buffer\");\nclass EdgeDBError extends Error {\n    constructor(message, options) {\n        super(undefined, options);\n        Object.defineProperty(this, \"source\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_message\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_query\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_attrs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperties(this, {\n            _message: { writable: true, enumerable: false },\n            _query: { writable: true, enumerable: false },\n            _attrs: { writable: true, enumerable: false },\n        });\n        this._message = message !== null && message !== void 0 ? message : \"\";\n    }\n    get message() {\n        return (this._message +\n            (this._query && this._attrs\n                ? prettyPrintError(this._attrs, this._query)\n                : \"\"));\n    }\n    get name() {\n        return this.constructor.name;\n    }\n    hasTag(tag) {\n        var _a;\n        const error_type = this.constructor;\n        return Boolean((_a = error_type.tags) === null || _a === void 0 ? void 0 : _a[tag]);\n    }\n}\nObject.defineProperty(EdgeDBError, \"tags\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: {}\n});\nexports.EdgeDBError = EdgeDBError;\nvar ErrorAttr;\n(function (ErrorAttr) {\n    ErrorAttr[ErrorAttr[\"hint\"] = 1] = \"hint\";\n    ErrorAttr[ErrorAttr[\"details\"] = 2] = \"details\";\n    ErrorAttr[ErrorAttr[\"serverTraceback\"] = 257] = \"serverTraceback\";\n    ErrorAttr[ErrorAttr[\"positionStart\"] = -15] = \"positionStart\";\n    ErrorAttr[ErrorAttr[\"positionEnd\"] = -14] = \"positionEnd\";\n    ErrorAttr[ErrorAttr[\"lineStart\"] = -13] = \"lineStart\";\n    ErrorAttr[ErrorAttr[\"columnStart\"] = -12] = \"columnStart\";\n    ErrorAttr[ErrorAttr[\"utf16ColumnStart\"] = -11] = \"utf16ColumnStart\";\n    ErrorAttr[ErrorAttr[\"lineEnd\"] = -10] = \"lineEnd\";\n    ErrorAttr[ErrorAttr[\"columnEnd\"] = -9] = \"columnEnd\";\n    ErrorAttr[ErrorAttr[\"utf16ColumnEnd\"] = -8] = \"utf16ColumnEnd\";\n    ErrorAttr[ErrorAttr[\"characterStart\"] = -7] = \"characterStart\";\n    ErrorAttr[ErrorAttr[\"characterEnd\"] = -6] = \"characterEnd\";\n})(ErrorAttr || (ErrorAttr = {}));\nfunction tryParseInt(val) {\n    if (val instanceof Uint8Array) {\n        try {\n            return parseInt(buffer_1.utf8Decoder.decode(val), 10);\n        }\n        catch { }\n    }\n    return null;\n}\nfunction prettyPrintError(attrs, query) {\n    const lineStart = tryParseInt(attrs.get(ErrorAttr.lineStart));\n    const lineEnd = tryParseInt(attrs.get(ErrorAttr.lineEnd));\n    const colStart = tryParseInt(attrs.get(ErrorAttr.utf16ColumnStart));\n    const colEnd = tryParseInt(attrs.get(ErrorAttr.utf16ColumnEnd));\n    if (lineStart == null ||\n        lineEnd == null ||\n        colStart == null ||\n        colEnd == null) {\n        return \"\";\n    }\n    const queryLines = query.split(\"\\n\");\n    const lineNoWidth = lineEnd.toString().length;\n    let errMessage = \"\\n\";\n    errMessage += \"|\".padStart(lineNoWidth + 3) + \"\\n\";\n    for (let i = lineStart; i < lineEnd + 1; i++) {\n        const line = queryLines[i - 1];\n        const start = i === lineStart ? colStart : 0;\n        const end = i === lineEnd ? colEnd : line.length;\n        errMessage += ` ${i.toString().padStart(lineNoWidth)} | ${line}\\n`;\n        errMessage += `${\"|\".padStart(lineNoWidth + 3)} ${\"\"\n            .padStart(end - start, \"^\")\n            .padStart(end)}\\n`;\n    }\n    if (attrs.has(ErrorAttr.hint)) {\n        errMessage += `Hint: ${buffer_1.utf8Decoder.decode(attrs.get(ErrorAttr.hint))}\\n`;\n    }\n    return errMessage;\n}\nexports.prettyPrintError = prettyPrintError;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SHOULD_RETRY = exports.SHOULD_RECONNECT = void 0;\nexports.SHOULD_RECONNECT = Symbol(\"SHOULD_RECONNECT\");\nexports.SHOULD_RETRY = Symbol(\"SHOULD_RETRY\");\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2019-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DuplicateDatabaseDefinitionError = exports.DuplicateUserDefinitionError = exports.DuplicatePropertyDefinitionError = exports.DuplicateLinkDefinitionError = exports.DuplicateModuleDefinitionError = exports.DuplicateDefinitionError = exports.InvalidCastDefinitionError = exports.InvalidConstraintDefinitionError = exports.InvalidFunctionDefinitionError = exports.InvalidAliasDefinitionError = exports.InvalidOperatorDefinitionError = exports.InvalidDatabaseDefinitionError = exports.InvalidUserDefinitionError = exports.InvalidPropertyDefinitionError = exports.InvalidLinkDefinitionError = exports.InvalidModuleDefinitionError = exports.InvalidDefinitionError = exports.SchemaDefinitionError = exports.SchemaError = exports.UnknownParameterError = exports.UnknownDatabaseError = exports.UnknownUserError = exports.UnknownPropertyError = exports.UnknownLinkError = exports.UnknownModuleError = exports.InvalidReferenceError = exports.InvalidPropertyTargetError = exports.InvalidLinkTargetError = exports.InvalidTargetError = exports.InvalidTypeError = exports.GraphQLSyntaxError = exports.SchemaSyntaxError = exports.EdgeQLSyntaxError = exports.InvalidSyntaxError = exports.QueryError = exports.DisabledCapabilityError = exports.UnsupportedCapabilityError = exports.CapabilityError = exports.ResultCardinalityMismatchError = exports.StateMismatchError = exports.ParameterTypeMismatchError = exports.InputDataError = exports.UnexpectedMessageError = exports.TypeSpecNotFoundError = exports.UnsupportedProtocolVersionError = exports.BinaryProtocolError = exports.ProtocolError = exports.UnsupportedFeatureError = exports.InternalServerError = exports.EdgeDBError = void 0;\nexports.InternalClientError = exports.NoDataError = exports.InvalidArgumentError = exports.UnknownArgumentError = exports.MissingArgumentError = exports.QueryArgumentError = exports.InterfaceError = exports.ClientConnectionClosedError = exports.ClientConnectionTimeoutError = exports.ClientConnectionFailedTemporarilyError = exports.ClientConnectionFailedError = exports.ClientConnectionError = exports.ClientError = exports.WarningMessage = exports.LogMessage = exports.UnsupportedBackendFeatureError = exports.BackendError = exports.BackendUnavailableError = exports.AvailabilityError = exports.AuthenticationError = exports.AccessError = exports.ConfigurationError = exports.WatchError = exports.TransactionDeadlockError = exports.TransactionSerializationError = exports.TransactionConflictError = exports.TransactionError = exports.MissingRequiredError = exports.CardinalityViolationError = exports.ConstraintViolationError = exports.IntegrityError = exports.QueryAssertionError = exports.AccessPolicyError = exports.NumericOutOfRangeError = exports.DivisionByZeroError = exports.InvalidValueError = exports.ExecutionError = exports.IdleTransactionTimeoutError = exports.TransactionTimeoutError = exports.QueryTimeoutError = exports.IdleSessionTimeoutError = exports.SessionTimeoutError = exports.DuplicateMigrationError = exports.DuplicateCastDefinitionError = exports.DuplicateConstraintDefinitionError = exports.DuplicateFunctionDefinitionError = exports.DuplicateViewDefinitionError = exports.DuplicateOperatorDefinitionError = void 0;\nconst base_1 = require(\"./base\");\nconst tags = __importStar(require(\"./tags\"));\nvar base_2 = require(\"./base\");\nObject.defineProperty(exports, \"EdgeDBError\", { enumerable: true, get: function () { return base_2.EdgeDBError; } });\n__exportStar(require(\"./tags\"), exports);\nclass InternalServerError extends base_1.EdgeDBError {\n    get code() {\n        return 16777216;\n    }\n}\nexports.InternalServerError = InternalServerError;\nclass UnsupportedFeatureError extends base_1.EdgeDBError {\n    get code() {\n        return 33554432;\n    }\n}\nexports.UnsupportedFeatureError = UnsupportedFeatureError;\nclass ProtocolError extends base_1.EdgeDBError {\n    get code() {\n        return 50331648;\n    }\n}\nexports.ProtocolError = ProtocolError;\nclass BinaryProtocolError extends ProtocolError {\n    get code() {\n        return 50397184;\n    }\n}\nexports.BinaryProtocolError = BinaryProtocolError;\nclass UnsupportedProtocolVersionError extends BinaryProtocolError {\n    get code() {\n        return 50397185;\n    }\n}\nexports.UnsupportedProtocolVersionError = UnsupportedProtocolVersionError;\nclass TypeSpecNotFoundError extends BinaryProtocolError {\n    get code() {\n        return 50397186;\n    }\n}\nexports.TypeSpecNotFoundError = TypeSpecNotFoundError;\nclass UnexpectedMessageError extends BinaryProtocolError {\n    get code() {\n        return 50397187;\n    }\n}\nexports.UnexpectedMessageError = UnexpectedMessageError;\nclass InputDataError extends ProtocolError {\n    get code() {\n        return 50462720;\n    }\n}\nexports.InputDataError = InputDataError;\nclass ParameterTypeMismatchError extends InputDataError {\n    get code() {\n        return 50462976;\n    }\n}\nexports.ParameterTypeMismatchError = ParameterTypeMismatchError;\nclass StateMismatchError extends InputDataError {\n    get code() {\n        return 50463232;\n    }\n}\nObject.defineProperty(StateMismatchError, \"tags\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: { [tags.SHOULD_RETRY]: true }\n});\nexports.StateMismatchError = StateMismatchError;\nclass ResultCardinalityMismatchError extends ProtocolError {\n    get code() {\n        return 50528256;\n    }\n}\nexports.ResultCardinalityMismatchError = ResultCardinalityMismatchError;\nclass CapabilityError extends ProtocolError {\n    get code() {\n        return 50593792;\n    }\n}\nexports.CapabilityError = CapabilityError;\nclass UnsupportedCapabilityError extends CapabilityError {\n    get code() {\n        return 50594048;\n    }\n}\nexports.UnsupportedCapabilityError = UnsupportedCapabilityError;\nclass DisabledCapabilityError extends CapabilityError {\n    get code() {\n        return 50594304;\n    }\n}\nexports.DisabledCapabilityError = DisabledCapabilityError;\nclass QueryError extends base_1.EdgeDBError {\n    get code() {\n        return 67108864;\n    }\n}\nexports.QueryError = QueryError;\nclass InvalidSyntaxError extends QueryError {\n    get code() {\n        return 67174400;\n    }\n}\nexports.InvalidSyntaxError = InvalidSyntaxError;\nclass EdgeQLSyntaxError extends InvalidSyntaxError {\n    get code() {\n        return 67174656;\n    }\n}\nexports.EdgeQLSyntaxError = EdgeQLSyntaxError;\nclass SchemaSyntaxError extends InvalidSyntaxError {\n    get code() {\n        return 67174912;\n    }\n}\nexports.SchemaSyntaxError = SchemaSyntaxError;\nclass GraphQLSyntaxError extends InvalidSyntaxError {\n    get code() {\n        return 67175168;\n    }\n}\nexports.GraphQLSyntaxError = GraphQLSyntaxError;\nclass InvalidTypeError extends QueryError {\n    get code() {\n        return 67239936;\n    }\n}\nexports.InvalidTypeError = InvalidTypeError;\nclass InvalidTargetError extends InvalidTypeError {\n    get code() {\n        return 67240192;\n    }\n}\nexports.InvalidTargetError = InvalidTargetError;\nclass InvalidLinkTargetError extends InvalidTargetError {\n    get code() {\n        return 67240193;\n    }\n}\nexports.InvalidLinkTargetError = InvalidLinkTargetError;\nclass InvalidPropertyTargetError extends InvalidTargetError {\n    get code() {\n        return 67240194;\n    }\n}\nexports.InvalidPropertyTargetError = InvalidPropertyTargetError;\nclass InvalidReferenceError extends QueryError {\n    get code() {\n        return 67305472;\n    }\n}\nexports.InvalidReferenceError = InvalidReferenceError;\nclass UnknownModuleError extends InvalidReferenceError {\n    get code() {\n        return 67305473;\n    }\n}\nexports.UnknownModuleError = UnknownModuleError;\nclass UnknownLinkError extends InvalidReferenceError {\n    get code() {\n        return 67305474;\n    }\n}\nexports.UnknownLinkError = UnknownLinkError;\nclass UnknownPropertyError extends InvalidReferenceError {\n    get code() {\n        return 67305475;\n    }\n}\nexports.UnknownPropertyError = UnknownPropertyError;\nclass UnknownUserError extends InvalidReferenceError {\n    get code() {\n        return 67305476;\n    }\n}\nexports.UnknownUserError = UnknownUserError;\nclass UnknownDatabaseError extends InvalidReferenceError {\n    get code() {\n        return 67305477;\n    }\n}\nexports.UnknownDatabaseError = UnknownDatabaseError;\nclass UnknownParameterError extends InvalidReferenceError {\n    get code() {\n        return 67305478;\n    }\n}\nexports.UnknownParameterError = UnknownParameterError;\nclass SchemaError extends QueryError {\n    get code() {\n        return 67371008;\n    }\n}\nexports.SchemaError = SchemaError;\nclass SchemaDefinitionError extends QueryError {\n    get code() {\n        return 67436544;\n    }\n}\nexports.SchemaDefinitionError = SchemaDefinitionError;\nclass InvalidDefinitionError extends SchemaDefinitionError {\n    get code() {\n        return 67436800;\n    }\n}\nexports.InvalidDefinitionError = InvalidDefinitionError;\nclass InvalidModuleDefinitionError extends InvalidDefinitionError {\n    get code() {\n        return 67436801;\n    }\n}\nexports.InvalidModuleDefinitionError = InvalidModuleDefinitionError;\nclass InvalidLinkDefinitionError extends InvalidDefinitionError {\n    get code() {\n        return 67436802;\n    }\n}\nexports.InvalidLinkDefinitionError = InvalidLinkDefinitionError;\nclass InvalidPropertyDefinitionError extends InvalidDefinitionError {\n    get code() {\n        return 67436803;\n    }\n}\nexports.InvalidPropertyDefinitionError = InvalidPropertyDefinitionError;\nclass InvalidUserDefinitionError extends InvalidDefinitionError {\n    get code() {\n        return 67436804;\n    }\n}\nexports.InvalidUserDefinitionError = InvalidUserDefinitionError;\nclass InvalidDatabaseDefinitionError extends InvalidDefinitionError {\n    get code() {\n        return 67436805;\n    }\n}\nexports.InvalidDatabaseDefinitionError = InvalidDatabaseDefinitionError;\nclass InvalidOperatorDefinitionError extends InvalidDefinitionError {\n    get code() {\n        return 67436806;\n    }\n}\nexports.InvalidOperatorDefinitionError = InvalidOperatorDefinitionError;\nclass InvalidAliasDefinitionError extends InvalidDefinitionError {\n    get code() {\n        return 67436807;\n    }\n}\nexports.InvalidAliasDefinitionError = InvalidAliasDefinitionError;\nclass InvalidFunctionDefinitionError extends InvalidDefinitionError {\n    get code() {\n        return 67436808;\n    }\n}\nexports.InvalidFunctionDefinitionError = InvalidFunctionDefinitionError;\nclass InvalidConstraintDefinitionError extends InvalidDefinitionError {\n    get code() {\n        return 67436809;\n    }\n}\nexports.InvalidConstraintDefinitionError = InvalidConstraintDefinitionError;\nclass InvalidCastDefinitionError extends InvalidDefinitionError {\n    get code() {\n        return 67436810;\n    }\n}\nexports.InvalidCastDefinitionError = InvalidCastDefinitionError;\nclass DuplicateDefinitionError extends SchemaDefinitionError {\n    get code() {\n        return 67437056;\n    }\n}\nexports.DuplicateDefinitionError = DuplicateDefinitionError;\nclass DuplicateModuleDefinitionError extends DuplicateDefinitionError {\n    get code() {\n        return 67437057;\n    }\n}\nexports.DuplicateModuleDefinitionError = DuplicateModuleDefinitionError;\nclass DuplicateLinkDefinitionError extends DuplicateDefinitionError {\n    get code() {\n        return 67437058;\n    }\n}\nexports.DuplicateLinkDefinitionError = DuplicateLinkDefinitionError;\nclass DuplicatePropertyDefinitionError extends DuplicateDefinitionError {\n    get code() {\n        return 67437059;\n    }\n}\nexports.DuplicatePropertyDefinitionError = DuplicatePropertyDefinitionError;\nclass DuplicateUserDefinitionError extends DuplicateDefinitionError {\n    get code() {\n        return 67437060;\n    }\n}\nexports.DuplicateUserDefinitionError = DuplicateUserDefinitionError;\nclass DuplicateDatabaseDefinitionError extends DuplicateDefinitionError {\n    get code() {\n        return 67437061;\n    }\n}\nexports.DuplicateDatabaseDefinitionError = DuplicateDatabaseDefinitionError;\nclass DuplicateOperatorDefinitionError extends DuplicateDefinitionError {\n    get code() {\n        return 67437062;\n    }\n}\nexports.DuplicateOperatorDefinitionError = DuplicateOperatorDefinitionError;\nclass DuplicateViewDefinitionError extends DuplicateDefinitionError {\n    get code() {\n        return 67437063;\n    }\n}\nexports.DuplicateViewDefinitionError = DuplicateViewDefinitionError;\nclass DuplicateFunctionDefinitionError extends DuplicateDefinitionError {\n    get code() {\n        return 67437064;\n    }\n}\nexports.DuplicateFunctionDefinitionError = DuplicateFunctionDefinitionError;\nclass DuplicateConstraintDefinitionError extends DuplicateDefinitionError {\n    get code() {\n        return 67437065;\n    }\n}\nexports.DuplicateConstraintDefinitionError = DuplicateConstraintDefinitionError;\nclass DuplicateCastDefinitionError extends DuplicateDefinitionError {\n    get code() {\n        return 67437066;\n    }\n}\nexports.DuplicateCastDefinitionError = DuplicateCastDefinitionError;\nclass DuplicateMigrationError extends DuplicateDefinitionError {\n    get code() {\n        return 67437067;\n    }\n}\nexports.DuplicateMigrationError = DuplicateMigrationError;\nclass SessionTimeoutError extends QueryError {\n    get code() {\n        return 67502080;\n    }\n}\nexports.SessionTimeoutError = SessionTimeoutError;\nclass IdleSessionTimeoutError extends SessionTimeoutError {\n    get code() {\n        return 67502336;\n    }\n}\nObject.defineProperty(IdleSessionTimeoutError, \"tags\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: { [tags.SHOULD_RETRY]: true }\n});\nexports.IdleSessionTimeoutError = IdleSessionTimeoutError;\nclass QueryTimeoutError extends SessionTimeoutError {\n    get code() {\n        return 67502592;\n    }\n}\nexports.QueryTimeoutError = QueryTimeoutError;\nclass TransactionTimeoutError extends SessionTimeoutError {\n    get code() {\n        return 67504640;\n    }\n}\nexports.TransactionTimeoutError = TransactionTimeoutError;\nclass IdleTransactionTimeoutError extends TransactionTimeoutError {\n    get code() {\n        return 67504641;\n    }\n}\nexports.IdleTransactionTimeoutError = IdleTransactionTimeoutError;\nclass ExecutionError extends base_1.EdgeDBError {\n    get code() {\n        return 83886080;\n    }\n}\nexports.ExecutionError = ExecutionError;\nclass InvalidValueError extends ExecutionError {\n    get code() {\n        return 83951616;\n    }\n}\nexports.InvalidValueError = InvalidValueError;\nclass DivisionByZeroError extends InvalidValueError {\n    get code() {\n        return 83951617;\n    }\n}\nexports.DivisionByZeroError = DivisionByZeroError;\nclass NumericOutOfRangeError extends InvalidValueError {\n    get code() {\n        return 83951618;\n    }\n}\nexports.NumericOutOfRangeError = NumericOutOfRangeError;\nclass AccessPolicyError extends InvalidValueError {\n    get code() {\n        return 83951619;\n    }\n}\nexports.AccessPolicyError = AccessPolicyError;\nclass QueryAssertionError extends InvalidValueError {\n    get code() {\n        return 83951620;\n    }\n}\nexports.QueryAssertionError = QueryAssertionError;\nclass IntegrityError extends ExecutionError {\n    get code() {\n        return 84017152;\n    }\n}\nexports.IntegrityError = IntegrityError;\nclass ConstraintViolationError extends IntegrityError {\n    get code() {\n        return 84017153;\n    }\n}\nexports.ConstraintViolationError = ConstraintViolationError;\nclass CardinalityViolationError extends IntegrityError {\n    get code() {\n        return 84017154;\n    }\n}\nexports.CardinalityViolationError = CardinalityViolationError;\nclass MissingRequiredError extends IntegrityError {\n    get code() {\n        return 84017155;\n    }\n}\nexports.MissingRequiredError = MissingRequiredError;\nclass TransactionError extends ExecutionError {\n    get code() {\n        return 84082688;\n    }\n}\nexports.TransactionError = TransactionError;\nclass TransactionConflictError extends TransactionError {\n    get code() {\n        return 84082944;\n    }\n}\nObject.defineProperty(TransactionConflictError, \"tags\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: { [tags.SHOULD_RETRY]: true }\n});\nexports.TransactionConflictError = TransactionConflictError;\nclass TransactionSerializationError extends TransactionConflictError {\n    get code() {\n        return 84082945;\n    }\n}\nObject.defineProperty(TransactionSerializationError, \"tags\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: { [tags.SHOULD_RETRY]: true }\n});\nexports.TransactionSerializationError = TransactionSerializationError;\nclass TransactionDeadlockError extends TransactionConflictError {\n    get code() {\n        return 84082946;\n    }\n}\nObject.defineProperty(TransactionDeadlockError, \"tags\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: { [tags.SHOULD_RETRY]: true }\n});\nexports.TransactionDeadlockError = TransactionDeadlockError;\nclass WatchError extends ExecutionError {\n    get code() {\n        return 84148224;\n    }\n}\nexports.WatchError = WatchError;\nclass ConfigurationError extends base_1.EdgeDBError {\n    get code() {\n        return 100663296;\n    }\n}\nexports.ConfigurationError = ConfigurationError;\nclass AccessError extends base_1.EdgeDBError {\n    get code() {\n        return 117440512;\n    }\n}\nexports.AccessError = AccessError;\nclass AuthenticationError extends AccessError {\n    get code() {\n        return 117506048;\n    }\n}\nexports.AuthenticationError = AuthenticationError;\nclass AvailabilityError extends base_1.EdgeDBError {\n    get code() {\n        return 134217728;\n    }\n}\nexports.AvailabilityError = AvailabilityError;\nclass BackendUnavailableError extends AvailabilityError {\n    get code() {\n        return 134217729;\n    }\n}\nObject.defineProperty(BackendUnavailableError, \"tags\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: { [tags.SHOULD_RETRY]: true }\n});\nexports.BackendUnavailableError = BackendUnavailableError;\nclass BackendError extends base_1.EdgeDBError {\n    get code() {\n        return 150994944;\n    }\n}\nexports.BackendError = BackendError;\nclass UnsupportedBackendFeatureError extends BackendError {\n    get code() {\n        return 150995200;\n    }\n}\nexports.UnsupportedBackendFeatureError = UnsupportedBackendFeatureError;\nclass LogMessage extends base_1.EdgeDBError {\n    get code() {\n        return 4026531840;\n    }\n}\nexports.LogMessage = LogMessage;\nclass WarningMessage extends LogMessage {\n    get code() {\n        return 4026597376;\n    }\n}\nexports.WarningMessage = WarningMessage;\nclass ClientError extends base_1.EdgeDBError {\n    get code() {\n        return 4278190080;\n    }\n}\nexports.ClientError = ClientError;\nclass ClientConnectionError extends ClientError {\n    get code() {\n        return 4278255616;\n    }\n}\nexports.ClientConnectionError = ClientConnectionError;\nclass ClientConnectionFailedError extends ClientConnectionError {\n    get code() {\n        return 4278255872;\n    }\n}\nexports.ClientConnectionFailedError = ClientConnectionFailedError;\nclass ClientConnectionFailedTemporarilyError extends ClientConnectionFailedError {\n    get code() {\n        return 4278255873;\n    }\n}\nObject.defineProperty(ClientConnectionFailedTemporarilyError, \"tags\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: {\n        [tags.SHOULD_RECONNECT]: true,\n        [tags.SHOULD_RETRY]: true,\n    }\n});\nexports.ClientConnectionFailedTemporarilyError = ClientConnectionFailedTemporarilyError;\nclass ClientConnectionTimeoutError extends ClientConnectionError {\n    get code() {\n        return 4278256128;\n    }\n}\nObject.defineProperty(ClientConnectionTimeoutError, \"tags\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: {\n        [tags.SHOULD_RECONNECT]: true,\n        [tags.SHOULD_RETRY]: true,\n    }\n});\nexports.ClientConnectionTimeoutError = ClientConnectionTimeoutError;\nclass ClientConnectionClosedError extends ClientConnectionError {\n    get code() {\n        return 4278256384;\n    }\n}\nObject.defineProperty(ClientConnectionClosedError, \"tags\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: {\n        [tags.SHOULD_RECONNECT]: true,\n        [tags.SHOULD_RETRY]: true,\n    }\n});\nexports.ClientConnectionClosedError = ClientConnectionClosedError;\nclass InterfaceError extends ClientError {\n    get code() {\n        return 4278321152;\n    }\n}\nexports.InterfaceError = InterfaceError;\nclass QueryArgumentError extends InterfaceError {\n    get code() {\n        return 4278321408;\n    }\n}\nexports.QueryArgumentError = QueryArgumentError;\nclass MissingArgumentError extends QueryArgumentError {\n    get code() {\n        return 4278321409;\n    }\n}\nexports.MissingArgumentError = MissingArgumentError;\nclass UnknownArgumentError extends QueryArgumentError {\n    get code() {\n        return 4278321410;\n    }\n}\nexports.UnknownArgumentError = UnknownArgumentError;\nclass InvalidArgumentError extends QueryArgumentError {\n    get code() {\n        return 4278321411;\n    }\n}\nexports.InvalidArgumentError = InvalidArgumentError;\nclass NoDataError extends ClientError {\n    get code() {\n        return 4278386688;\n    }\n}\nexports.NoDataError = NoDataError;\nclass InternalClientError extends ClientError {\n    get code() {\n        return 4278452224;\n    }\n}\nexports.InternalClientError = InternalClientError;\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2019-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst errors_1 = require(\"../errors\");\nclass Node {\n    constructor(key, value) {\n        Object.defineProperty(this, \"key\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"value\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"next\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"prev\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.key = key;\n        this.value = value;\n        this.next = null;\n        this.prev = null;\n    }\n}\nclass Deque {\n    constructor() {\n        Object.defineProperty(this, \"head\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"tail\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"len\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.head = null;\n        this.tail = null;\n        this.len = 0;\n    }\n    get length() {\n        return this.len;\n    }\n    push(key, value) {\n        const node = new Node(key, value);\n        if (this.head == null) {\n            this.head = node;\n            this.tail = node;\n        }\n        else {\n            this.head.prev = node;\n            node.next = this.head;\n            this.head = node;\n        }\n        this.len++;\n        return node;\n    }\n    moveToTop(node) {\n        if (node.prev == null) {\n            return;\n        }\n        const prev = node.prev;\n        const next = node.next;\n        prev.next = next;\n        if (next != null) {\n            next.prev = prev;\n        }\n        if (this.tail === node) {\n            this.tail = prev;\n        }\n        node.prev = null;\n        node.next = this.head;\n        this.head.prev = node;\n        this.head = node;\n    }\n    deleteBottom() {\n        if (!this.len || !this.tail || !this.head) {\n            return null;\n        }\n        if (this.tail === this.head) {\n            this.len = 0;\n            const node = this.tail;\n            this.tail = null;\n            this.head = null;\n            return node;\n        }\n        const tail = this.tail;\n        const beforeLast = this.tail.prev;\n        beforeLast.next = null;\n        this.tail.prev = null;\n        this.tail.next = null;\n        this.tail = beforeLast;\n        this.len--;\n        return tail;\n    }\n}\nclass LRU {\n    constructor({ capacity }) {\n        Object.defineProperty(this, \"capacity\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"map\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"deque\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        if (capacity <= 0) {\n            throw new TypeError(\"capacity is expected to be greater than 0\");\n        }\n        this.capacity = capacity;\n        this.map = new Map();\n        this.deque = new Deque();\n    }\n    get length() {\n        const len = this.map.size;\n        if (len !== this.deque.length) {\n            throw new errors_1.InternalClientError(\"deque & map disagree on elements count\");\n        }\n        return len;\n    }\n    has(key) {\n        return this.map.has(key);\n    }\n    get(key) {\n        const node = this.map.get(key);\n        if (node != null) {\n            this.deque.moveToTop(node);\n            return node.value;\n        }\n        return undefined;\n    }\n    set(key, value) {\n        const existingNode = this.map.get(key);\n        if (existingNode != null) {\n            existingNode.value = value;\n            this.deque.moveToTop(existingNode);\n        }\n        else {\n            const newNode = this.deque.push(key, value);\n            this.map.set(key, newNode);\n            while (this.deque.length > this.capacity) {\n                const bottomNode = this.deque.deleteBottom();\n                this.map.delete(bottomNode.key);\n            }\n        }\n    }\n    *keys() {\n        let node = this.deque.head;\n        while (node != null) {\n            yield node.key;\n            node = node.next;\n        }\n    }\n    *entries() {\n        let node = this.deque.head;\n        while (node != null) {\n            yield [node.key, node.value];\n            node = node.next;\n        }\n    }\n    *values() {\n        let node = this.deque.head;\n        while (node != null) {\n            yield node.value;\n            node = node.next;\n        }\n    }\n}\nexports.default = LRU;\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2019-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AT_LEAST_ONE = exports.MANY = exports.ONE = exports.AT_MOST_ONE = exports.NO_RESULT = exports.KNOWN_TYPENAMES = exports.KNOWN_TYPES = exports.INVALID_CODEC_ID = exports.NULL_CODEC_ID = void 0;\nexports.NULL_CODEC_ID = \"00000000000000000000000000000000\";\nexports.INVALID_CODEC_ID = \"ffffffffffffffffffffffffffffffff\";\nexports.KNOWN_TYPES = new Map([\n    [\"00000000000000000000000000000001\", \"anytype\"],\n    [\"00000000000000000000000000000002\", \"anytuple\"],\n    [\"000000000000000000000000000000f0\", \"std\"],\n    [\"000000000000000000000000000000ff\", \"empty-tuple\"],\n    [\"00000000000000000000000000000100\", \"std::uuid\"],\n    [\"00000000000000000000000000000101\", \"std::str\"],\n    [\"00000000000000000000000000000102\", \"std::bytes\"],\n    [\"00000000000000000000000000000103\", \"std::int16\"],\n    [\"00000000000000000000000000000104\", \"std::int32\"],\n    [\"00000000000000000000000000000105\", \"std::int64\"],\n    [\"00000000000000000000000000000106\", \"std::float32\"],\n    [\"00000000000000000000000000000107\", \"std::float64\"],\n    [\"00000000000000000000000000000108\", \"std::decimal\"],\n    [\"00000000000000000000000000000109\", \"std::bool\"],\n    [\"0000000000000000000000000000010a\", \"std::datetime\"],\n    [\"0000000000000000000000000000010b\", \"cal::local_datetime\"],\n    [\"0000000000000000000000000000010c\", \"cal::local_date\"],\n    [\"0000000000000000000000000000010d\", \"cal::local_time\"],\n    [\"0000000000000000000000000000010e\", \"std::duration\"],\n    [\"0000000000000000000000000000010f\", \"std::json\"],\n    [\"00000000000000000000000000000110\", \"std::bigint\"],\n    [\"00000000000000000000000000000111\", \"cal::relative_duration\"],\n    [\"00000000000000000000000000000112\", \"cal::date_duration\"],\n    [\"00000000000000000000000000000130\", \"cfg::memory\"],\n    [\"9565dd8804f511eea6910b6ebe179825\", \"ext::pgvector::vector\"],\n]);\nexports.KNOWN_TYPENAMES = (() => {\n    const res = new Map();\n    for (const [id, name] of exports.KNOWN_TYPES.entries()) {\n        res.set(name, id);\n    }\n    return res;\n})();\nexports.NO_RESULT = 0x6e;\nexports.AT_MOST_ONE = 0x6f;\nexports.ONE = 0x41;\nexports.MANY = 0x6d;\nexports.AT_LEAST_ONE = 0x4d;\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2019-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ScalarCodec = exports.Codec = void 0;\nconst buffer_1 = require(\"../primitives/buffer\");\nconst consts_1 = require(\"./consts\");\nclass Codec {\n    constructor(tid) {\n        Object.defineProperty(this, \"tid\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"tidBuffer\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.tid = tid;\n        this.tidBuffer = (0, buffer_1.uuidToBuffer)(tid);\n    }\n    getKnownTypeName() {\n        return \"anytype\";\n    }\n}\nexports.Codec = Codec;\nclass ScalarCodec extends Codec {\n    constructor(tid, derivedFromTid = null) {\n        super(tid);\n        Object.defineProperty(this, \"derivedFromTid\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"typeName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"tsType\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"unknown\"\n        });\n        Object.defineProperty(this, \"importedType\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        this.derivedFromTid = derivedFromTid;\n    }\n    setTypeName(typeName) {\n        this.typeName = typeName;\n    }\n    derive(tid) {\n        const self = this.constructor;\n        return new self(tid, this.tid);\n    }\n    getSubcodecs() {\n        return [];\n    }\n    getKind() {\n        return \"scalar\";\n    }\n    getKnownTypeName() {\n        if (this.typeName) {\n            return this.typeName;\n        }\n        if (this.derivedFromTid) {\n            return consts_1.KNOWN_TYPES.get(this.derivedFromTid);\n        }\n        return consts_1.KNOWN_TYPES.get(this.tid) || \"anytype\";\n    }\n}\nexports.ScalarCodec = ScalarCodec;\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2019-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BoolCodec = void 0;\nconst ifaces_1 = require(\"./ifaces\");\nconst errors_1 = require(\"../errors\");\nclass BoolCodec extends ifaces_1.ScalarCodec {\n    constructor() {\n        super(...arguments);\n        Object.defineProperty(this, \"tsType\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"boolean\"\n        });\n    }\n    encode(buf, object) {\n        const typeOf = typeof object;\n        if (typeOf !== \"boolean\" && typeOf !== \"number\") {\n            throw new errors_1.InvalidArgumentError(`a boolean or a number was expected, got \"${object}\"`);\n        }\n        buf.writeInt32(1);\n        buf.writeChar(object ? 1 : 0);\n    }\n    decode(buf) {\n        return buf.readUInt8() !== 0;\n    }\n}\nexports.BoolCodec = BoolCodec;\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2019-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Float64Codec = exports.Float32Codec = exports.Int16Codec = exports.Int32Codec = exports.Int64BigintCodec = exports.Int64Codec = void 0;\nconst bi = __importStar(require(\"../primitives/bigint\"));\nconst ifaces_1 = require(\"./ifaces\");\nconst errors_1 = require(\"../errors\");\nclass Int64Codec extends ifaces_1.ScalarCodec {\n    constructor() {\n        super(...arguments);\n        Object.defineProperty(this, \"tsType\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"number\"\n        });\n    }\n    encode(buf, object) {\n        if (typeof object !== \"number\") {\n            throw new errors_1.InvalidArgumentError(`a number was expected, got \"${object}\"`);\n        }\n        buf.writeInt32(8);\n        buf.writeInt64(object);\n    }\n    decode(buf) {\n        return buf.readInt64();\n    }\n}\nexports.Int64Codec = Int64Codec;\nclass Int64BigintCodec extends ifaces_1.ScalarCodec {\n    encode(buf, object) {\n        if (!bi.isBigInt(object)) {\n            throw new errors_1.InvalidArgumentError(`a bigint was expected, got \"${object}\"`);\n        }\n        buf.writeInt32(8);\n        buf.writeBigInt64(object);\n    }\n    decode(buf) {\n        return buf.readBigInt64();\n    }\n}\nexports.Int64BigintCodec = Int64BigintCodec;\nclass Int32Codec extends ifaces_1.ScalarCodec {\n    constructor() {\n        super(...arguments);\n        Object.defineProperty(this, \"tsType\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"number\"\n        });\n    }\n    encode(buf, object) {\n        if (typeof object !== \"number\") {\n            throw new errors_1.InvalidArgumentError(`a number was expected, got \"${object}\"`);\n        }\n        buf.writeInt32(4);\n        buf.writeInt32(object);\n    }\n    decode(buf) {\n        return buf.readInt32();\n    }\n}\nexports.Int32Codec = Int32Codec;\nclass Int16Codec extends ifaces_1.ScalarCodec {\n    constructor() {\n        super(...arguments);\n        Object.defineProperty(this, \"tsType\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"number\"\n        });\n    }\n    encode(buf, object) {\n        if (typeof object !== \"number\") {\n            throw new errors_1.InvalidArgumentError(`a number was expected, got \"${object}\"`);\n        }\n        buf.writeInt32(2);\n        buf.writeInt16(object);\n    }\n    decode(buf) {\n        return buf.readInt16();\n    }\n}\nexports.Int16Codec = Int16Codec;\nclass Float32Codec extends ifaces_1.ScalarCodec {\n    constructor() {\n        super(...arguments);\n        Object.defineProperty(this, \"tsType\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"number\"\n        });\n    }\n    encode(buf, object) {\n        if (typeof object !== \"number\") {\n            throw new errors_1.InvalidArgumentError(`a number was expected, got \"${object}\"`);\n        }\n        buf.writeInt32(4);\n        buf.writeFloat32(object);\n    }\n    decode(buf) {\n        return buf.readFloat32();\n    }\n}\nexports.Float32Codec = Float32Codec;\nclass Float64Codec extends ifaces_1.ScalarCodec {\n    constructor() {\n        super(...arguments);\n        Object.defineProperty(this, \"tsType\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"number\"\n        });\n    }\n    encode(buf, object) {\n        if (typeof object !== \"number\") {\n            throw new errors_1.InvalidArgumentError(`a number was expected, got \"${object}\"`);\n        }\n        buf.writeInt32(8);\n        buf.writeFloat64(object);\n    }\n    decode(buf) {\n        return buf.readFloat64();\n    }\n}\nexports.Float64Codec = Float64Codec;\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2019-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DecimalStringCodec = exports.BigIntCodec = void 0;\nconst ifaces_1 = require(\"./ifaces\");\nconst errors_1 = require(\"../errors\");\nconst NUMERIC_POS = 0x0000;\nconst NUMERIC_NEG = 0x4000;\nclass BigIntCodec extends ifaces_1.ScalarCodec {\n    constructor() {\n        super(...arguments);\n        Object.defineProperty(this, \"tsType\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"bigint\"\n        });\n    }\n    encode(buf, object) {\n        if (typeof object !== \"bigint\") {\n            throw new errors_1.InvalidArgumentError(`a bigint was expected, got \"${object}\"`);\n        }\n        const NBASE = BigInt(\"10000\");\n        const ZERO = BigInt(\"0\");\n        const digits = [];\n        let sign = NUMERIC_POS;\n        let uval = object;\n        if (object === ZERO) {\n            buf.writeUInt32(8);\n            buf.writeUInt32(0);\n            buf.writeUInt16(NUMERIC_POS);\n            buf.writeUInt16(0);\n            return;\n        }\n        if (object < ZERO) {\n            sign = NUMERIC_NEG;\n            uval = -uval;\n        }\n        while (uval) {\n            const mod = uval % NBASE;\n            uval /= NBASE;\n            digits.push(mod);\n        }\n        buf.writeUInt32(8 + digits.length * 2);\n        buf.writeUInt16(digits.length);\n        buf.writeUInt16(digits.length - 1);\n        buf.writeUInt16(sign);\n        buf.writeUInt16(0);\n        for (let i = digits.length - 1; i >= 0; i--) {\n            buf.writeUInt16(Number(digits[i]));\n        }\n    }\n    decode(buf) {\n        return BigInt(decodeBigIntToString(buf));\n    }\n}\nexports.BigIntCodec = BigIntCodec;\nclass DecimalStringCodec extends ifaces_1.ScalarCodec {\n    constructor() {\n        super(...arguments);\n        Object.defineProperty(this, \"tsType\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"string\"\n        });\n    }\n    encode(buf, object) {\n        if (typeof object !== \"string\") {\n            throw new errors_1.InvalidArgumentError(`a string was expected, got \"${object}\"`);\n        }\n        const match = object.match(/^(-?)([0-9]+)(?:\\.([0-9]+))?(?:[eE]([-+]?[0-9]+))?$/);\n        if (!match) {\n            throw new errors_1.InvalidArgumentError(`invalid decimal string \"${object}\"`);\n        }\n        const [_, sign, int, _frac, _exp] = match;\n        const frac = _frac !== null && _frac !== void 0 ? _frac : \"\";\n        const exp = _exp ? parseInt(_exp, 10) : 0;\n        const sdigits = int.padStart(Math.ceil(int.length / 4) * 4, \"0\") +\n            frac.padEnd(Math.ceil(frac.length / 4) * 4, \"0\");\n        const digits = [];\n        for (let i = 0, len = sdigits.length; i < len; i += 4) {\n            digits.push(parseInt(sdigits.slice(i, i + 4), 10));\n        }\n        buf.writeUInt32(8 + digits.length * 2);\n        buf.writeUInt16(digits.length);\n        buf.writeInt16(Math.ceil((int.length + exp) / 4) - 1);\n        buf.writeUInt16(sign === \"-\" ? NUMERIC_NEG : NUMERIC_POS);\n        buf.writeUInt16(Math.max(frac.length - exp, 0));\n        for (let i = 0, len = digits.length; i < len; i++) {\n            buf.writeUInt16(digits[i]);\n        }\n    }\n    decode(buf) {\n        return decodeDecimalToString(buf);\n    }\n}\nexports.DecimalStringCodec = DecimalStringCodec;\nfunction decodeBigIntToString(buf) {\n    const ndigits = buf.readUInt16();\n    const weight = buf.readInt16();\n    const sign = buf.readUInt16();\n    const dscale = buf.readUInt16();\n    let result = \"\";\n    switch (sign) {\n        case NUMERIC_POS:\n            break;\n        case NUMERIC_NEG:\n            result += \"-\";\n            break;\n        default:\n            throw new errors_1.ProtocolError(\"bad bigint sign data\");\n    }\n    if (dscale !== 0) {\n        throw new errors_1.ProtocolError(\"bigint data has fractional part\");\n    }\n    if (ndigits === 0) {\n        return \"0\";\n    }\n    let i = weight;\n    let d = 0;\n    while (i >= 0) {\n        if (i <= weight && d < ndigits) {\n            const digit = buf.readUInt16().toString();\n            result += d > 0 ? digit.padStart(4, \"0\") : digit;\n            d++;\n        }\n        else {\n            result += \"0000\";\n        }\n        i--;\n    }\n    return result;\n}\nfunction decodeDecimalToString(buf) {\n    const ndigits = buf.readUInt16();\n    const weight = buf.readInt16();\n    const sign = buf.readUInt16();\n    const dscale = buf.readUInt16();\n    let result = \"\";\n    switch (sign) {\n        case NUMERIC_POS:\n            break;\n        case NUMERIC_NEG:\n            result += \"-\";\n            break;\n        default:\n            throw new errors_1.ProtocolError(\"bad decimal sign data\");\n    }\n    let d = 0;\n    if (weight < 0) {\n        d = weight + 1;\n        result += \"0\";\n    }\n    else {\n        for (d = 0; d <= weight; d++) {\n            const digit = d < ndigits ? buf.readUInt16() : 0;\n            let sdigit = digit.toString();\n            if (d > 0) {\n                sdigit = sdigit.padStart(4, \"0\");\n            }\n            result += sdigit;\n        }\n    }\n    if (dscale > 0) {\n        result += \".\";\n        const end = result.length + dscale;\n        for (let i = 0; i < dscale; d++, i += 4) {\n            const digit = d >= 0 && d < ndigits ? buf.readUInt16() : 0;\n            result += digit.toString().padStart(4, \"0\");\n        }\n        result = result.slice(0, end);\n    }\n    return result;\n}\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2019-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.StrCodec = void 0;\nconst buffer_1 = require(\"../primitives/buffer\");\nconst ifaces_1 = require(\"./ifaces\");\nconst errors_1 = require(\"../errors\");\nclass StrCodec extends ifaces_1.ScalarCodec {\n    constructor() {\n        super(...arguments);\n        Object.defineProperty(this, \"tsType\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"string\"\n        });\n    }\n    encode(buf, object) {\n        if (typeof object !== \"string\") {\n            throw new errors_1.InvalidArgumentError(`a string was expected, got \"${object}\"`);\n        }\n        const val = object;\n        const strbuf = buffer_1.utf8Encoder.encode(val);\n        buf.writeInt32(strbuf.length);\n        buf.writeBuffer(strbuf);\n    }\n    decode(buf) {\n        return buf.consumeAsString();\n    }\n}\nexports.StrCodec = StrCodec;\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2019-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UUIDCodec = void 0;\nconst buffer_1 = require(\"../primitives/buffer\");\nconst ifaces_1 = require(\"./ifaces\");\nconst errors_1 = require(\"../errors\");\nfunction UUIDBufferFromString(uuid) {\n    let uuidClean = uuid;\n    if (uuidClean.length !== 32) {\n        uuidClean = uuidClean.replace(/\\-/g, \"\");\n        if (uuidClean.length !== 32) {\n            throw new TypeError(`invalid UUID \"${uuid}\"`);\n        }\n    }\n    try {\n        return (0, buffer_1.uuidToBuffer)(uuidClean);\n    }\n    catch {\n        throw new TypeError(`invalid UUID \"${uuid}\"`);\n    }\n}\nclass UUIDCodec extends ifaces_1.ScalarCodec {\n    constructor() {\n        super(...arguments);\n        Object.defineProperty(this, \"tsType\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"string\"\n        });\n    }\n    encode(buf, object) {\n        if (typeof object === \"string\") {\n            const ubuf = UUIDBufferFromString(object);\n            buf.writeInt32(16);\n            buf.writeBuffer(ubuf);\n        }\n        else {\n            throw new errors_1.InvalidArgumentError(`cannot encode UUID \"${object}\": invalid type`);\n        }\n    }\n    decode(buf) {\n        return buf.readUUID(\"-\");\n    }\n}\nexports.UUIDCodec = UUIDCodec;\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2019-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BytesCodec = void 0;\nconst ifaces_1 = require(\"./ifaces\");\nconst errors_1 = require(\"../errors\");\nclass BytesCodec extends ifaces_1.ScalarCodec {\n    constructor() {\n        super(...arguments);\n        Object.defineProperty(this, \"tsType\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"Uint8Array\"\n        });\n    }\n    encode(buf, object) {\n        if (!(object instanceof Uint8Array)) {\n            throw new errors_1.InvalidArgumentError(`a Uint8Array or Buffer was expected, got \"${object}\"`);\n        }\n        buf.writeInt32(object.length);\n        buf.writeBuffer(object);\n    }\n    decode(buf) {\n        return buf.consumeAsBuffer();\n    }\n}\nexports.BytesCodec = BytesCodec;\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2019-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.JSONStringCodec = exports.JSONCodec = void 0;\nconst buffer_1 = require(\"../primitives/buffer\");\nconst ifaces_1 = require(\"./ifaces\");\nconst errors_1 = require(\"../errors\");\nclass JSONCodec extends ifaces_1.ScalarCodec {\n    constructor() {\n        super(...arguments);\n        Object.defineProperty(this, \"tsType\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"unknown\"\n        });\n    }\n    encode(buf, object) {\n        let val;\n        try {\n            val = JSON.stringify(object);\n        }\n        catch (err) {\n            throw new errors_1.InvalidArgumentError(`a JSON-serializable value was expected, got \"${object}\"`);\n        }\n        if (typeof val !== \"string\") {\n            throw new errors_1.InvalidArgumentError(`a JSON-serializable value was expected, got \"${object}\"`);\n        }\n        const strbuf = buffer_1.utf8Encoder.encode(val);\n        buf.writeInt32(strbuf.length + 1);\n        buf.writeChar(1);\n        buf.writeBuffer(strbuf);\n    }\n    decode(buf) {\n        const format = buf.readUInt8();\n        if (format !== 1) {\n            throw new errors_1.ProtocolError(`unexpected JSON format ${format}`);\n        }\n        return JSON.parse(buf.consumeAsString());\n    }\n}\nexports.JSONCodec = JSONCodec;\nclass JSONStringCodec extends ifaces_1.ScalarCodec {\n    encode(buf, object) {\n        if (typeof object !== \"string\") {\n            throw new errors_1.InvalidArgumentError(`a string was expected, got \"${object}\"`);\n        }\n        const strbuf = buffer_1.utf8Encoder.encode(object);\n        buf.writeInt32(strbuf.length + 1);\n        buf.writeChar(1);\n        buf.writeBuffer(strbuf);\n    }\n    decode(buf) {\n        const format = buf.readUInt8();\n        if (format !== 1) {\n            throw new errors_1.ProtocolError(`unexpected JSON format ${format}`);\n        }\n        return buf.consumeAsString();\n    }\n}\nexports.JSONStringCodec = JSONStringCodec;\n","\"use strict\";\n/*!\n * Portions Copyright (c) 2019 MagicStack Inc. and the EdgeDB authors.\n * Portions Copyright (c) 2001-2019 Python Software Foundation.\n * All rights reserved.\n * Licence: PSFL https://docs.python.org/3/license.html\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ord2ymd = exports.ymd2ord = exports.daysBeforeMonth = exports.daysInMonth = exports.isLeapYear = void 0;\nfunction isLeapYear(year) {\n    return year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0);\n}\nexports.isLeapYear = isLeapYear;\nfunction daysInMonth(year, month) {\n    if (month === 2 && isLeapYear(year)) {\n        return 29;\n    }\n    return _DAYS_IN_MONTH[month];\n}\nexports.daysInMonth = daysInMonth;\nfunction daysBeforeYear(year) {\n    const y = year - 1;\n    return (y * 365 + Math.trunc(y / 4) - Math.trunc(y / 100) + Math.trunc(y / 400));\n}\nfunction daysBeforeMonth(year, month) {\n    return _DAYS_BEFORE_MONTH[month] + (month > 2 && isLeapYear(year) ? 1 : 0);\n}\nexports.daysBeforeMonth = daysBeforeMonth;\nconst _DI400Y = daysBeforeYear(401);\nconst _DI100Y = daysBeforeYear(101);\nconst _DI4Y = daysBeforeYear(5);\nconst _DAYS_IN_MONTH = [-1, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\nconst _DAYS_BEFORE_MONTH = (() => {\n    const dbf = [-1];\n    let dbm = 0;\n    for (let i = 1; i < _DAYS_IN_MONTH.length; i++) {\n        const dim = _DAYS_IN_MONTH[i];\n        dbf.push(dbm);\n        dbm += dim;\n    }\n    return dbf;\n})();\nfunction ymd2ord(year, month, day) {\n    return daysBeforeYear(year) + daysBeforeMonth(year, month) + day;\n}\nexports.ymd2ord = ymd2ord;\nfunction divmod(dividend, divisor) {\n    const quotient = Math.floor(dividend / divisor);\n    return [quotient, dividend - divisor * quotient];\n}\nfunction ord2ymd(n) {\n    n--;\n    let n400;\n    [n400, n] = divmod(n, _DI400Y);\n    let year = n400 * 400 + 1;\n    let n100;\n    [n100, n] = divmod(n, _DI100Y);\n    let n4;\n    [n4, n] = divmod(n, _DI4Y);\n    let n1;\n    [n1, n] = divmod(n, 365);\n    year += n100 * 100 + n4 * 4 + n1;\n    if (n1 === 4 || n100 === 4) {\n        return [year - 1, 12, 31];\n    }\n    const leapyear = n1 === 3 && (n4 !== 24 || n100 === 3);\n    let month = (n + 50) >> 5;\n    let preceding = _DAYS_BEFORE_MONTH[month] + (month > 2 && leapyear ? 1 : 0);\n    if (preceding > n) {\n        month -= 1;\n        preceding -= _DAYS_IN_MONTH[month] + (month === 2 && leapyear ? 1 : 0);\n    }\n    n -= preceding;\n    return [year, month, n + 1];\n}\nexports.ord2ymd = ord2ymd;\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2019-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parseHumanDurationString = exports.DateDuration = exports.RelativeDuration = exports.Duration = exports.LocalDateTime = exports.LocalDateFromOrdinal = exports.LocalDateToOrdinal = exports.LocalDate = exports.LocalTime = exports.DATE_PRIVATE = void 0;\nconst bi = __importStar(require(\"../primitives/bigint\"));\nconst dateutil_1 = require(\"./dateutil\");\nexports.DATE_PRIVATE = Symbol.for(\"edgedb.datetime\");\nfunction toNumber(val) {\n    const n = Number(val);\n    if (Number.isNaN(n)) {\n        return 0;\n    }\n    return n;\n}\nfunction assertInteger(val) {\n    if (!Number.isInteger(val)) {\n        throw new RangeError(`unsupported fractional value ${val}`);\n    }\n    return val;\n}\nclass LocalTime {\n    constructor(isoHour = 0, isoMinute = 0, isoSecond = 0, isoMillisecond = 0, isoMicrosecond = 0, isoNanosecond = 0) {\n        Object.defineProperty(this, \"_hour\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_minute\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_second\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_millisecond\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_microsecond\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_nanosecond\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        isoHour = Math.floor(toNumber(isoHour));\n        isoMinute = Math.floor(toNumber(isoMinute));\n        isoSecond = Math.floor(toNumber(isoSecond));\n        isoMillisecond = Math.floor(toNumber(isoMillisecond));\n        isoMicrosecond = Math.floor(toNumber(isoMicrosecond));\n        isoNanosecond = Math.floor(toNumber(isoNanosecond));\n        if (isoHour < 0 || isoHour > 23) {\n            throw new RangeError(`invalid number of hours ${isoHour}: expected a value in 0-23 range`);\n        }\n        if (isoMinute < 0 || isoMinute > 59) {\n            throw new RangeError(`invalid number of minutes ${isoMinute}: expected a value in 0-59 range`);\n        }\n        if (isoSecond < 0 || isoSecond > 59) {\n            throw new RangeError(`invalid number of seconds ${isoSecond}: expected a value in 0-59 range`);\n        }\n        if (isoMillisecond < 0 || isoMillisecond > 999) {\n            throw new RangeError(`invalid number of milliseconds ${isoMillisecond}: ` +\n                `expected a value in 0-999 range`);\n        }\n        if (isoMicrosecond < 0 || isoMicrosecond > 999) {\n            throw new RangeError(`invalid number of microseconds ${isoMicrosecond}: ` +\n                `expected a value in 0-999 range`);\n        }\n        if (isoNanosecond < 0 || isoNanosecond > 999) {\n            throw new RangeError(`invalid number of nanoseconds ${isoNanosecond}: ` +\n                `expected a value in 0-999 range`);\n        }\n        this._hour = isoHour;\n        this._minute = isoMinute;\n        this._second = isoSecond;\n        this._millisecond = isoMillisecond;\n        this._microsecond = isoMicrosecond;\n        this._nanosecond = isoNanosecond;\n    }\n    get hour() {\n        return this._hour;\n    }\n    get minute() {\n        return this._minute;\n    }\n    get second() {\n        return this._second;\n    }\n    get millisecond() {\n        return this._millisecond;\n    }\n    get microsecond() {\n        return this._microsecond;\n    }\n    get nanosecond() {\n        return this._nanosecond;\n    }\n    toString() {\n        const hh = this._hour.toString().padStart(2, \"0\");\n        const mm = this._minute.toString().padStart(2, \"0\");\n        const ss = this._second.toString().padStart(2, \"0\");\n        let repr = `${hh}:${mm}:${ss}`;\n        if (this._millisecond || this._microsecond || this._nanosecond) {\n            repr += `.${this._millisecond\n                .toString()\n                .padStart(3, \"0\")}${this._microsecond\n                .toString()\n                .padStart(3, \"0\")}${this._nanosecond\n                .toString()\n                .padStart(3, \"0\")}`.replace(/(?:0+)$/, \"\");\n        }\n        return repr;\n    }\n    toJSON() {\n        return this.toString();\n    }\n    valueOf() {\n        throw new TypeError(\"Not possible to compare LocalTime\");\n    }\n}\nexports.LocalTime = LocalTime;\nclass LocalDate {\n    constructor(isoYear, isoMonth, isoDay) {\n        Object.defineProperty(this, \"_date\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        isoYear = Math.trunc(toNumber(isoYear));\n        isoMonth = Math.floor(toNumber(isoMonth));\n        isoDay = Math.floor(toNumber(isoDay));\n        if (isoYear < -271820 || isoYear > 275759) {\n            throw new RangeError(`invalid year ${isoYear}: expected a value in -271820-275759 range`);\n        }\n        if (isoMonth < 1 || isoMonth > 12) {\n            throw new RangeError(`invalid month ${isoMonth}: expected a value in 1-12 range`);\n        }\n        const maxDays = (0, dateutil_1.daysInMonth)(isoYear, isoMonth);\n        if (isoDay < 1 || isoDay > maxDays) {\n            throw new RangeError(`invalid number of days ${isoDay}: expected a value in 1-${maxDays} range`);\n        }\n        this._date = new Date(Date.UTC(isoYear, isoMonth - 1, isoDay));\n        if (isoYear >= 0 && isoYear <= 99) {\n            this._date.setUTCFullYear(isoYear);\n        }\n    }\n    get year() {\n        return this._date.getUTCFullYear();\n    }\n    get month() {\n        return this._date.getUTCMonth() + 1;\n    }\n    get day() {\n        return this._date.getUTCDate();\n    }\n    get dayOfWeek() {\n        return ((this._date.getUTCDay() + 6) % 7) + 1;\n    }\n    get dayOfYear() {\n        return ((0, dateutil_1.daysBeforeMonth)(this._date.getUTCFullYear(), this._date.getUTCMonth() + 1) + this._date.getUTCDate());\n    }\n    get daysInWeek() {\n        return 7;\n    }\n    get daysInMonth() {\n        return (0, dateutil_1.daysInMonth)(this._date.getUTCFullYear(), this._date.getUTCMonth() + 1);\n    }\n    get daysInYear() {\n        return (0, dateutil_1.isLeapYear)(this._date.getUTCFullYear()) ? 366 : 365;\n    }\n    get monthsInYear() {\n        return 12;\n    }\n    get inLeapYear() {\n        return (0, dateutil_1.isLeapYear)(this._date.getUTCFullYear());\n    }\n    toString() {\n        const year = this.year < 0 || this.year > 9999\n            ? (this.year < 0 ? \"-\" : \"+\") +\n                Math.abs(this.year).toString().padStart(6, \"0\")\n            : this.year.toString().padStart(4, \"0\");\n        const month = this.month.toString().padStart(2, \"0\");\n        const day = this.day.toString().padStart(2, \"0\");\n        return `${year}-${month}-${day}`;\n    }\n    toJSON() {\n        return this.toString();\n    }\n    valueOf() {\n        throw new TypeError(\"Not possible to compare LocalDate\");\n    }\n}\nexports.LocalDate = LocalDate;\nfunction LocalDateToOrdinal(localdate) {\n    return (0, dateutil_1.ymd2ord)(localdate.year, localdate.month, localdate.day);\n}\nexports.LocalDateToOrdinal = LocalDateToOrdinal;\nfunction LocalDateFromOrdinal(ordinal) {\n    const [year, month, day] = (0, dateutil_1.ord2ymd)(ordinal);\n    return new LocalDate(year, month, day);\n}\nexports.LocalDateFromOrdinal = LocalDateFromOrdinal;\nclass LocalDateTime extends LocalDate {\n    constructor(isoYear, isoMonth, isoDay, isoHour = 0, isoMinute = 0, isoSecond = 0, isoMillisecond = 0, isoMicrosecond = 0, isoNanosecond = 0) {\n        super(isoYear, isoMonth, isoDay);\n        Object.defineProperty(this, \"_time\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this._time = new LocalTime(isoHour, isoMinute, isoSecond, isoMillisecond, isoMicrosecond, isoNanosecond);\n    }\n    get hour() {\n        return this._time[\"_hour\"];\n    }\n    get minute() {\n        return this._time[\"_minute\"];\n    }\n    get second() {\n        return this._time[\"_second\"];\n    }\n    get millisecond() {\n        return this._time[\"_millisecond\"];\n    }\n    get microsecond() {\n        return this._time[\"_microsecond\"];\n    }\n    get nanosecond() {\n        return this._time[\"_nanosecond\"];\n    }\n    toString() {\n        return `${super.toString()}T${this._time.toString()}`;\n    }\n    valueOf() {\n        throw new TypeError(\"Not possible to compare LocalDateTime\");\n    }\n}\nexports.LocalDateTime = LocalDateTime;\nconst durationRegex = new RegExp(`^(\\\\-|\\\\+)?P(?:(\\\\d+)Y)?(?:(\\\\d+)M)?(?:(\\\\d+)W)?(?:(\\\\d+)D)?` +\n    `(T(?:(\\\\d+)(\\\\.\\\\d{1,10})?H)?(?:(\\\\d+)(\\\\.\\\\d{1,10})?M)?` +\n    `(?:(\\\\d+)(\\\\.\\\\d{1,9})?S)?)?$`, \"i\");\nclass Duration {\n    constructor(years = 0, months = 0, weeks = 0, days = 0, hours = 0, minutes = 0, seconds = 0, milliseconds = 0, microseconds = 0, nanoseconds = 0) {\n        Object.defineProperty(this, \"_years\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_months\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_weeks\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_days\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_hours\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_minutes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_seconds\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_milliseconds\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_microseconds\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_nanoseconds\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_sign\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        years = assertInteger(toNumber(years));\n        months = assertInteger(toNumber(months));\n        weeks = assertInteger(toNumber(weeks));\n        days = assertInteger(toNumber(days));\n        hours = assertInteger(toNumber(hours));\n        minutes = assertInteger(toNumber(minutes));\n        seconds = assertInteger(toNumber(seconds));\n        milliseconds = assertInteger(toNumber(milliseconds));\n        microseconds = assertInteger(toNumber(microseconds));\n        nanoseconds = assertInteger(toNumber(nanoseconds));\n        const fields = [\n            years,\n            months,\n            weeks,\n            days,\n            hours,\n            minutes,\n            seconds,\n            milliseconds,\n            microseconds,\n            nanoseconds,\n        ];\n        let sign = 0;\n        for (const field of fields) {\n            if (field === Infinity || field === -Infinity) {\n                throw new RangeError(\"infinite values not allowed as duration fields\");\n            }\n            const fieldSign = Math.sign(field);\n            if (sign && fieldSign && fieldSign !== sign) {\n                throw new RangeError(\"mixed-sign values not allowed as duration fields\");\n            }\n            sign = sign || fieldSign;\n        }\n        this._years = years || 0;\n        this._months = months || 0;\n        this._weeks = weeks || 0;\n        this._days = days || 0;\n        this._hours = hours || 0;\n        this._minutes = minutes || 0;\n        this._seconds = seconds || 0;\n        this._milliseconds = milliseconds || 0;\n        this._microseconds = microseconds || 0;\n        this._nanoseconds = nanoseconds || 0;\n        this._sign = sign || 0;\n    }\n    get years() {\n        return this._years;\n    }\n    get months() {\n        return this._months;\n    }\n    get weeks() {\n        return this._weeks;\n    }\n    get days() {\n        return this._days;\n    }\n    get hours() {\n        return this._hours;\n    }\n    get minutes() {\n        return this._minutes;\n    }\n    get seconds() {\n        return this._seconds;\n    }\n    get milliseconds() {\n        return this._milliseconds;\n    }\n    get microseconds() {\n        return this._microseconds;\n    }\n    get nanoseconds() {\n        return this._nanoseconds;\n    }\n    get sign() {\n        return this._sign;\n    }\n    get blank() {\n        return this._sign === 0;\n    }\n    toString() {\n        let dateParts = \"\";\n        if (this._years) {\n            dateParts += bi.make(Math.abs(this._years)) + \"Y\";\n        }\n        if (this._months) {\n            dateParts += bi.make(Math.abs(this._months)) + \"M\";\n        }\n        if (this._weeks) {\n            dateParts += bi.make(Math.abs(this._weeks)) + \"W\";\n        }\n        if (this._days) {\n            dateParts += bi.make(Math.abs(this._days)) + \"D\";\n        }\n        let timeParts = \"\";\n        if (this._hours) {\n            timeParts += bi.make(Math.abs(this._hours)) + \"H\";\n        }\n        if (this._minutes) {\n            timeParts += bi.make(Math.abs(this._minutes)) + \"M\";\n        }\n        if ((!dateParts && !timeParts) ||\n            this._seconds ||\n            this._milliseconds ||\n            this._microseconds ||\n            this._nanoseconds) {\n            const totalNanoseconds = bi\n                .add(bi.add(bi.add(bi.mul(bi.make(Math.abs(this._seconds)), bi.make(1e9)), bi.mul(bi.make(Math.abs(this._milliseconds)), bi.make(1e6))), bi.mul(bi.make(Math.abs(this._microseconds)), bi.make(1e3))), bi.make(Math.abs(this._nanoseconds)))\n                .toString()\n                .padStart(10, \"0\");\n            const seconds = totalNanoseconds.slice(0, -9);\n            const fracSeconds = totalNanoseconds.slice(-9).replace(/0+$/, \"\");\n            timeParts +=\n                seconds + (fracSeconds.length ? \".\" + fracSeconds : \"\") + \"S\";\n        }\n        return ((this._sign === -1 ? \"-\" : \"\") +\n            \"P\" +\n            dateParts +\n            (timeParts ? \"T\" + timeParts : \"\"));\n    }\n    toJSON() {\n        return this.toString();\n    }\n    valueOf() {\n        throw new TypeError(\"Not possible to compare TemporalDuration\");\n    }\n    static from(item) {\n        let result;\n        if (item instanceof Duration) {\n            result = item;\n        }\n        if (typeof item === \"object\") {\n            if (item.years === undefined &&\n                item.months === undefined &&\n                item.weeks === undefined &&\n                item.days === undefined &&\n                item.hours === undefined &&\n                item.minutes === undefined &&\n                item.seconds === undefined &&\n                item.milliseconds === undefined &&\n                item.microseconds === undefined &&\n                item.nanoseconds === undefined) {\n                throw new TypeError(`invalid duration-like`);\n            }\n            result = item;\n        }\n        else {\n            const str = String(item);\n            const matches = str.match(durationRegex);\n            if (!matches) {\n                throw new RangeError(`invalid duration: ${str}`);\n            }\n            const [_duration, _sign, years, months, weeks, days, _time, hours, fHours, minutes, fMinutes, seconds, fSeconds,] = matches;\n            if (_duration.length < 3 || _time.length === 1) {\n                throw new RangeError(`invalid duration: ${str}`);\n            }\n            const sign = _sign === \"-\" ? -1 : 1;\n            result = {};\n            if (years) {\n                result.years = sign * Number(years);\n            }\n            if (months) {\n                result.months = sign * Number(months);\n            }\n            if (weeks) {\n                result.weeks = sign * Number(weeks);\n            }\n            if (days) {\n                result.days = sign * Number(days);\n            }\n            if (hours) {\n                result.hours = sign * Number(hours);\n            }\n            if (fHours) {\n                if (minutes || fMinutes || seconds || fSeconds) {\n                    throw new RangeError(\"only the smallest unit can be fractional\");\n                }\n                result.minutes = Number(fHours) * 60;\n            }\n            else {\n                result.minutes = toNumber(minutes);\n            }\n            if (fMinutes) {\n                if (seconds || fSeconds) {\n                    throw new RangeError(\"only the smallest unit can be fractional\");\n                }\n                result.seconds = Number(fMinutes) * 60;\n            }\n            else if (seconds) {\n                result.seconds = Number(seconds);\n            }\n            else {\n                result.seconds = (result.minutes % 1) * 60;\n            }\n            if (fSeconds) {\n                const ns = fSeconds.slice(1).padEnd(9, \"0\");\n                result.milliseconds = Number(ns.slice(0, 3));\n                result.microseconds = Number(ns.slice(3, 6));\n                result.nanoseconds = sign * Number(ns.slice(6));\n            }\n            else {\n                result.milliseconds = (result.seconds % 1) * 1000;\n                result.microseconds = (result.milliseconds % 1) * 1000;\n                result.nanoseconds =\n                    sign * Math.floor((result.microseconds % 1) * 1000);\n            }\n            result.minutes = sign * Math.floor(result.minutes);\n            result.seconds = sign * Math.floor(result.seconds);\n            result.milliseconds = sign * Math.floor(result.milliseconds);\n            result.microseconds = sign * Math.floor(result.microseconds);\n        }\n        return new Duration(result.years, result.months, result.weeks, result.days, result.hours, result.minutes, result.seconds, result.milliseconds, result.microseconds, result.nanoseconds);\n    }\n}\nexports.Duration = Duration;\nclass RelativeDuration {\n    constructor(years = 0, months = 0, weeks = 0, days = 0, hours = 0, minutes = 0, seconds = 0, milliseconds = 0, microseconds = 0) {\n        Object.defineProperty(this, \"_years\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_months\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_weeks\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_days\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_hours\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_minutes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_seconds\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_milliseconds\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_microseconds\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this._years = Math.trunc(years) || 0;\n        this._months = Math.trunc(months) || 0;\n        this._weeks = Math.trunc(weeks) || 0;\n        this._days = Math.trunc(days) || 0;\n        this._hours = Math.trunc(hours) || 0;\n        this._minutes = Math.trunc(minutes) || 0;\n        this._seconds = Math.trunc(seconds) || 0;\n        this._milliseconds = Math.trunc(milliseconds) || 0;\n        this._microseconds = Math.trunc(microseconds) || 0;\n    }\n    get years() {\n        return this._years;\n    }\n    get months() {\n        return this._months;\n    }\n    get weeks() {\n        return this._weeks;\n    }\n    get days() {\n        return this._days;\n    }\n    get hours() {\n        return this._hours;\n    }\n    get minutes() {\n        return this._minutes;\n    }\n    get seconds() {\n        return this._seconds;\n    }\n    get milliseconds() {\n        return this._milliseconds;\n    }\n    get microseconds() {\n        return this._microseconds;\n    }\n    toString() {\n        let str = \"P\";\n        if (this._years) {\n            str += `${this._years}Y`;\n        }\n        if (this._months) {\n            str += `${this._months}M`;\n        }\n        const days = this._days + 7 * this._weeks;\n        if (days) {\n            str += `${days}D`;\n        }\n        let timeParts = \"\";\n        if (this._hours) {\n            timeParts += `${this._hours}H`;\n        }\n        if (this._minutes) {\n            timeParts += `${this._minutes}M`;\n        }\n        const seconds = this._seconds + this._milliseconds / 1e3 + this._microseconds / 1e6;\n        if (seconds !== 0) {\n            timeParts += `${seconds}S`;\n        }\n        if (timeParts) {\n            str += `T${timeParts}`;\n        }\n        if (str === \"P\") {\n            return \"PT0S\";\n        }\n        return str;\n    }\n    toJSON() {\n        return this.toString();\n    }\n    valueOf() {\n        throw new TypeError(\"Not possible to compare RelativeDuration\");\n    }\n}\nexports.RelativeDuration = RelativeDuration;\nclass DateDuration {\n    constructor(years = 0, months = 0, weeks = 0, days = 0) {\n        Object.defineProperty(this, \"_years\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_months\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_weeks\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_days\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this._years = Math.trunc(years) || 0;\n        this._months = Math.trunc(months) || 0;\n        this._weeks = Math.trunc(weeks) || 0;\n        this._days = Math.trunc(days) || 0;\n    }\n    get years() {\n        return this._years;\n    }\n    get months() {\n        return this._months;\n    }\n    get weeks() {\n        return this._weeks;\n    }\n    get days() {\n        return this._days;\n    }\n    toString() {\n        let str = \"P\";\n        if (this._years) {\n            str += `${this._years}Y`;\n        }\n        if (this._months) {\n            str += `${this._months}M`;\n        }\n        const days = this._days + 7 * this._weeks;\n        if (days) {\n            str += `${days}D`;\n        }\n        if (str === \"P\") {\n            return \"PT0S\";\n        }\n        return str;\n    }\n    toJSON() {\n        return this.toString();\n    }\n    valueOf() {\n        throw new TypeError(\"Not possible to compare DateDuration\");\n    }\n}\nexports.DateDuration = DateDuration;\nconst humanDurationPrefixes = {\n    h: 3600000,\n    hou: 3600000,\n    m: 60000,\n    min: 60000,\n    s: 1000,\n    sec: 1000,\n    ms: 1,\n    mil: 1,\n};\nfunction parseHumanDurationString(durationStr) {\n    const regex = /(\\d+|\\d+\\.\\d+|\\.\\d+)\\s*(hours?|minutes?|seconds?|milliseconds?|ms|h|m|s)\\s*/g;\n    let duration = 0;\n    const seen = new Set();\n    let match = regex.exec(durationStr);\n    let lastIndex = 0;\n    while (match) {\n        if (match.index !== lastIndex) {\n            throw new Error(`invalid duration \"${durationStr}\"`);\n        }\n        const mult = humanDurationPrefixes[match[2].slice(0, 3)];\n        if (seen.has(mult)) {\n            throw new Error(`invalid duration \"${durationStr}\"`);\n        }\n        duration += Number(match[1]) * mult;\n        seen.add(mult);\n        lastIndex = regex.lastIndex;\n        match = regex.exec(durationStr);\n    }\n    if (lastIndex !== durationStr.length) {\n        throw new Error(`invalid duration \"${durationStr}\"`);\n    }\n    return duration;\n}\nexports.parseHumanDurationString = parseHumanDurationString;\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2019-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DateDurationCodec = exports.RelativeDurationCodec = exports.DurationCodec = exports.checkValidEdgeDBDuration = exports.LocalTimeCodec = exports.LocalDateCodec = exports.LocalDateTimeCodec = exports.DateTimeCodec = void 0;\nconst ifaces_1 = require(\"./ifaces\");\nconst bi = __importStar(require(\"../primitives/bigint\"));\nconst datetime_1 = require(\"../datatypes/datetime\");\nconst dateutil_1 = require(\"../datatypes/dateutil\");\nconst errors_1 = require(\"../errors\");\nconst TIMESHIFT = 946684800000;\nconst DATESHIFT_ORD = (0, dateutil_1.ymd2ord)(2000, 1, 1);\nclass DateTimeCodec extends ifaces_1.ScalarCodec {\n    constructor() {\n        super(...arguments);\n        Object.defineProperty(this, \"tsType\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"Date\"\n        });\n    }\n    encode(buf, object) {\n        if (!(object instanceof Date)) {\n            throw new errors_1.InvalidArgumentError(`a Date instance was expected, got \"${object}\"`);\n        }\n        const ms = object.getTime() - TIMESHIFT;\n        const us = ms * 1000.0;\n        buf.writeInt32(8);\n        buf.writeInt64(us);\n    }\n    decode(buf) {\n        const us = Number(buf.readBigInt64());\n        let ms = Math.round(us / 1000);\n        if (Math.abs(us % 1000) === 500 && Math.abs(ms) % 2 === 1) {\n            ms -= 1;\n        }\n        return new Date(ms + TIMESHIFT);\n    }\n}\nexports.DateTimeCodec = DateTimeCodec;\nclass LocalDateTimeCodec extends ifaces_1.ScalarCodec {\n    constructor() {\n        super(...arguments);\n        Object.defineProperty(this, \"tsType\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"LocalDateTime\"\n        });\n        Object.defineProperty(this, \"importedType\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n    }\n    encode(buf, object) {\n        if (!(object instanceof datetime_1.LocalDateTime)) {\n            throw new errors_1.InvalidArgumentError(`a LocalDateTime instance was expected, got \"${object}\"`);\n        }\n        const ms = bi.make(object[\"_date\"].getTime() - TIMESHIFT);\n        let us = bi.add(bi.mul(ms, bi.make(1000)), bi.make(object.hour * 3600000000 +\n            object.minute * 60000000 +\n            object.second * 1000000 +\n            object.millisecond * 1000 +\n            object.microsecond));\n        if ((object.nanosecond === 500 && Math.abs(object.microsecond) % 2 === 1) ||\n            object.nanosecond > 500) {\n            us = bi.add(us, bi.make(1));\n        }\n        buf.writeInt32(8);\n        buf.writeBigInt64(us);\n    }\n    decode(buf) {\n        const bi1000 = bi.make(1000);\n        const bi_us = buf.readBigInt64();\n        const bi_ms = bi.div(bi_us, bi1000);\n        let us = Number(bi.sub(bi_us, bi.mul(bi_ms, bi1000)));\n        let ms = Number(bi_ms);\n        if (us < 0) {\n            us += 1000;\n            ms -= 1;\n        }\n        const date = new Date(Number(ms) + TIMESHIFT);\n        return new datetime_1.LocalDateTime(date.getUTCFullYear(), date.getUTCMonth() + 1, date.getUTCDate(), date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds(), date.getUTCMilliseconds(), us);\n    }\n}\nexports.LocalDateTimeCodec = LocalDateTimeCodec;\nclass LocalDateCodec extends ifaces_1.ScalarCodec {\n    constructor() {\n        super(...arguments);\n        Object.defineProperty(this, \"tsType\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"LocalDate\"\n        });\n        Object.defineProperty(this, \"importedType\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n    }\n    encode(buf, object) {\n        if (!(object instanceof datetime_1.LocalDate)) {\n            throw new errors_1.InvalidArgumentError(`a LocalDate instance was expected, got \"${object}\"`);\n        }\n        buf.writeInt32(4);\n        buf.writeInt32((0, datetime_1.LocalDateToOrdinal)(object) - DATESHIFT_ORD);\n    }\n    decode(buf) {\n        const ord = buf.readInt32();\n        return (0, datetime_1.LocalDateFromOrdinal)(ord + DATESHIFT_ORD);\n    }\n}\nexports.LocalDateCodec = LocalDateCodec;\nclass LocalTimeCodec extends ifaces_1.ScalarCodec {\n    constructor() {\n        super(...arguments);\n        Object.defineProperty(this, \"tsType\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"LocalTime\"\n        });\n        Object.defineProperty(this, \"importedType\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n    }\n    encode(buf, object) {\n        if (!(object instanceof datetime_1.LocalTime)) {\n            throw new errors_1.InvalidArgumentError(`a LocalTime instance was expected, got \"${object}\"`);\n        }\n        let us = object.hour * 3600000000 +\n            object.minute * 60000000 +\n            object.second * 1000000 +\n            object.millisecond * 1000 +\n            object.microsecond;\n        if ((object.nanosecond === 500 && us % 2 === 1) ||\n            object.nanosecond > 500) {\n            us += 1;\n        }\n        buf.writeInt32(8);\n        buf.writeInt64(us);\n    }\n    decode(buf) {\n        let us = Number(buf.readBigInt64());\n        let seconds = Math.floor(us / 1000000);\n        const ms = Math.floor((us % 1000000) / 1000);\n        us = (us % 1000000) - ms * 1000;\n        let minutes = Math.floor(seconds / 60);\n        seconds = Math.floor(seconds % 60);\n        const hours = Math.floor(minutes / 60);\n        minutes = Math.floor(minutes % 60);\n        return new datetime_1.LocalTime(hours, minutes, seconds, ms, us);\n    }\n}\nexports.LocalTimeCodec = LocalTimeCodec;\nconst unencodableDurationFields = [\n    \"years\",\n    \"months\",\n    \"weeks\",\n    \"days\",\n];\nfunction checkValidEdgeDBDuration(duration) {\n    for (const field of unencodableDurationFields) {\n        if (duration[field] !== 0) {\n            return field;\n        }\n    }\n    return null;\n}\nexports.checkValidEdgeDBDuration = checkValidEdgeDBDuration;\nclass DurationCodec extends ifaces_1.ScalarCodec {\n    constructor() {\n        super(...arguments);\n        Object.defineProperty(this, \"tsType\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"Duration\"\n        });\n        Object.defineProperty(this, \"importedType\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n    }\n    encode(buf, object) {\n        if (!(object instanceof datetime_1.Duration)) {\n            throw new errors_1.InvalidArgumentError(`a Duration instance was expected, got \"${object}\"`);\n        }\n        const invalidField = checkValidEdgeDBDuration(object);\n        if (invalidField) {\n            throw new errors_1.InvalidArgumentError(`Cannot encode a 'Duration' with a non-zero number of ${invalidField}`);\n        }\n        let us = bi.make(Math.abs(object.microseconds));\n        us = bi.add(us, bi.mul(bi.make(Math.abs(object.milliseconds)), bi.make(1000)));\n        us = bi.add(us, bi.mul(bi.make(Math.abs(object.seconds)), bi.make(1000000)));\n        us = bi.add(us, bi.mul(bi.make(Math.abs(object.minutes)), bi.make(60000000)));\n        us = bi.add(us, bi.mul(bi.make(Math.abs(object.hours)), bi.make(3600000000)));\n        if ((Math.abs(object.nanoseconds) === 500 &&\n            Math.abs(object.microseconds) % 2 === 1) ||\n            Math.abs(object.nanoseconds) > 500) {\n            us = bi.add(us, bi.make(1));\n        }\n        if (object.sign < 0) {\n            us = bi.mul(us, bi.make(-1));\n        }\n        buf.writeInt32(16);\n        buf.writeBigInt64(us);\n        buf.writeInt32(0);\n        buf.writeInt32(0);\n    }\n    decode(buf) {\n        let bius = buf.readBigInt64();\n        const days = buf.readInt32();\n        const months = buf.readInt32();\n        if (days !== 0) {\n            throw new errors_1.ProtocolError(\"non-zero reserved bytes in duration\");\n        }\n        if (months !== 0) {\n            throw new errors_1.ProtocolError(\"non-zero reserved bytes in duration\");\n        }\n        let sign = 1;\n        if (Number(bius) < 0) {\n            sign = -1;\n            bius = bi.mul(bi.make(-1), bius);\n        }\n        const biMillion = bi.make(1000000);\n        const biSeconds = bi.div(bius, biMillion);\n        let us = Number(bi.sub(bius, bi.mul(biSeconds, biMillion)));\n        const ms = Math.floor(us / 1000);\n        us = us % 1000;\n        let seconds = Number(biSeconds);\n        let minutes = Math.floor(seconds / 60);\n        seconds = Math.floor(seconds % 60);\n        const hours = Math.floor(minutes / 60);\n        minutes = Math.floor(minutes % 60);\n        return new datetime_1.Duration(0, 0, 0, 0, hours * sign, minutes * sign, seconds * sign, ms * sign, us * sign);\n    }\n}\nexports.DurationCodec = DurationCodec;\nclass RelativeDurationCodec extends ifaces_1.ScalarCodec {\n    constructor() {\n        super(...arguments);\n        Object.defineProperty(this, \"tsType\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"RelativeDuration\"\n        });\n        Object.defineProperty(this, \"importedType\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n    }\n    encode(buf, object) {\n        if (!(object instanceof datetime_1.RelativeDuration)) {\n            throw new errors_1.InvalidArgumentError(`\n        a RelativeDuration instance was expected, got \"${object}\"\n      `);\n        }\n        let us = bi.make(object.microseconds);\n        us = bi.add(us, bi.mul(bi.make(object.milliseconds), bi.make(1000)));\n        us = bi.add(us, bi.mul(bi.make(object.seconds), bi.make(1000000)));\n        us = bi.add(us, bi.mul(bi.make(object.minutes), bi.make(60000000)));\n        us = bi.add(us, bi.mul(bi.make(object.hours), bi.make(3600000000)));\n        buf.writeInt32(16);\n        buf.writeBigInt64(us);\n        buf.writeInt32(object.days + 7 * object.weeks);\n        buf.writeInt32(object.months + 12 * object.years);\n    }\n    decode(buf) {\n        let bius = buf.readBigInt64();\n        let days = buf.readInt32();\n        let months = buf.readInt32();\n        let sign = 1;\n        if (Number(bius) < 0) {\n            sign = -1;\n            bius = bi.mul(bi.make(-1), bius);\n        }\n        const biMillion = bi.make(1000000);\n        const biSeconds = bi.div(bius, biMillion);\n        let us = Number(bi.sub(bius, bi.mul(biSeconds, biMillion)));\n        const ms = Math.trunc(us / 1000);\n        us = us % 1000;\n        let seconds = Number(biSeconds);\n        let minutes = Math.trunc(seconds / 60);\n        seconds = Math.trunc(seconds % 60);\n        const hours = Math.trunc(minutes / 60);\n        minutes = Math.trunc(minutes % 60);\n        const weeks = Math.trunc(days / 7);\n        days = Math.trunc(days % 7);\n        const years = Math.trunc(months / 12);\n        months = Math.trunc(months % 12);\n        return new datetime_1.RelativeDuration(years, months, weeks, days, hours * sign, minutes * sign, seconds * sign, ms * sign, us * sign);\n    }\n}\nexports.RelativeDurationCodec = RelativeDurationCodec;\nclass DateDurationCodec extends ifaces_1.ScalarCodec {\n    constructor() {\n        super(...arguments);\n        Object.defineProperty(this, \"tsType\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"DateDuration\"\n        });\n        Object.defineProperty(this, \"importedType\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n    }\n    encode(buf, object) {\n        if (!(object instanceof datetime_1.DateDuration)) {\n            throw new errors_1.InvalidArgumentError(`\n        a DateDuration instance was expected, got \"${object}\"\n      `);\n        }\n        buf.writeInt32(16);\n        buf.writeInt64(0);\n        buf.writeInt32(object.days + 7 * object.weeks);\n        buf.writeInt32(object.months + 12 * object.years);\n    }\n    decode(buf) {\n        buf.discard(8);\n        let days = buf.readInt32();\n        let months = buf.readInt32();\n        const weeks = Math.trunc(days / 7);\n        days = Math.trunc(days % 7);\n        const years = Math.trunc(months / 12);\n        months = Math.trunc(months % 12);\n        return new datetime_1.DateDuration(years, months, weeks, days);\n    }\n}\nexports.DateDurationCodec = DateDurationCodec;\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2019-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ConfigMemory = void 0;\nconst bi = __importStar(require(\"../primitives/bigint\"));\nconst KiB = 1024;\nconst MiB = 1024 * KiB;\nconst GiB = 1024 * MiB;\nconst TiB = 1024 * GiB;\nconst PiB = 1024 * TiB;\nclass ConfigMemory {\n    constructor(bytes) {\n        Object.defineProperty(this, \"_bytes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this._bytes = bytes;\n    }\n    get bytes() {\n        return Number(this._bytes);\n    }\n    get bytesBigInt() {\n        return this._bytes;\n    }\n    get kibibytes() {\n        return Number(this._bytes) / KiB;\n    }\n    get mebibytes() {\n        return Number(this._bytes) / MiB;\n    }\n    get gibibytes() {\n        return Number(this._bytes) / GiB;\n    }\n    get tebibytes() {\n        return Number(this._bytes) / TiB;\n    }\n    get pebibytes() {\n        return Number(this._bytes) / PiB;\n    }\n    toString() {\n        const bytes = this._bytes;\n        const bigPiB = bi.make(PiB);\n        if (bi.gte(bytes, bigPiB) && Number(bi.remainder(bytes, bigPiB)) === 0) {\n            return `${bi.div(bytes, bigPiB)}PiB`;\n        }\n        const bigTiB = bi.make(TiB);\n        if (bi.gte(bytes, bigTiB) && Number(bi.remainder(bytes, bigTiB)) === 0) {\n            return `${bi.div(bytes, bigTiB)}TiB`;\n        }\n        const bigGiB = bi.make(GiB);\n        if (bi.gte(bytes, bigGiB) && Number(bi.remainder(bytes, bigGiB)) === 0) {\n            return `${bi.div(bytes, bigGiB)}GiB`;\n        }\n        const bigMiB = bi.make(MiB);\n        if (bi.gte(bytes, bigMiB) && Number(bi.remainder(bytes, bigMiB)) === 0) {\n            return `${bi.div(bytes, bigMiB)}MiB`;\n        }\n        const bigKiB = bi.make(KiB);\n        if (bi.gte(bytes, bigKiB) && Number(bi.remainder(bytes, bigKiB)) === 0) {\n            return `${bi.div(bytes, bigKiB)}KiB`;\n        }\n        return `${bytes}B`;\n    }\n}\nexports.ConfigMemory = ConfigMemory;\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2019-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ConfigMemoryCodec = void 0;\nconst ifaces_1 = require(\"./ifaces\");\nconst memory_1 = require(\"../datatypes/memory\");\nconst errors_1 = require(\"../errors\");\nclass ConfigMemoryCodec extends ifaces_1.ScalarCodec {\n    constructor() {\n        super(...arguments);\n        Object.defineProperty(this, \"tsType\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"ConfigMemory\"\n        });\n        Object.defineProperty(this, \"importedType\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n    }\n    encode(buf, object) {\n        if (!(object instanceof memory_1.ConfigMemory)) {\n            throw new errors_1.InvalidArgumentError(`a ConfigMemory instance was expected, got \"${object}\"`);\n        }\n        buf.writeInt32(8);\n        buf.writeBigInt64(object._bytes);\n    }\n    decode(buf) {\n        return new memory_1.ConfigMemory(buf.readBigInt64());\n    }\n}\nexports.ConfigMemoryCodec = ConfigMemoryCodec;\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2019-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PgVectorCodec = exports.PG_VECTOR_MAX_DIM = void 0;\nconst ifaces_1 = require(\"./ifaces\");\nconst errors_1 = require(\"../errors\");\nexports.PG_VECTOR_MAX_DIM = (1 << 16) - 1;\nclass PgVectorCodec extends ifaces_1.ScalarCodec {\n    constructor() {\n        super(...arguments);\n        Object.defineProperty(this, \"tsType\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"Float32Array\"\n        });\n    }\n    encode(buf, object) {\n        if (!(object instanceof Float32Array || Array.isArray(object))) {\n            throw new errors_1.InvalidArgumentError(`a Float32Array or array of numbers was expected, got \"${object}\"`);\n        }\n        if (object.length > exports.PG_VECTOR_MAX_DIM) {\n            throw new errors_1.InvalidArgumentError(\"too many elements in array to encode into pgvector\");\n        }\n        buf\n            .writeInt32(4 + object.length * 4)\n            .writeUInt16(object.length)\n            .writeUInt16(0);\n        if (object instanceof Float32Array) {\n            for (const el of object) {\n                buf.writeFloat32(el);\n            }\n        }\n        else {\n            for (const el of object) {\n                if (typeof el !== \"number\") {\n                    throw new errors_1.InvalidArgumentError(`elements of vector array expected to be a numbers, got \"${el}\"`);\n                }\n                buf.writeFloat32(el);\n            }\n        }\n    }\n    decode(buf) {\n        const dim = buf.readUInt16();\n        buf.discard(2);\n        const vecBuf = buf.readBuffer(dim * 4);\n        const data = new DataView(vecBuf.buffer, vecBuf.byteOffset, vecBuf.byteLength);\n        const vec = new Float32Array(dim);\n        for (let i = 0; i < dim; i++) {\n            vec[i] = data.getFloat32(i * 4);\n        }\n        return vec;\n    }\n}\nexports.PgVectorCodec = PgVectorCodec;\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2019-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.INVALID_CODEC = exports.NULL_CODEC = exports.SCALAR_CODECS = exports.NullCodec = void 0;\nconst buffer_1 = require(\"../primitives/buffer\");\nconst boolean_1 = require(\"./boolean\");\nconst ifaces_1 = require(\"./ifaces\");\nconst numbers_1 = require(\"./numbers\");\nconst numerics_1 = require(\"./numerics\");\nconst text_1 = require(\"./text\");\nconst uuid_1 = require(\"./uuid\");\nconst bytes_1 = require(\"./bytes\");\nconst json_1 = require(\"./json\");\nconst datetime_1 = require(\"./datetime\");\nconst memory_1 = require(\"./memory\");\nconst pgvector_1 = require(\"./pgvector\");\nconst errors_1 = require(\"../errors\");\nconst consts_1 = require(\"./consts\");\nclass NullCodec extends ifaces_1.Codec {\n    encode(_buf, _object) {\n        throw new errors_1.InternalClientError(\"null codec cannot used to encode data\");\n    }\n    decode(_buf) {\n        throw new errors_1.InternalClientError(\"null codec cannot used to decode data\");\n    }\n    getSubcodecs() {\n        return [];\n    }\n    getKind() {\n        return \"scalar\";\n    }\n}\nObject.defineProperty(NullCodec, \"BUFFER\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: new buffer_1.WriteBuffer().writeInt32(0).unwrap()\n});\nexports.NullCodec = NullCodec;\nexports.SCALAR_CODECS = new Map();\nexports.NULL_CODEC = new NullCodec(consts_1.NULL_CODEC_ID);\nexports.INVALID_CODEC = new NullCodec(consts_1.INVALID_CODEC_ID);\nfunction registerScalarCodec(typename, type) {\n    const id = consts_1.KNOWN_TYPENAMES.get(typename);\n    if (id == null) {\n        throw new errors_1.InternalClientError(\"unknown type name\");\n    }\n    exports.SCALAR_CODECS.set(id, new type(id));\n}\nregisterScalarCodec(\"std::int16\", numbers_1.Int16Codec);\nregisterScalarCodec(\"std::int32\", numbers_1.Int32Codec);\nregisterScalarCodec(\"std::int64\", numbers_1.Int64Codec);\nregisterScalarCodec(\"std::float32\", numbers_1.Float32Codec);\nregisterScalarCodec(\"std::float64\", numbers_1.Float64Codec);\nregisterScalarCodec(\"std::bigint\", numerics_1.BigIntCodec);\nregisterScalarCodec(\"std::decimal\", numerics_1.DecimalStringCodec);\nregisterScalarCodec(\"std::bool\", boolean_1.BoolCodec);\nregisterScalarCodec(\"std::json\", json_1.JSONCodec);\nregisterScalarCodec(\"std::str\", text_1.StrCodec);\nregisterScalarCodec(\"std::bytes\", bytes_1.BytesCodec);\nregisterScalarCodec(\"std::uuid\", uuid_1.UUIDCodec);\nregisterScalarCodec(\"cal::local_date\", datetime_1.LocalDateCodec);\nregisterScalarCodec(\"cal::local_time\", datetime_1.LocalTimeCodec);\nregisterScalarCodec(\"cal::local_datetime\", datetime_1.LocalDateTimeCodec);\nregisterScalarCodec(\"std::datetime\", datetime_1.DateTimeCodec);\nregisterScalarCodec(\"std::duration\", datetime_1.DurationCodec);\nregisterScalarCodec(\"cal::relative_duration\", datetime_1.RelativeDurationCodec);\nregisterScalarCodec(\"cal::date_duration\", datetime_1.DateDurationCodec);\nregisterScalarCodec(\"cfg::memory\", memory_1.ConfigMemoryCodec);\nregisterScalarCodec(\"ext::pgvector::vector\", pgvector_1.PgVectorCodec);\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2019-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EMPTY_TUPLE_CODEC = exports.EMPTY_TUPLE_CODEC_ID = exports.EmptyTupleCodec = exports.TupleCodec = void 0;\nconst consts_1 = require(\"./consts\");\nconst ifaces_1 = require(\"./ifaces\");\nconst buffer_1 = require(\"../primitives/buffer\");\nconst errors_1 = require(\"../errors\");\nclass TupleCodec extends ifaces_1.Codec {\n    constructor(tid, codecs) {\n        super(tid);\n        Object.defineProperty(this, \"subCodecs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.subCodecs = codecs;\n    }\n    encode(buf, object, allowNull = false) {\n        if (!Array.isArray(object)) {\n            throw new errors_1.InvalidArgumentError(`an array was expected, got \"${object}\"`);\n        }\n        const codecs = this.subCodecs;\n        const codecsLen = codecs.length;\n        if (object.length !== codecsLen) {\n            throw new errors_1.InvalidArgumentError(`expected ${codecsLen} tuple item${codecsLen === 1 ? \"\" : \"s\"}, got ${object.length}`);\n        }\n        if (!codecsLen) {\n            buf.writeBuffer(EmptyTupleCodec.BUFFER);\n        }\n        const elemData = new buffer_1.WriteBuffer();\n        for (let i = 0; i < codecsLen; i++) {\n            const elem = object[i];\n            elemData.writeInt32(0);\n            if (elem == null) {\n                if (allowNull) {\n                    elemData.writeInt32(-1);\n                }\n                else {\n                    throw new errors_1.MissingArgumentError(`element at index ${i} in tuple cannot be 'null'`);\n                }\n            }\n            else {\n                try {\n                    codecs[i].encode(elemData, elem);\n                }\n                catch (e) {\n                    if (e instanceof errors_1.QueryArgumentError) {\n                        throw new errors_1.InvalidArgumentError(`invalid element at index ${i} in tuple: ${e.message}`);\n                    }\n                    else {\n                        throw e;\n                    }\n                }\n            }\n        }\n        const elemBuf = elemData.unwrap();\n        buf.writeInt32(4 + elemBuf.length);\n        buf.writeInt32(codecsLen);\n        buf.writeBuffer(elemBuf);\n    }\n    encodeArgs(args) {\n        if (!Array.isArray(args)) {\n            throw new errors_1.InvalidArgumentError(\"an array of arguments was expected\");\n        }\n        const codecsLen = this.subCodecs.length;\n        if (args.length !== codecsLen) {\n            throw new errors_1.InvalidArgumentError(`expected ${codecsLen} argument${codecsLen === 1 ? \"\" : \"s\"}, got ${args.length}`);\n        }\n        const buf = new buffer_1.WriteBuffer();\n        this.encode(buf, args, true);\n        return buf.unwrap();\n    }\n    decode(buf) {\n        const els = buf.readUInt32();\n        const subCodecs = this.subCodecs;\n        if (els !== subCodecs.length) {\n            throw new errors_1.ProtocolError(`cannot decode Tuple: expected ` +\n                `${subCodecs.length} elements, got ${els}`);\n        }\n        const elemBuf = buffer_1.ReadBuffer.alloc();\n        const result = new Array(els);\n        for (let i = 0; i < els; i++) {\n            buf.discard(4);\n            const elemLen = buf.readInt32();\n            if (elemLen === -1) {\n                result[i] = null;\n            }\n            else {\n                buf.sliceInto(elemBuf, elemLen);\n                result[i] = subCodecs[i].decode(elemBuf);\n                elemBuf.finish();\n            }\n        }\n        return result;\n    }\n    getSubcodecs() {\n        return Array.from(this.subCodecs);\n    }\n    getKind() {\n        return \"tuple\";\n    }\n}\nexports.TupleCodec = TupleCodec;\nclass EmptyTupleCodec extends ifaces_1.Codec {\n    encode(buf, object) {\n        if (!Array.isArray(object)) {\n            throw new errors_1.InvalidArgumentError(\"cannot encode empty Tuple: expected an array\");\n        }\n        if (object.length) {\n            throw new errors_1.InvalidArgumentError(`cannot encode empty Tuple: expected 0 elements got ${object.length}`);\n        }\n        buf.writeInt32(4);\n        buf.writeInt32(0);\n    }\n    decode(buf) {\n        const els = buf.readInt32();\n        if (els !== 0) {\n            throw new errors_1.ProtocolError(`cannot decode empty Tuple: expected 0 elements, received ${els}`);\n        }\n        return [];\n    }\n    getSubcodecs() {\n        return [];\n    }\n    getKind() {\n        return \"tuple\";\n    }\n}\nObject.defineProperty(EmptyTupleCodec, \"BUFFER\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: new buffer_1.WriteBuffer()\n        .writeInt32(4)\n        .writeInt32(0)\n        .unwrap()\n});\nexports.EmptyTupleCodec = EmptyTupleCodec;\nexports.EMPTY_TUPLE_CODEC_ID = consts_1.KNOWN_TYPENAMES.get(\"empty-tuple\");\nexports.EMPTY_TUPLE_CODEC = new EmptyTupleCodec(exports.EMPTY_TUPLE_CODEC_ID);\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2019-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Range = void 0;\nclass Range {\n    constructor(_lower, _upper, _incLower = true, _incUpper = false) {\n        Object.defineProperty(this, \"_lower\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: _lower\n        });\n        Object.defineProperty(this, \"_upper\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: _upper\n        });\n        Object.defineProperty(this, \"_incLower\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: _incLower\n        });\n        Object.defineProperty(this, \"_incUpper\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: _incUpper\n        });\n        Object.defineProperty(this, \"_isEmpty\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n    }\n    get lower() {\n        return this._lower;\n    }\n    get upper() {\n        return this._upper;\n    }\n    get incLower() {\n        return this._incLower;\n    }\n    get incUpper() {\n        return this._incUpper;\n    }\n    get isEmpty() {\n        return this._isEmpty;\n    }\n    static empty() {\n        const range = new Range(null, null);\n        range._isEmpty = true;\n        return range;\n    }\n    toJSON() {\n        return this.isEmpty\n            ? { empty: true }\n            : {\n                lower: this._lower,\n                upper: this._upper,\n                inc_lower: this._incLower,\n                inc_upper: this._incUpper,\n            };\n    }\n}\nexports.Range = Range;\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2019-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RangeCodec = void 0;\nconst ifaces_1 = require(\"./ifaces\");\nconst buffer_1 = require(\"../primitives/buffer\");\nconst range_1 = require(\"../datatypes/range\");\nconst errors_1 = require(\"../errors\");\nvar RangeFlags;\n(function (RangeFlags) {\n    RangeFlags[RangeFlags[\"EMPTY\"] = 1] = \"EMPTY\";\n    RangeFlags[RangeFlags[\"INC_LOWER\"] = 2] = \"INC_LOWER\";\n    RangeFlags[RangeFlags[\"INC_UPPER\"] = 4] = \"INC_UPPER\";\n    RangeFlags[RangeFlags[\"EMPTY_LOWER\"] = 8] = \"EMPTY_LOWER\";\n    RangeFlags[RangeFlags[\"EMPTY_UPPER\"] = 16] = \"EMPTY_UPPER\";\n})(RangeFlags || (RangeFlags = {}));\nclass RangeCodec extends ifaces_1.Codec {\n    constructor(tid, subCodec) {\n        super(tid);\n        Object.defineProperty(this, \"subCodec\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.subCodec = subCodec;\n    }\n    encode(buf, obj) {\n        if (!(obj instanceof range_1.Range)) {\n            throw new errors_1.InvalidArgumentError(\"a Range was expected\");\n        }\n        const subCodec = this.subCodec;\n        const elemData = new buffer_1.WriteBuffer();\n        if (obj.lower !== null) {\n            subCodec.encode(elemData, obj.lower);\n        }\n        if (obj.upper !== null) {\n            subCodec.encode(elemData, obj.upper);\n        }\n        const elemBuf = elemData.unwrap();\n        buf.writeInt32(1 + elemBuf.length);\n        buf.writeUInt8(obj.isEmpty\n            ? RangeFlags.EMPTY\n            : (obj.incLower ? RangeFlags.INC_LOWER : 0) |\n                (obj.incUpper ? RangeFlags.INC_UPPER : 0) |\n                (obj.lower === null ? RangeFlags.EMPTY_LOWER : 0) |\n                (obj.upper === null ? RangeFlags.EMPTY_UPPER : 0));\n        buf.writeBuffer(elemBuf);\n    }\n    decode(buf) {\n        const flags = buf.readUInt8();\n        if (flags & RangeFlags.EMPTY) {\n            return range_1.Range.empty();\n        }\n        const elemBuf = buffer_1.ReadBuffer.alloc();\n        const subCodec = this.subCodec;\n        let lower = null;\n        let upper = null;\n        if (!(flags & RangeFlags.EMPTY_LOWER)) {\n            buf.sliceInto(elemBuf, buf.readInt32());\n            lower = subCodec.decode(elemBuf);\n            elemBuf.finish();\n        }\n        if (!(flags & RangeFlags.EMPTY_UPPER)) {\n            buf.sliceInto(elemBuf, buf.readInt32());\n            upper = subCodec.decode(elemBuf);\n            elemBuf.finish();\n        }\n        return new range_1.Range(lower, upper, !!(flags & RangeFlags.INC_LOWER), !!(flags & RangeFlags.INC_UPPER));\n    }\n    getSubcodecs() {\n        return [this.subCodec];\n    }\n    getKind() {\n        return \"range\";\n    }\n}\nexports.RangeCodec = RangeCodec;\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2019-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NamedTupleCodec = void 0;\nconst ifaces_1 = require(\"./ifaces\");\nconst buffer_1 = require(\"../primitives/buffer\");\nconst tuple_1 = require(\"./tuple\");\nconst errors_1 = require(\"../errors\");\nclass NamedTupleCodec extends ifaces_1.Codec {\n    constructor(tid, codecs, names) {\n        super(tid);\n        Object.defineProperty(this, \"subCodecs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"names\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"namesSet\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.subCodecs = codecs;\n        this.names = names;\n        this.namesSet = new Set(names);\n    }\n    encode(buf, object) {\n        if (typeof object !== \"object\" || Array.isArray(object)) {\n            throw new errors_1.InvalidArgumentError(`an object was expected, got \"${object}\"`);\n        }\n        const codecsLen = this.subCodecs.length;\n        if (Object.keys(object).length !== codecsLen) {\n            throw new errors_1.QueryArgumentError(`expected ${codecsLen} element${codecsLen === 1 ? \"\" : \"s\"} in named tuple, got ${Object.keys(object).length}`);\n        }\n        const elemData = new buffer_1.WriteBuffer();\n        for (let i = 0; i < codecsLen; i++) {\n            const key = this.names[i];\n            const val = object[key];\n            if (val == null) {\n                throw new errors_1.MissingArgumentError(`element '${key}' in named tuple cannot be 'null'`);\n            }\n            else {\n                elemData.writeInt32(0);\n                try {\n                    this.subCodecs[i].encode(elemData, val);\n                }\n                catch (e) {\n                    if (e instanceof errors_1.QueryArgumentError) {\n                        throw new errors_1.InvalidArgumentError(`invalid element '${key}' in named tuple: ${e.message}`);\n                    }\n                    else {\n                        throw e;\n                    }\n                }\n            }\n        }\n        const elemBuf = elemData.unwrap();\n        buf.writeInt32(4 + elemBuf.length);\n        buf.writeInt32(codecsLen);\n        buf.writeBuffer(elemBuf);\n    }\n    encodeArgs(args) {\n        if (args == null) {\n            throw new errors_1.MissingArgumentError(\"One or more named arguments expected, received null\");\n        }\n        const keys = Object.keys(args);\n        const names = this.names;\n        const namesSet = this.namesSet;\n        const codecs = this.subCodecs;\n        const codecsLen = codecs.length;\n        if (keys.length > codecsLen) {\n            const extraKeys = keys.filter((key) => !namesSet.has(key));\n            throw new errors_1.UnknownArgumentError(`Unused named argument${extraKeys.length === 1 ? \"\" : \"s\"}: \"${extraKeys.join('\", \"')}\"`);\n        }\n        if (!codecsLen) {\n            return tuple_1.EmptyTupleCodec.BUFFER;\n        }\n        const elemData = new buffer_1.WriteBuffer();\n        for (let i = 0; i < codecsLen; i++) {\n            const key = names[i];\n            const val = args[key];\n            elemData.writeInt32(0);\n            if (val == null) {\n                elemData.writeInt32(-1);\n            }\n            else {\n                const codec = codecs[i];\n                codec.encode(elemData, val);\n            }\n        }\n        const elemBuf = elemData.unwrap();\n        const buf = new buffer_1.WriteBuffer();\n        buf.writeInt32(4 + elemBuf.length);\n        buf.writeInt32(codecsLen);\n        buf.writeBuffer(elemBuf);\n        return buf.unwrap();\n    }\n    decode(buf) {\n        const els = buf.readUInt32();\n        const subCodecs = this.subCodecs;\n        if (els !== subCodecs.length) {\n            throw new errors_1.ProtocolError(`cannot decode NamedTuple: expected ` +\n                `${subCodecs.length} elements, got ${els}`);\n        }\n        const elemBuf = buffer_1.ReadBuffer.alloc();\n        const names = this.names;\n        const result = {};\n        for (let i = 0; i < els; i++) {\n            buf.discard(4);\n            const elemLen = buf.readInt32();\n            let val = null;\n            if (elemLen !== -1) {\n                buf.sliceInto(elemBuf, elemLen);\n                val = subCodecs[i].decode(elemBuf);\n                elemBuf.finish();\n            }\n            result[names[i]] = val;\n        }\n        return result;\n    }\n    getSubcodecs() {\n        return Array.from(this.subCodecs);\n    }\n    getNames() {\n        return Array.from(this.names);\n    }\n    getKind() {\n        return \"namedtuple\";\n    }\n}\nexports.NamedTupleCodec = NamedTupleCodec;\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2019-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ArrayCodec = void 0;\nconst ifaces_1 = require(\"./ifaces\");\nconst buffer_1 = require(\"../primitives/buffer\");\nconst tuple_1 = require(\"./tuple\");\nconst range_1 = require(\"./range\");\nconst errors_1 = require(\"../errors\");\nconst namedtuple_1 = require(\"./namedtuple\");\nclass ArrayCodec extends ifaces_1.Codec {\n    constructor(tid, subCodec, len) {\n        super(tid);\n        Object.defineProperty(this, \"subCodec\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"len\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.subCodec = subCodec;\n        this.len = len;\n    }\n    encode(buf, obj) {\n        if (!(this.subCodec instanceof ifaces_1.ScalarCodec ||\n            this.subCodec instanceof tuple_1.TupleCodec ||\n            this.subCodec instanceof namedtuple_1.NamedTupleCodec ||\n            this.subCodec instanceof range_1.RangeCodec)) {\n            throw new errors_1.InvalidArgumentError(\"only arrays of scalars or tuples are supported\");\n        }\n        if (!Array.isArray(obj) && !isTypedArray(obj)) {\n            throw new errors_1.InvalidArgumentError(\"an array was expected\");\n        }\n        const subCodec = this.subCodec;\n        const elemData = new buffer_1.WriteBuffer();\n        const objLen = obj.length;\n        if (objLen > 0x7fffffff) {\n            throw new errors_1.InvalidArgumentError(\"too many elements in array\");\n        }\n        for (let i = 0; i < objLen; i++) {\n            const item = obj[i];\n            if (item == null) {\n                elemData.writeInt32(-1);\n            }\n            else {\n                subCodec.encode(elemData, item);\n            }\n        }\n        const elemBuf = elemData.unwrap();\n        buf.writeInt32(12 + 8 + elemBuf.length);\n        buf.writeInt32(1);\n        buf.writeInt32(0);\n        buf.writeInt32(0);\n        buf.writeInt32(objLen);\n        buf.writeInt32(1);\n        buf.writeBuffer(elemBuf);\n    }\n    decode(buf) {\n        const ndims = buf.readInt32();\n        buf.discard(4);\n        buf.discard(4);\n        if (ndims === 0) {\n            return [];\n        }\n        if (ndims !== 1) {\n            throw new errors_1.ProtocolError(\"only 1-dimensional arrays are supported\");\n        }\n        const len = buf.readUInt32();\n        if (this.len !== -1 && len !== this.len) {\n            throw new errors_1.ProtocolError(`invalid array size: received ${len}, expected ${this.len}`);\n        }\n        buf.discard(4);\n        const result = new Array(len);\n        const elemBuf = buffer_1.ReadBuffer.alloc();\n        const subCodec = this.subCodec;\n        for (let i = 0; i < len; i++) {\n            const elemLen = buf.readInt32();\n            if (elemLen === -1) {\n                result[i] = null;\n            }\n            else {\n                buf.sliceInto(elemBuf, elemLen);\n                result[i] = subCodec.decode(elemBuf);\n                elemBuf.finish();\n            }\n        }\n        return result;\n    }\n    getSubcodecs() {\n        return [this.subCodec];\n    }\n    getKind() {\n        return \"array\";\n    }\n}\nexports.ArrayCodec = ArrayCodec;\nfunction isTypedArray(obj) {\n    return !!(obj.buffer instanceof ArrayBuffer && obj.BYTES_PER_ELEMENT);\n}\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2019-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EnumCodec = void 0;\nconst text_1 = require(\"./text\");\nclass EnumCodec extends text_1.StrCodec {\n    constructor(tid, derivedFromTid = null, values) {\n        super(tid, derivedFromTid);\n        Object.defineProperty(this, \"values\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.values = values;\n    }\n}\nexports.EnumCodec = EnumCodec;\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2019-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ObjectCodec = void 0;\nconst ifaces_1 = require(\"./ifaces\");\nconst buffer_1 = require(\"../primitives/buffer\");\nconst consts_1 = require(\"./consts\");\nconst errors_1 = require(\"../errors\");\nconst EDGE_POINTER_IS_IMPLICIT = 1 << 0;\nconst EDGE_POINTER_IS_LINKPROP = 1 << 1;\nclass ObjectCodec extends ifaces_1.Codec {\n    constructor(tid, codecs, names, flags, cards) {\n        super(tid);\n        Object.defineProperty(this, \"codecs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"fields\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"namesSet\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"cardinalities\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.codecs = codecs;\n        this.fields = new Array(names.length);\n        this.namesSet = new Set();\n        this.cardinalities = cards;\n        for (let i = 0; i < names.length; i++) {\n            const isLinkprop = !!(flags[i] & EDGE_POINTER_IS_LINKPROP);\n            const name = isLinkprop ? `@${names[i]}` : names[i];\n            this.fields[i] = {\n                name,\n                implicit: !!(flags[i] & EDGE_POINTER_IS_IMPLICIT),\n                linkprop: isLinkprop,\n                cardinality: cards[i],\n            };\n            this.namesSet.add(name);\n        }\n    }\n    encode(_buf, _object) {\n        throw new errors_1.InvalidArgumentError(\"Objects cannot be passed as arguments\");\n    }\n    encodeArgs(args) {\n        if (this.fields[0].name === \"0\") {\n            return this._encodePositionalArgs(args);\n        }\n        return this._encodeNamedArgs(args);\n    }\n    _encodePositionalArgs(args) {\n        if (!Array.isArray(args)) {\n            throw new errors_1.InvalidArgumentError(\"an array of arguments was expected\");\n        }\n        const codecs = this.codecs;\n        const codecsLen = codecs.length;\n        if (args.length !== codecsLen) {\n            throw new errors_1.QueryArgumentError(`expected ${codecsLen} argument${codecsLen === 1 ? \"\" : \"s\"}, got ${args.length}`);\n        }\n        const elemData = new buffer_1.WriteBuffer();\n        for (let i = 0; i < codecsLen; i++) {\n            elemData.writeInt32(0);\n            const arg = args[i];\n            if (arg == null) {\n                const card = this.cardinalities[i];\n                if (card === consts_1.ONE || card === consts_1.AT_LEAST_ONE) {\n                    throw new errors_1.MissingArgumentError(`argument ${this.fields[i].name} is required, but received ${arg}`);\n                }\n                elemData.writeInt32(-1);\n            }\n            else {\n                const codec = codecs[i];\n                codec.encode(elemData, arg);\n            }\n        }\n        const elemBuf = elemData.unwrap();\n        const buf = new buffer_1.WriteBuffer();\n        buf.writeInt32(4 + elemBuf.length);\n        buf.writeInt32(codecsLen);\n        buf.writeBuffer(elemBuf);\n        return buf.unwrap();\n    }\n    _encodeNamedArgs(args) {\n        if (args == null) {\n            throw new errors_1.MissingArgumentError(\"One or more named arguments expected, received null\");\n        }\n        const keys = Object.keys(args);\n        const fields = this.fields;\n        const namesSet = this.namesSet;\n        const codecs = this.codecs;\n        const codecsLen = codecs.length;\n        if (keys.length > codecsLen) {\n            const extraKeys = keys.filter((key) => !namesSet.has(key));\n            throw new errors_1.UnknownArgumentError(`Unused named argument${extraKeys.length === 1 ? \"\" : \"s\"}: \"${extraKeys.join('\", \"')}\"`);\n        }\n        const elemData = new buffer_1.WriteBuffer();\n        for (let i = 0; i < codecsLen; i++) {\n            const key = fields[i].name;\n            const val = args[key];\n            elemData.writeInt32(0);\n            if (val == null) {\n                const card = this.cardinalities[i];\n                if (card === consts_1.ONE || card === consts_1.AT_LEAST_ONE) {\n                    throw new errors_1.MissingArgumentError(`argument ${this.fields[i].name} is required, but received ${val}`);\n                }\n                elemData.writeInt32(-1);\n            }\n            else {\n                const codec = codecs[i];\n                codec.encode(elemData, val);\n            }\n        }\n        const elemBuf = elemData.unwrap();\n        const buf = new buffer_1.WriteBuffer();\n        buf.writeInt32(4 + elemBuf.length);\n        buf.writeInt32(codecsLen);\n        buf.writeBuffer(elemBuf);\n        return buf.unwrap();\n    }\n    decode(buf) {\n        const codecs = this.codecs;\n        const fields = this.fields;\n        const els = buf.readUInt32();\n        if (els !== codecs.length) {\n            throw new errors_1.ProtocolError(`cannot decode Object: expected ${codecs.length} elements, got ${els}`);\n        }\n        const elemBuf = buffer_1.ReadBuffer.alloc();\n        const result = {};\n        for (let i = 0; i < els; i++) {\n            buf.discard(4);\n            const elemLen = buf.readInt32();\n            const name = fields[i].name;\n            let val = null;\n            if (elemLen !== -1) {\n                buf.sliceInto(elemBuf, elemLen);\n                val = codecs[i].decode(elemBuf);\n                elemBuf.finish();\n            }\n            result[name] = val;\n        }\n        return result;\n    }\n    getSubcodecs() {\n        return Array.from(this.codecs);\n    }\n    getFields() {\n        return Array.from(this.fields);\n    }\n    getKind() {\n        return \"object\";\n    }\n}\nexports.ObjectCodec = ObjectCodec;\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2019-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SetCodec = void 0;\nconst ifaces_1 = require(\"./ifaces\");\nconst buffer_1 = require(\"../primitives/buffer\");\nconst array_1 = require(\"./array\");\nconst errors_1 = require(\"../errors\");\nclass SetCodec extends ifaces_1.Codec {\n    constructor(tid, subCodec) {\n        super(tid);\n        Object.defineProperty(this, \"subCodec\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.subCodec = subCodec;\n    }\n    encode(_buf, _obj) {\n        throw new errors_1.InvalidArgumentError(\"Sets cannot be passed in query arguments\");\n    }\n    decode(buf) {\n        if (this.subCodec instanceof array_1.ArrayCodec) {\n            return this.decodeSetOfArrays(buf);\n        }\n        else {\n            return this.decodeSet(buf);\n        }\n    }\n    decodeSetOfArrays(buf) {\n        const ndims = buf.readInt32();\n        buf.discard(4);\n        buf.discard(4);\n        if (ndims === 0) {\n            return [];\n        }\n        if (ndims !== 1) {\n            throw new errors_1.ProtocolError(`expected 1-dimensional array of records of arrays`);\n        }\n        const len = buf.readUInt32();\n        buf.discard(4);\n        const result = new Array(len);\n        const elemBuf = buffer_1.ReadBuffer.alloc();\n        const subCodec = this.subCodec;\n        for (let i = 0; i < len; i++) {\n            buf.discard(4);\n            const recSize = buf.readUInt32();\n            if (recSize !== 1) {\n                throw new errors_1.ProtocolError(\"expected a record with a single element as an array set \" +\n                    \"element envelope\");\n            }\n            buf.discard(4);\n            const elemLen = buf.readInt32();\n            if (elemLen === -1) {\n                throw new errors_1.ProtocolError(\"unexpected NULL value in array set element\");\n            }\n            buf.sliceInto(elemBuf, elemLen);\n            result[i] = subCodec.decode(elemBuf);\n            elemBuf.finish();\n        }\n        return result;\n    }\n    decodeSet(buf) {\n        const ndims = buf.readInt32();\n        buf.discard(4);\n        buf.discard(4);\n        if (ndims === 0) {\n            return [];\n        }\n        if (ndims !== 1) {\n            throw new errors_1.ProtocolError(`invalid set dimensinality: ${ndims}`);\n        }\n        const len = buf.readUInt32();\n        buf.discard(4);\n        const result = new Array(len);\n        const elemBuf = buffer_1.ReadBuffer.alloc();\n        const subCodec = this.subCodec;\n        for (let i = 0; i < len; i++) {\n            const elemLen = buf.readInt32();\n            if (elemLen === -1) {\n                result[i] = null;\n            }\n            else {\n                buf.sliceInto(elemBuf, elemLen);\n                result[i] = subCodec.decode(elemBuf);\n                elemBuf.finish();\n            }\n        }\n        return result;\n    }\n    getSubcodecs() {\n        return [this.subCodec];\n    }\n    getKind() {\n        return \"set\";\n    }\n}\nexports.SetCodec = SetCodec;\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2020-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.versionGreaterThanOrEqual = exports.versionGreaterThan = exports.sleep = exports.getUniqueId = void 0;\nconst idCounter = {};\nfunction getUniqueId(prefix = \"\") {\n    if (!idCounter[prefix]) {\n        idCounter[prefix] = 0;\n    }\n    const id = ++idCounter[prefix];\n    return `_edgedb_${prefix}_${id.toString(16)}_`;\n}\nexports.getUniqueId = getUniqueId;\nfunction sleep(durationMillis) {\n    return new Promise((accept) => {\n        setTimeout(() => accept(), durationMillis);\n    });\n}\nexports.sleep = sleep;\nfunction versionGreaterThan(left, right) {\n    if (left[0] > right[0]) {\n        return true;\n    }\n    if (left[0] < right[0]) {\n        return false;\n    }\n    return left[1] > right[1];\n}\nexports.versionGreaterThan = versionGreaterThan;\nfunction versionGreaterThanOrEqual(left, right) {\n    if (left[0] === right[0] && left[1] === right[1]) {\n        return true;\n    }\n    return versionGreaterThan(left, right);\n}\nexports.versionGreaterThanOrEqual = versionGreaterThanOrEqual;\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2019-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SparseObjectCodec = void 0;\nconst ifaces_1 = require(\"./ifaces\");\nconst buffer_1 = require(\"../primitives/buffer\");\nconst errors_1 = require(\"../errors\");\nclass SparseObjectCodec extends ifaces_1.Codec {\n    constructor(tid, codecs, names) {\n        super(tid);\n        Object.defineProperty(this, \"codecs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"names\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.codecs = codecs;\n        this.names = names;\n    }\n    encode(buf, object) {\n        const elemBuf = new buffer_1.WriteBuffer();\n        let objLen = 0;\n        for (const [key, val] of Object.entries(object)) {\n            if (val !== undefined) {\n                const i = this.names.indexOf(key);\n                if (i === -1) {\n                    throw new errors_1.UnknownArgumentError(this.names.length\n                        ? `invalid global '${key}', valid globals are ${this.names\n                            .map((n) => `'${n}'`)\n                            .join(\", \")}`\n                        : `invalid global '${key}', no valid globals exist`);\n                }\n                objLen += 1;\n                elemBuf.writeInt32(i);\n                if (val === null) {\n                    elemBuf.writeInt32(-1);\n                }\n                else {\n                    this.codecs[i].encode(elemBuf, val);\n                }\n            }\n        }\n        const elemData = elemBuf.unwrap();\n        buf.writeInt32(4 + elemData.length);\n        buf.writeInt32(objLen);\n        buf.writeBuffer(elemData);\n    }\n    decode(buf) {\n        const codecs = this.codecs;\n        const names = this.names;\n        const els = buf.readUInt32();\n        const elemBuf = buffer_1.ReadBuffer.alloc();\n        const result = {};\n        for (let _ = 0; _ < els; _++) {\n            const i = buf.readUInt32();\n            const elemLen = buf.readInt32();\n            const name = names[i];\n            let val = null;\n            if (elemLen !== -1) {\n                buf.sliceInto(elemBuf, elemLen);\n                val = codecs[i].decode(elemBuf);\n                elemBuf.finish();\n            }\n            result[name] = val;\n        }\n        return result;\n    }\n    getSubcodecs() {\n        return Array.from(this.codecs);\n    }\n    getKind() {\n        return \"sparse_object\";\n    }\n}\nexports.SparseObjectCodec = SparseObjectCodec;\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2019-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CodecsRegistry = void 0;\nconst buffer_1 = require(\"../primitives/buffer\");\nconst lru_1 = __importDefault(require(\"../primitives/lru\"));\nconst ifaces_1 = require(\"./ifaces\");\nconst codecs_1 = require(\"./codecs\");\nconst consts_1 = require(\"./consts\");\nconst tuple_1 = require(\"./tuple\");\nconst numbers = __importStar(require(\"./numbers\"));\nconst datecodecs = __importStar(require(\"./datetime\"));\nconst json_1 = require(\"./json\");\nconst array_1 = require(\"./array\");\nconst namedtuple_1 = require(\"./namedtuple\");\nconst enum_1 = require(\"./enum\");\nconst object_1 = require(\"./object\");\nconst set_1 = require(\"./set\");\nconst range_1 = require(\"./range\");\nconst utils_1 = require(\"../utils\");\nconst sparseObject_1 = require(\"./sparseObject\");\nconst errors_1 = require(\"../errors\");\nconst CODECS_CACHE_SIZE = 1000;\nconst CODECS_BUILD_CACHE_SIZE = 200;\nconst CTYPE_SET = 0;\nconst CTYPE_SHAPE = 1;\nconst CTYPE_BASE_SCALAR = 2;\nconst CTYPE_SCALAR = 3;\nconst CTYPE_TUPLE = 4;\nconst CTYPE_NAMEDTUPLE = 5;\nconst CTYPE_ARRAY = 6;\nconst CTYPE_ENUM = 7;\nconst CTYPE_INPUT_SHAPE = 8;\nconst CTYPE_RANGE = 9;\nconst INT64_TYPEID = consts_1.KNOWN_TYPENAMES.get(\"std::int64\");\nconst DATETIME_TYPEID = consts_1.KNOWN_TYPENAMES.get(\"std::datetime\");\nconst JSON_TYPEID = consts_1.KNOWN_TYPENAMES.get(\"std::json\");\nclass CodecsRegistry {\n    constructor() {\n        Object.defineProperty(this, \"codecsBuildCache\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"codecs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"customScalarCodecs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.codecs = new lru_1.default({ capacity: CODECS_CACHE_SIZE });\n        this.codecsBuildCache = new lru_1.default({ capacity: CODECS_BUILD_CACHE_SIZE });\n        this.customScalarCodecs = new Map();\n    }\n    setCustomCodecs({ int64_bigint, datetime_localDatetime, json_string, } = {}) {\n        if (int64_bigint) {\n            this.customScalarCodecs.set(INT64_TYPEID, new numbers.Int64BigintCodec(INT64_TYPEID));\n        }\n        else {\n            this.customScalarCodecs.delete(INT64_TYPEID);\n        }\n        if (datetime_localDatetime) {\n            this.customScalarCodecs.set(DATETIME_TYPEID, new datecodecs.LocalDateTimeCodec(DATETIME_TYPEID));\n        }\n        else {\n            this.customScalarCodecs.delete(DATETIME_TYPEID);\n        }\n        if (json_string) {\n            this.customScalarCodecs.set(JSON_TYPEID, new json_1.JSONStringCodec(JSON_TYPEID));\n        }\n        else {\n            this.customScalarCodecs.delete(JSON_TYPEID);\n        }\n    }\n    hasCodec(typeId) {\n        if (this.codecs.has(typeId)) {\n            return true;\n        }\n        return typeId === consts_1.NULL_CODEC_ID || typeId === tuple_1.EMPTY_TUPLE_CODEC_ID;\n    }\n    getCodec(typeId) {\n        const codec = this.codecs.get(typeId);\n        if (codec != null) {\n            return codec;\n        }\n        if (typeId === tuple_1.EMPTY_TUPLE_CODEC_ID) {\n            return tuple_1.EMPTY_TUPLE_CODEC;\n        }\n        if (typeId === consts_1.NULL_CODEC_ID) {\n            return codecs_1.NULL_CODEC;\n        }\n        return null;\n    }\n    buildCodec(spec, protocolVersion) {\n        const frb = new buffer_1.ReadBuffer(spec);\n        const codecsList = [];\n        let codec = null;\n        while (frb.length) {\n            codec = this._buildCodec(frb, codecsList, protocolVersion);\n            if (codec == null) {\n                continue;\n            }\n            codecsList.push(codec);\n            this.codecs.set(codec.tid, codec);\n        }\n        if (!codecsList.length) {\n            throw new errors_1.InternalClientError(\"could not build a codec\");\n        }\n        return codecsList[codecsList.length - 1];\n    }\n    _buildCodec(frb, cl, protocolVersion) {\n        var _a;\n        const t = frb.readUInt8();\n        const tid = frb.readUUID();\n        let res = this.codecs.get(tid);\n        if (res == null) {\n            res = this.codecsBuildCache.get(tid);\n        }\n        if (res != null) {\n            switch (t) {\n                case CTYPE_SET: {\n                    frb.discard(2);\n                    break;\n                }\n                case CTYPE_SHAPE:\n                case CTYPE_INPUT_SHAPE: {\n                    const els = frb.readUInt16();\n                    for (let i = 0; i < els; i++) {\n                        if ((0, utils_1.versionGreaterThanOrEqual)(protocolVersion, [0, 11])) {\n                            frb.discard(5);\n                        }\n                        else {\n                            frb.discard(1);\n                        }\n                        const elm_length = frb.readUInt32();\n                        frb.discard(elm_length + 2);\n                    }\n                    break;\n                }\n                case CTYPE_BASE_SCALAR: {\n                    break;\n                }\n                case CTYPE_RANGE:\n                case CTYPE_SCALAR: {\n                    frb.discard(2);\n                    break;\n                }\n                case CTYPE_TUPLE: {\n                    const els = frb.readUInt16();\n                    frb.discard(2 * els);\n                    break;\n                }\n                case CTYPE_NAMEDTUPLE: {\n                    const els = frb.readUInt16();\n                    for (let i = 0; i < els; i++) {\n                        const elm_length = frb.readUInt32();\n                        frb.discard(elm_length + 2);\n                    }\n                    break;\n                }\n                case CTYPE_ARRAY: {\n                    frb.discard(2);\n                    const els = frb.readUInt16();\n                    if (els !== 1) {\n                        throw new errors_1.ProtocolError(\"cannot handle arrays with more than one dimension\");\n                    }\n                    frb.discard(4);\n                    break;\n                }\n                case CTYPE_ENUM: {\n                    const els = frb.readUInt16();\n                    for (let i = 0; i < els; i++) {\n                        const elm_length = frb.readUInt32();\n                        frb.discard(elm_length);\n                    }\n                    break;\n                }\n                default: {\n                    if (t >= 0x7f && t <= 0xff) {\n                        const ann_length = frb.readUInt32();\n                        if (t === 0xff) {\n                            const typeName = buffer_1.utf8Decoder.decode(frb.readBuffer(ann_length));\n                            const codec = (_a = this.codecs.get(tid)) !== null && _a !== void 0 ? _a : this.codecsBuildCache.get(tid);\n                            if (codec instanceof ifaces_1.ScalarCodec) {\n                                codec.setTypeName(typeName);\n                            }\n                        }\n                        else {\n                            frb.discard(ann_length);\n                        }\n                        return null;\n                    }\n                    else {\n                        throw new errors_1.InternalClientError(`no codec implementation for EdgeDB data class ${t}`);\n                    }\n                }\n            }\n            return res;\n        }\n        switch (t) {\n            case CTYPE_BASE_SCALAR: {\n                res = this.customScalarCodecs.get(tid);\n                if (res != null) {\n                    break;\n                }\n                res = codecs_1.SCALAR_CODECS.get(tid);\n                if (!res) {\n                    if (consts_1.KNOWN_TYPES.has(tid)) {\n                        throw new errors_1.InternalClientError(`no JS codec for ${consts_1.KNOWN_TYPES.get(tid)}`);\n                    }\n                    throw new errors_1.InternalClientError(`no JS codec for the type with ID ${tid}`);\n                }\n                if (!(res instanceof ifaces_1.ScalarCodec)) {\n                    throw new errors_1.ProtocolError(\"could not build scalar codec: base scalar is a non-scalar codec\");\n                }\n                break;\n            }\n            case CTYPE_SHAPE:\n            case CTYPE_INPUT_SHAPE: {\n                const els = frb.readUInt16();\n                const codecs = new Array(els);\n                const names = new Array(els);\n                const flags = new Array(els);\n                const cards = new Array(els);\n                for (let i = 0; i < els; i++) {\n                    let flag;\n                    let card;\n                    if ((0, utils_1.versionGreaterThanOrEqual)(protocolVersion, [0, 11])) {\n                        flag = frb.readUInt32();\n                        card = frb.readUInt8();\n                    }\n                    else {\n                        flag = frb.readUInt8();\n                        card = 0;\n                    }\n                    const name = frb.readString();\n                    const pos = frb.readUInt16();\n                    const subCodec = cl[pos];\n                    if (subCodec == null) {\n                        throw new errors_1.ProtocolError(\"could not build object codec: missing subcodec\");\n                    }\n                    codecs[i] = subCodec;\n                    names[i] = name;\n                    flags[i] = flag;\n                    cards[i] = card;\n                }\n                res =\n                    t === CTYPE_INPUT_SHAPE\n                        ? new sparseObject_1.SparseObjectCodec(tid, codecs, names)\n                        : new object_1.ObjectCodec(tid, codecs, names, flags, cards);\n                break;\n            }\n            case CTYPE_SET: {\n                const pos = frb.readUInt16();\n                const subCodec = cl[pos];\n                if (subCodec == null) {\n                    throw new errors_1.ProtocolError(\"could not build set codec: missing subcodec\");\n                }\n                res = new set_1.SetCodec(tid, subCodec);\n                break;\n            }\n            case CTYPE_SCALAR: {\n                const pos = frb.readUInt16();\n                res = cl[pos];\n                if (res == null) {\n                    throw new errors_1.ProtocolError(\"could not build scalar codec: missing a codec for base scalar\");\n                }\n                if (!(res instanceof ifaces_1.ScalarCodec)) {\n                    throw new errors_1.ProtocolError(\"could not build scalar codec: base scalar has a non-scalar codec\");\n                }\n                res = res.derive(tid);\n                break;\n            }\n            case CTYPE_ARRAY: {\n                const pos = frb.readUInt16();\n                const els = frb.readUInt16();\n                if (els !== 1) {\n                    throw new errors_1.ProtocolError(\"cannot handle arrays with more than one dimension\");\n                }\n                const dimLen = frb.readInt32();\n                const subCodec = cl[pos];\n                if (subCodec == null) {\n                    throw new errors_1.ProtocolError(\"could not build array codec: missing subcodec\");\n                }\n                res = new array_1.ArrayCodec(tid, subCodec, dimLen);\n                break;\n            }\n            case CTYPE_TUPLE: {\n                const els = frb.readUInt16();\n                if (els === 0) {\n                    res = tuple_1.EMPTY_TUPLE_CODEC;\n                }\n                else {\n                    const codecs = new Array(els);\n                    for (let i = 0; i < els; i++) {\n                        const pos = frb.readUInt16();\n                        const subCodec = cl[pos];\n                        if (subCodec == null) {\n                            throw new errors_1.ProtocolError(\"could not build tuple codec: missing subcodec\");\n                        }\n                        codecs[i] = subCodec;\n                    }\n                    res = new tuple_1.TupleCodec(tid, codecs);\n                }\n                break;\n            }\n            case CTYPE_NAMEDTUPLE: {\n                const els = frb.readUInt16();\n                const codecs = new Array(els);\n                const names = new Array(els);\n                for (let i = 0; i < els; i++) {\n                    names[i] = frb.readString();\n                    const pos = frb.readUInt16();\n                    const subCodec = cl[pos];\n                    if (subCodec == null) {\n                        throw new errors_1.ProtocolError(\"could not build namedtuple codec: missing subcodec\");\n                    }\n                    codecs[i] = subCodec;\n                }\n                res = new namedtuple_1.NamedTupleCodec(tid, codecs, names);\n                break;\n            }\n            case CTYPE_ENUM: {\n                const els = frb.readUInt16();\n                const values = [];\n                for (let i = 0; i < els; i++) {\n                    values.push(frb.readString());\n                }\n                res = new enum_1.EnumCodec(tid, null, values);\n                break;\n            }\n            case CTYPE_RANGE: {\n                const pos = frb.readUInt16();\n                const subCodec = cl[pos];\n                if (subCodec == null) {\n                    throw new errors_1.ProtocolError(\"could not build range codec: missing subcodec\");\n                }\n                res = new range_1.RangeCodec(tid, subCodec);\n                break;\n            }\n        }\n        if (res == null) {\n            if (consts_1.KNOWN_TYPES.has(tid)) {\n                throw new errors_1.InternalClientError(`could not build a codec for ${consts_1.KNOWN_TYPES.get(tid)} type`);\n            }\n            else {\n                throw new errors_1.InternalClientError(`could not build a codec for ${tid} type`);\n            }\n        }\n        this.codecsBuildCache.set(tid, res);\n        return res;\n    }\n}\nexports.CodecsRegistry = CodecsRegistry;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Options = exports.Session = exports.TransactionOptions = exports.RetryOptions = exports.RetryCondition = exports.IsolationLevel = exports.defaultBackoff = void 0;\nconst errors = __importStar(require(\"./errors\"));\nfunction defaultBackoff(attempt) {\n    return 2 ** attempt * 100 + Math.random() * 100;\n}\nexports.defaultBackoff = defaultBackoff;\nvar IsolationLevel;\n(function (IsolationLevel) {\n    IsolationLevel[\"Serializable\"] = \"SERIALIZABLE\";\n})(IsolationLevel = exports.IsolationLevel || (exports.IsolationLevel = {}));\nvar RetryCondition;\n(function (RetryCondition) {\n    RetryCondition[RetryCondition[\"TransactionConflict\"] = 0] = \"TransactionConflict\";\n    RetryCondition[RetryCondition[\"NetworkError\"] = 1] = \"NetworkError\";\n})(RetryCondition = exports.RetryCondition || (exports.RetryCondition = {}));\nclass RetryRule {\n    constructor(attempts, backoff) {\n        Object.defineProperty(this, \"attempts\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"backoff\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.attempts = attempts;\n        this.backoff = backoff;\n    }\n}\nclass RetryOptions {\n    constructor(attempts = 3, backoff = defaultBackoff) {\n        Object.defineProperty(this, \"default\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"overrides\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.default = new RetryRule(attempts, backoff);\n        this.overrides = new Map();\n    }\n    withRule(condition, attempts, backoff) {\n        const def = this.default;\n        const overrides = new Map(this.overrides);\n        overrides.set(condition, new RetryRule(attempts !== null && attempts !== void 0 ? attempts : def.attempts, backoff !== null && backoff !== void 0 ? backoff : def.backoff));\n        const result = Object.create(RetryOptions.prototype);\n        result.default = def;\n        result.overrides = overrides;\n        return result;\n    }\n    getRuleForException(err) {\n        let result;\n        if (err instanceof errors.TransactionConflictError) {\n            result = this.overrides.get(RetryCondition.TransactionConflict);\n        }\n        else if (err instanceof errors.ClientError) {\n            result = this.overrides.get(RetryCondition.NetworkError);\n        }\n        return result !== null && result !== void 0 ? result : this.default;\n    }\n    static defaults() {\n        return new RetryOptions();\n    }\n}\nexports.RetryOptions = RetryOptions;\nclass TransactionOptions {\n    constructor({ isolation = IsolationLevel.Serializable, readonly = false, deferrable = false, } = {}) {\n        Object.defineProperty(this, \"isolation\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"readonly\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"deferrable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.isolation = isolation;\n        this.readonly = readonly;\n        this.deferrable = deferrable;\n    }\n    static defaults() {\n        return new TransactionOptions();\n    }\n}\nexports.TransactionOptions = TransactionOptions;\nclass Session {\n    constructor({ module = \"default\", moduleAliases = {}, config = {}, globals = {}, } = {}) {\n        Object.defineProperty(this, \"module\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"moduleAliases\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"config\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"globals\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.module = module;\n        this.moduleAliases = moduleAliases;\n        this.config = config;\n        this.globals = globals;\n    }\n    withModuleAliases({ module, ...aliases }) {\n        return new Session({\n            ...this,\n            module: module !== null && module !== void 0 ? module : this.module,\n            moduleAliases: { ...this.moduleAliases, ...aliases },\n        });\n    }\n    withConfig(config) {\n        return new Session({\n            ...this,\n            config: { ...this.config, ...config },\n        });\n    }\n    withGlobals(globals) {\n        return new Session({\n            ...this,\n            globals: { ...this.globals, ...globals },\n        });\n    }\n    _serialise() {\n        const state = {};\n        if (this.module !== \"default\") {\n            state.module = this.module;\n        }\n        const _aliases = Object.entries(this.moduleAliases);\n        if (_aliases.length) {\n            state.aliases = _aliases;\n        }\n        if (Object.keys(this.config).length) {\n            state.config = this.config;\n        }\n        const _globals = Object.entries(this.globals);\n        if (_globals.length) {\n            state.globals = _globals.reduce((globals, [key, val]) => {\n                globals[key.includes(\"::\") ? key : `${this.module}::${key}`] = val;\n                return globals;\n            }, {});\n        }\n        return state;\n    }\n    static defaults() {\n        return defaultSession;\n    }\n}\nexports.Session = Session;\nconst defaultSession = new Session();\nclass Options {\n    constructor({ retryOptions = RetryOptions.defaults(), transactionOptions = TransactionOptions.defaults(), session = Session.defaults(), } = {}) {\n        Object.defineProperty(this, \"retryOptions\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"transactionOptions\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"session\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.retryOptions = retryOptions;\n        this.transactionOptions = transactionOptions;\n        this.session = session;\n    }\n    withTransactionOptions(opt) {\n        return new Options({\n            ...this,\n            transactionOptions: opt instanceof TransactionOptions ? opt : new TransactionOptions(opt),\n        });\n    }\n    withRetryOptions(opt) {\n        return new Options({\n            ...this,\n            retryOptions: opt instanceof RetryOptions\n                ? opt\n                : new RetryOptions(opt.attempts, opt.backoff),\n        });\n    }\n    withSession(opt) {\n        return new Options({\n            ...this,\n            session: opt,\n        });\n    }\n    static defaults() {\n        return new Options();\n    }\n}\nexports.Options = Options;\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2021-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst errors_1 = require(\"../errors\");\nclass Event {\n    async wait() {\n        await this._promise;\n    }\n    then(...args) {\n        throw new errors_1.InternalClientError(\"Event objects cannot be awaited on directly; use Event.wait()\");\n    }\n    get done() {\n        return this._done;\n    }\n    set() {\n        if (this._done) {\n            throw new errors_1.InternalClientError(\"emit(): the Event is already set\");\n        }\n        this._resolve(true);\n    }\n    setError(reason) {\n        if (this._done) {\n            throw new errors_1.InternalClientError(\"emitError(): the Event is already set\");\n        }\n        this._reject(reason);\n    }\n    constructor() {\n        Object.defineProperty(this, \"_promise\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_resolve\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_reject\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_done\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this._done = false;\n        let futReject = null;\n        let futResolve = null;\n        this._promise = new Promise((resolve, reject) => {\n            futReject = (reason) => {\n                this._done = true;\n                reject(reason);\n            };\n            futResolve = (value) => {\n                this._done = true;\n                resolve(value);\n            };\n        });\n        if (!futReject || !futResolve) {\n            throw new errors_1.InternalClientError(\"Promise executor was not called synchronously\");\n        }\n        this._reject = futReject;\n        this._resolve = futResolve;\n    }\n}\nexports.default = Event;\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2020-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LifoQueue = void 0;\nconst errors_1 = require(\"../errors\");\nclass LifoQueue {\n    constructor() {\n        Object.defineProperty(this, \"_promises\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_resolvers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_rejecters\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this._resolvers = [];\n        this._rejecters = [];\n        this._promises = [];\n    }\n    _add() {\n        this._promises.push(new Promise((resolve, reject) => {\n            this._resolvers.push(resolve);\n            this._rejecters.push(reject);\n        }));\n    }\n    push(item) {\n        if (!this._resolvers.length) {\n            this._add();\n        }\n        const resolve = this._resolvers.shift();\n        this._rejecters.shift();\n        if (!resolve) {\n            throw new errors_1.InternalClientError(\"resolve function was null or undefined when attempting to push.\");\n        }\n        resolve(item);\n    }\n    get() {\n        if (!this._promises.length) {\n            this._add();\n        }\n        const promise = this._promises.pop();\n        if (!promise) {\n            throw new errors_1.InternalClientError(\"promise was null or undefined when attempting to get.\");\n        }\n        return promise;\n    }\n    cancelAllPending(err) {\n        const rejecters = this._rejecters;\n        this._rejecters = [];\n        this._resolvers = [];\n        for (const reject of rejecters) {\n            reject(err);\n        }\n    }\n    get length() {\n        return this._promises.length - this._resolvers.length;\n    }\n    get pending() {\n        return Math.max(0, this._resolvers.length - this._promises.length);\n    }\n}\nexports.LifoQueue = LifoQueue;\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2019-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.retryingConnect = void 0;\nconst errors = __importStar(require(\"./errors\"));\nconst utils_1 = require(\"./utils\");\nlet lastLoggingAt = 0;\nasync function retryingConnect(connectWithTimeout, config, registry) {\n    const maxTime = config.connectionParams.waitUntilAvailable === 0\n        ? 0\n        : Date.now() + config.connectionParams.waitUntilAvailable;\n    while (true) {\n        try {\n            return await connectWithTimeout(config.connectionParams.address, config, registry);\n        }\n        catch (e) {\n            if (e instanceof errors.ClientConnectionError) {\n                if (e.hasTag(errors.SHOULD_RECONNECT)) {\n                    const now = Date.now();\n                    if (now > maxTime) {\n                        throw e;\n                    }\n                    if (config.logging &&\n                        (!lastLoggingAt || now - lastLoggingAt > 5000)) {\n                        lastLoggingAt = now;\n                        const logMsg = [\n                            `A client connection error occurred; reconnecting because ` +\n                                `of \"waitUntilAvailable=${config.connectionParams.waitUntilAvailable}\".`,\n                            e,\n                        ];\n                        if (!config.fromProject &&\n                            !config.fromEnv &&\n                            (await config.inProject())) {\n                            logMsg.push(`\\n\\n\\n` +\n                                `Hint: it looks like the program is running from a ` +\n                                `directory initialized with \"edgedb project init\". ` +\n                                `Consider calling \"edgedb.connect()\" without arguments.` +\n                                `\\n`);\n                        }\n                        console.warn(...logMsg);\n                    }\n                }\n                else {\n                    throw e;\n                }\n            }\n            else {\n                console.error(\"Unexpected connection error:\", e);\n                throw e;\n            }\n        }\n        await (0, utils_1.sleep)(Math.trunc(10 + Math.random() * 200));\n    }\n}\nexports.retryingConnect = retryingConnect;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Transaction = exports.TransactionState = void 0;\nconst errors = __importStar(require(\"./errors\"));\nconst ifaces_1 = require(\"./ifaces\");\nvar TransactionState;\n(function (TransactionState) {\n    TransactionState[TransactionState[\"ACTIVE\"] = 0] = \"ACTIVE\";\n    TransactionState[TransactionState[\"COMMITTED\"] = 1] = \"COMMITTED\";\n    TransactionState[TransactionState[\"ROLLEDBACK\"] = 2] = \"ROLLEDBACK\";\n    TransactionState[TransactionState[\"FAILED\"] = 3] = \"FAILED\";\n})(TransactionState = exports.TransactionState || (exports.TransactionState = {}));\nclass Transaction {\n    constructor(holder, rawConn) {\n        Object.defineProperty(this, \"_holder\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_rawConn\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_state\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_opInProgress\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this._holder = holder;\n        this._rawConn = rawConn;\n        this._state = TransactionState.ACTIVE;\n        this._opInProgress = false;\n    }\n    static async _startTransaction(holder) {\n        const rawConn = await holder._getConnection();\n        await rawConn.resetState();\n        const options = holder.options.transactionOptions;\n        await rawConn.fetch(`START TRANSACTION ISOLATION ${options.isolation}, ${options.readonly ? \"READ ONLY\" : \"READ WRITE\"}, ${options.deferrable ? \"\" : \"NOT \"}DEFERRABLE;`, undefined, ifaces_1.OutputFormat.NONE, ifaces_1.Cardinality.NO_RESULT, holder.options.session, true);\n        return new Transaction(holder, rawConn);\n    }\n    async _waitForConnAbort() {\n        await this._rawConn.connAbortWaiter.wait();\n        const abortError = this._rawConn.getConnAbortError();\n        if (abortError instanceof errors.EdgeDBError &&\n            abortError.source instanceof errors.TransactionTimeoutError) {\n            throw abortError.source;\n        }\n        else {\n            throw abortError;\n        }\n    }\n    async _runOp(opname, op, errMessage) {\n        if (this._opInProgress) {\n            throw new errors.InterfaceError(errMessage !== null && errMessage !== void 0 ? errMessage : \"Another query is in progress. Use the query methods \" +\n                \"on 'Client' to run queries concurrently.\");\n        }\n        if (this._state !== TransactionState.ACTIVE) {\n            throw new errors.InterfaceError(`cannot ${opname}; the transaction is ${this._state === TransactionState.COMMITTED\n                ? \"already committed\"\n                : this._state === TransactionState.ROLLEDBACK\n                    ? \"already rolled back\"\n                    : \"in error state\"}`);\n        }\n        this._opInProgress = true;\n        try {\n            return await op();\n        }\n        finally {\n            this._opInProgress = false;\n        }\n    }\n    async _commit() {\n        await this._runOp(\"commit\", async () => {\n            await this._rawConn.fetch(\"COMMIT\", undefined, ifaces_1.OutputFormat.NONE, ifaces_1.Cardinality.NO_RESULT, this._holder.options.session, true);\n            this._state = TransactionState.COMMITTED;\n        }, \"A query is still in progress after transaction block has returned.\");\n    }\n    async _rollback() {\n        await this._runOp(\"rollback\", async () => {\n            await this._rawConn.fetch(\"ROLLBACK\", undefined, ifaces_1.OutputFormat.NONE, ifaces_1.Cardinality.NO_RESULT, this._holder.options.session, true);\n            this._state = TransactionState.ROLLEDBACK;\n        }, \"A query is still in progress after transaction block has returned.\");\n    }\n    async execute(query, args) {\n        return this._runOp(\"execute\", () => this._rawConn.fetch(query, args, ifaces_1.OutputFormat.NONE, ifaces_1.Cardinality.NO_RESULT, this._holder.options.session));\n    }\n    async query(query, args) {\n        return this._runOp(\"query\", () => this._rawConn.fetch(query, args, ifaces_1.OutputFormat.BINARY, ifaces_1.Cardinality.MANY, this._holder.options.session));\n    }\n    async queryJSON(query, args) {\n        return this._runOp(\"queryJSON\", () => this._rawConn.fetch(query, args, ifaces_1.OutputFormat.JSON, ifaces_1.Cardinality.MANY, this._holder.options.session));\n    }\n    async querySingle(query, args) {\n        return this._runOp(\"querySingle\", () => this._rawConn.fetch(query, args, ifaces_1.OutputFormat.BINARY, ifaces_1.Cardinality.AT_MOST_ONE, this._holder.options.session));\n    }\n    async querySingleJSON(query, args) {\n        return this._runOp(\"querySingleJSON\", () => this._rawConn.fetch(query, args, ifaces_1.OutputFormat.JSON, ifaces_1.Cardinality.AT_MOST_ONE, this._holder.options.session));\n    }\n    async queryRequiredSingle(query, args) {\n        return this._runOp(\"queryRequiredSingle\", () => this._rawConn.fetch(query, args, ifaces_1.OutputFormat.BINARY, ifaces_1.Cardinality.ONE, this._holder.options.session));\n    }\n    async queryRequiredSingleJSON(query, args) {\n        return this._runOp(\"queryRequiredSingleJSON\", () => this._rawConn.fetch(query, args, ifaces_1.OutputFormat.JSON, ifaces_1.Cardinality.ONE, this._holder.options.session));\n    }\n}\nexports.Transaction = Transaction;\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2020-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Client = exports.BaseClientPool = exports.ClientConnectionHolder = void 0;\nconst registry_1 = require(\"./codecs/registry\");\nconst errors = __importStar(require(\"./errors\"));\nconst ifaces_1 = require(\"./ifaces\");\nconst options_1 = require(\"./options\");\nconst event_1 = __importDefault(require(\"./primitives/event\"));\nconst queues_1 = require(\"./primitives/queues\");\nconst retry_1 = require(\"./retry\");\nconst transaction_1 = require(\"./transaction\");\nconst utils_1 = require(\"./utils\");\nclass ClientConnectionHolder {\n    constructor(pool) {\n        Object.defineProperty(this, \"_pool\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_connection\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_options\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_inUse\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this._pool = pool;\n        this._connection = null;\n        this._options = null;\n        this._inUse = null;\n    }\n    get options() {\n        var _a;\n        return (_a = this._options) !== null && _a !== void 0 ? _a : options_1.Options.defaults();\n    }\n    async _getConnection() {\n        if (!this._connection || this._connection.isClosed()) {\n            this._connection = await this._pool.getNewConnection();\n        }\n        return this._connection;\n    }\n    get connectionOpen() {\n        return this._connection !== null && !this._connection.isClosed();\n    }\n    async acquire(options) {\n        if (this._inUse) {\n            throw new errors.InternalClientError(\"ClientConnectionHolder cannot be acquired, already in use\");\n        }\n        this._options = options;\n        this._inUse = new event_1.default();\n        return this;\n    }\n    async release() {\n        var _a;\n        if (this._inUse === null) {\n            throw new errors.ClientError(\"ClientConnectionHolder.release() called on \" +\n                \"a free connection holder\");\n        }\n        this._options = null;\n        await ((_a = this._connection) === null || _a === void 0 ? void 0 : _a.resetState());\n        if (!this._inUse.done) {\n            this._inUse.set();\n        }\n        this._inUse = null;\n        this._pool.enqueue(this);\n    }\n    async _waitUntilReleasedAndClose() {\n        var _a;\n        if (this._inUse) {\n            await this._inUse.wait();\n        }\n        await ((_a = this._connection) === null || _a === void 0 ? void 0 : _a.close());\n    }\n    terminate() {\n        var _a;\n        (_a = this._connection) === null || _a === void 0 ? void 0 : _a.close();\n    }\n    async transaction(action) {\n        let result;\n        for (let iteration = 0; true; ++iteration) {\n            const transaction = await transaction_1.Transaction._startTransaction(this);\n            let commitFailed = false;\n            try {\n                result = await Promise.race([\n                    action(transaction),\n                    transaction._waitForConnAbort(),\n                ]);\n                try {\n                    await transaction._commit();\n                }\n                catch (err) {\n                    commitFailed = true;\n                    throw err;\n                }\n            }\n            catch (err) {\n                try {\n                    if (!commitFailed) {\n                        await transaction._rollback();\n                    }\n                }\n                catch (rollback_err) {\n                    if (!(rollback_err instanceof errors.EdgeDBError)) {\n                        throw rollback_err;\n                    }\n                }\n                if (err instanceof errors.EdgeDBError &&\n                    err.hasTag(errors.SHOULD_RETRY) &&\n                    !(commitFailed && err instanceof errors.ClientConnectionError)) {\n                    const rule = this.options.retryOptions.getRuleForException(err);\n                    if (iteration + 1 >= rule.attempts) {\n                        throw err;\n                    }\n                    await (0, utils_1.sleep)(rule.backoff(iteration + 1));\n                    continue;\n                }\n                throw err;\n            }\n            return result;\n        }\n    }\n    async retryingFetch(query, args, outputFormat, expectedCardinality) {\n        let result;\n        for (let iteration = 0; true; ++iteration) {\n            const conn = await this._getConnection();\n            try {\n                result = await conn.fetch(query, args, outputFormat, expectedCardinality, this.options.session);\n            }\n            catch (err) {\n                if (err instanceof errors.EdgeDBError &&\n                    err.hasTag(errors.SHOULD_RETRY) &&\n                    (conn.getQueryCapabilities(query, outputFormat, expectedCardinality) === 0 ||\n                        err instanceof errors.TransactionConflictError)) {\n                    const rule = this.options.retryOptions.getRuleForException(err);\n                    if (iteration + 1 >= rule.attempts) {\n                        throw err;\n                    }\n                    await (0, utils_1.sleep)(rule.backoff(iteration + 1));\n                    continue;\n                }\n                throw err;\n            }\n            return result;\n        }\n    }\n    async execute(query, args) {\n        return this.retryingFetch(query, args, ifaces_1.OutputFormat.NONE, ifaces_1.Cardinality.NO_RESULT);\n    }\n    async query(query, args) {\n        return this.retryingFetch(query, args, ifaces_1.OutputFormat.BINARY, ifaces_1.Cardinality.MANY);\n    }\n    async queryJSON(query, args) {\n        return this.retryingFetch(query, args, ifaces_1.OutputFormat.JSON, ifaces_1.Cardinality.MANY);\n    }\n    async querySingle(query, args) {\n        return this.retryingFetch(query, args, ifaces_1.OutputFormat.BINARY, ifaces_1.Cardinality.AT_MOST_ONE);\n    }\n    async querySingleJSON(query, args) {\n        return this.retryingFetch(query, args, ifaces_1.OutputFormat.JSON, ifaces_1.Cardinality.AT_MOST_ONE);\n    }\n    async queryRequiredSingle(query, args) {\n        return this.retryingFetch(query, args, ifaces_1.OutputFormat.BINARY, ifaces_1.Cardinality.ONE);\n    }\n    async queryRequiredSingleJSON(query, args) {\n        return this.retryingFetch(query, args, ifaces_1.OutputFormat.JSON, ifaces_1.Cardinality.ONE);\n    }\n}\nexports.ClientConnectionHolder = ClientConnectionHolder;\nclass BaseClientPool {\n    constructor(_parseConnectArguments, options) {\n        var _a;\n        Object.defineProperty(this, \"_parseConnectArguments\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: _parseConnectArguments\n        });\n        Object.defineProperty(this, \"_closing\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_queue\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_holders\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_userConcurrency\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_suggestedConcurrency\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_connectConfig\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_codecsRegistry\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"__normalizedConnectConfig\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        this.validateClientOptions(options);\n        this._codecsRegistry = new registry_1.CodecsRegistry();\n        this._queue = new queues_1.LifoQueue();\n        this._holders = [];\n        this._userConcurrency = (_a = options.concurrency) !== null && _a !== void 0 ? _a : null;\n        this._suggestedConcurrency = null;\n        this._closing = null;\n        this._connectConfig = { ...options };\n        this._resizeHolderPool();\n    }\n    validateClientOptions(opts) {\n        if (opts.concurrency != null &&\n            (typeof opts.concurrency !== \"number\" ||\n                !Number.isInteger(opts.concurrency) ||\n                opts.concurrency < 0)) {\n            throw new errors.InterfaceError(`invalid 'concurrency' value: ` +\n                `expected integer greater than 0 (got ${JSON.stringify(opts.concurrency)})`);\n        }\n    }\n    _getStats() {\n        return {\n            queueLength: this._queue.pending,\n            openConnections: this._holders.filter((holder) => holder.connectionOpen)\n                .length,\n        };\n    }\n    async ensureConnected() {\n        if (this._closing) {\n            throw new errors.InterfaceError(this._closing.done ? \"The client is closed\" : \"The client is closing\");\n        }\n        if (this._getStats().openConnections > 0) {\n            return;\n        }\n        const connHolder = await this._queue.get();\n        try {\n            await connHolder._getConnection();\n        }\n        finally {\n            this._queue.push(connHolder);\n        }\n    }\n    get _concurrency() {\n        var _a, _b;\n        return (_b = (_a = this._userConcurrency) !== null && _a !== void 0 ? _a : this._suggestedConcurrency) !== null && _b !== void 0 ? _b : 1;\n    }\n    _resizeHolderPool() {\n        const holdersDiff = this._concurrency - this._holders.length;\n        if (holdersDiff > 0) {\n            for (let i = 0; i < holdersDiff; i++) {\n                const connectionHolder = new ClientConnectionHolder(this);\n                this._holders.push(connectionHolder);\n                this._queue.push(connectionHolder);\n            }\n        }\n        else if (holdersDiff < 0) {\n        }\n    }\n    _getNormalizedConnectConfig() {\n        var _a;\n        return ((_a = this.__normalizedConnectConfig) !== null && _a !== void 0 ? _a : (this.__normalizedConnectConfig = this._parseConnectArguments(this._connectConfig)));\n    }\n    async getNewConnection() {\n        var _a;\n        if ((_a = this._closing) === null || _a === void 0 ? void 0 : _a.done) {\n            throw new errors.InterfaceError(\"The client is closed\");\n        }\n        const config = await this._getNormalizedConnectConfig();\n        const connection = await (0, retry_1.retryingConnect)(this._connectWithTimeout, config, this._codecsRegistry);\n        const suggestedConcurrency = connection.serverSettings.suggested_pool_concurrency;\n        if (suggestedConcurrency &&\n            suggestedConcurrency !== this._suggestedConcurrency) {\n            this._suggestedConcurrency = suggestedConcurrency;\n            this._resizeHolderPool();\n        }\n        return connection;\n    }\n    async acquireHolder(options) {\n        if (this._closing) {\n            throw new errors.InterfaceError(this._closing.done ? \"The client is closed\" : \"The client is closing\");\n        }\n        const connectionHolder = await this._queue.get();\n        try {\n            return await connectionHolder.acquire(options);\n        }\n        catch (error) {\n            this._queue.push(connectionHolder);\n            throw error;\n        }\n    }\n    enqueue(holder) {\n        this._queue.push(holder);\n    }\n    async close() {\n        if (this._closing) {\n            return await this._closing.wait();\n        }\n        this._closing = new event_1.default();\n        this._queue.cancelAllPending(new errors.InterfaceError(`The client is closing`));\n        const warningTimeoutId = setTimeout(() => {\n            console.warn(\"Client.close() is taking over 60 seconds to complete. \" +\n                \"Check if you have any unreleased connections left.\");\n        }, 60e3);\n        try {\n            await Promise.all(this._holders.map((connectionHolder) => connectionHolder._waitUntilReleasedAndClose()));\n        }\n        catch (err) {\n            this._terminate();\n            this._closing.setError(err);\n            throw err;\n        }\n        finally {\n            clearTimeout(warningTimeoutId);\n        }\n        this._closing.set();\n    }\n    _terminate() {\n        for (const connectionHolder of this._holders) {\n            connectionHolder.terminate();\n        }\n    }\n    terminate() {\n        var _a;\n        if ((_a = this._closing) === null || _a === void 0 ? void 0 : _a.done) {\n            return;\n        }\n        this._queue.cancelAllPending(new errors.InterfaceError(`The client is closed`));\n        this._terminate();\n        if (!this._closing) {\n            this._closing = new event_1.default();\n            this._closing.set();\n        }\n    }\n    isClosed() {\n        return !!this._closing;\n    }\n}\nexports.BaseClientPool = BaseClientPool;\nclass Client {\n    constructor(pool, options) {\n        Object.defineProperty(this, \"pool\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"options\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.pool = pool;\n        this.options = options;\n    }\n    withTransactionOptions(opts) {\n        return new Client(this.pool, this.options.withTransactionOptions(opts));\n    }\n    withRetryOptions(opts) {\n        return new Client(this.pool, this.options.withRetryOptions(opts));\n    }\n    withSession(session) {\n        return new Client(this.pool, this.options.withSession(session));\n    }\n    withModuleAliases(aliases) {\n        return new Client(this.pool, this.options.withSession(this.options.session.withModuleAliases(aliases)));\n    }\n    withConfig(config) {\n        const newConfig = this.options.session.withConfig(config);\n        return new Client(this.pool, this.options.withSession(newConfig));\n    }\n    withGlobals(globals) {\n        return new Client(this.pool, this.options.withSession(this.options.session.withGlobals(globals)));\n    }\n    async ensureConnected() {\n        await this.pool.ensureConnected();\n        return this;\n    }\n    isClosed() {\n        return this.pool.isClosed();\n    }\n    async close() {\n        await this.pool.close();\n    }\n    terminate() {\n        this.pool.terminate();\n    }\n    async transaction(action) {\n        if (this.pool.isStateless) {\n            throw new errors.EdgeDBError(`cannot use 'transaction()' API on HTTP client`);\n        }\n        const holder = await this.pool.acquireHolder(this.options);\n        try {\n            return await holder.transaction(action);\n        }\n        finally {\n            await holder.release();\n        }\n    }\n    async execute(query, args) {\n        const holder = await this.pool.acquireHolder(this.options);\n        try {\n            return await holder.execute(query, args);\n        }\n        finally {\n            await holder.release();\n        }\n    }\n    async query(query, args) {\n        const holder = await this.pool.acquireHolder(this.options);\n        try {\n            return await holder.query(query, args);\n        }\n        finally {\n            await holder.release();\n        }\n    }\n    async queryJSON(query, args) {\n        const holder = await this.pool.acquireHolder(this.options);\n        try {\n            return await holder.queryJSON(query, args);\n        }\n        finally {\n            await holder.release();\n        }\n    }\n    async querySingle(query, args) {\n        const holder = await this.pool.acquireHolder(this.options);\n        try {\n            return await holder.querySingle(query, args);\n        }\n        finally {\n            await holder.release();\n        }\n    }\n    async querySingleJSON(query, args) {\n        const holder = await this.pool.acquireHolder(this.options);\n        try {\n            return await holder.querySingleJSON(query, args);\n        }\n        finally {\n            await holder.release();\n        }\n    }\n    async queryRequiredSingle(query, args) {\n        const holder = await this.pool.acquireHolder(this.options);\n        try {\n            return await holder.queryRequiredSingle(query, args);\n        }\n        finally {\n            await holder.release();\n        }\n    }\n    async queryRequiredSingleJSON(query, args) {\n        const holder = await this.pool.acquireHolder(this.options);\n        try {\n            return await holder.queryRequiredSingleJSON(query, args);\n        }\n        finally {\n            await holder.release();\n        }\n    }\n}\nexports.Client = Client;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateCredentials = exports.readCredentialsFile = exports.getCredentialsPath = void 0;\nconst conUtils_1 = require(\"./conUtils\");\nconst errors_1 = require(\"./errors\");\nasync function getCredentialsPath(instanceName, serverUtils) {\n    return serverUtils.searchConfigDir(\"credentials\", instanceName + \".json\");\n}\nexports.getCredentialsPath = getCredentialsPath;\nasync function readCredentialsFile(file, serverUtils) {\n    try {\n        const data = await serverUtils.readFileUtf8(file);\n        return validateCredentials(JSON.parse(data));\n    }\n    catch (e) {\n        throw new errors_1.InterfaceError(`cannot read credentials file ${file}: ${e}`);\n    }\n}\nexports.readCredentialsFile = readCredentialsFile;\nfunction validateCredentials(data) {\n    const port = data.port;\n    if (port != null && (typeof port !== \"number\" || port < 1 || port > 65535)) {\n        throw new errors_1.InterfaceError(\"invalid `port` value\");\n    }\n    const user = data.user;\n    if (user == null) {\n        throw new errors_1.InterfaceError(\"`user` key is required\");\n    }\n    if (typeof user !== \"string\") {\n        throw new errors_1.InterfaceError(\"`user` must be string\");\n    }\n    const result = { user, port };\n    const host = data.host;\n    if (host != null) {\n        if (typeof host !== \"string\") {\n            throw new errors_1.InterfaceError(\"`host` must be string\");\n        }\n        result.host = host;\n    }\n    const database = data.database;\n    if (database != null) {\n        if (typeof database !== \"string\") {\n            throw new errors_1.InterfaceError(\"`database` must be string\");\n        }\n        result.database = database;\n    }\n    const password = data.password;\n    if (password != null) {\n        if (typeof password !== \"string\") {\n            throw new errors_1.InterfaceError(\"`password` must be string\");\n        }\n        result.password = password;\n    }\n    const caData = data.tls_ca;\n    if (caData != null) {\n        if (typeof caData !== \"string\") {\n            throw new errors_1.InterfaceError(\"`tls_ca` must be string\");\n        }\n        result.tlsCAData = caData;\n    }\n    const certData = data.tls_cert_data;\n    if (certData != null) {\n        if (typeof certData !== \"string\") {\n            throw new errors_1.InterfaceError(\"`tls_cert_data` must be string\");\n        }\n        if (caData != null && certData !== caData) {\n            throw new errors_1.InterfaceError(`both 'tls_ca' and 'tls_cert_data' are defined, ` +\n                `and are not in agreement`);\n        }\n        result.tlsCAData = certData;\n    }\n    let verifyHostname = data.tls_verify_hostname;\n    const tlsSecurity = data.tls_security;\n    if (verifyHostname != null) {\n        if (typeof verifyHostname === \"boolean\") {\n            verifyHostname = verifyHostname ? \"strict\" : \"no_host_verification\";\n        }\n        else {\n            throw new errors_1.InterfaceError(\"`tls_verify_hostname` must be boolean\");\n        }\n    }\n    if (tlsSecurity != null &&\n        (typeof tlsSecurity !== \"string\" ||\n            !conUtils_1.validTlsSecurityValues.includes(tlsSecurity))) {\n        throw new errors_1.InterfaceError(`\\`tls_security\\` must be one of ${conUtils_1.validTlsSecurityValues\n            .map((val) => `\"${val}\"`)\n            .join(\", \")}`);\n    }\n    if (verifyHostname &&\n        tlsSecurity &&\n        verifyHostname !== tlsSecurity &&\n        !(verifyHostname === \"no_host_verification\" && tlsSecurity === \"insecure\")) {\n        throw new errors_1.InterfaceError(`both 'tls_security' and 'tls_verify_hostname' are defined, ` +\n            `and are not in agreement`);\n    }\n    if (tlsSecurity || verifyHostname) {\n        result.tlsSecurity = tlsSecurity !== null && tlsSecurity !== void 0 ? tlsSecurity : verifyHostname;\n    }\n    return result;\n}\nexports.validateCredentials = validateCredentials;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getEnv = exports.HMAC = exports.H = exports.randomBytes = void 0;\nlet randomBytes;\nexports.randomBytes = randomBytes;\nlet H;\nexports.H = H;\nlet HMAC;\nexports.HMAC = HMAC;\nif (typeof crypto === \"undefined\") {\n    const nodeCrypto = require(\"crypto\");\n    exports.randomBytes = randomBytes = (size) => {\n        return new Promise((resolve, reject) => {\n            nodeCrypto.randomBytes(size, (err, buf) => {\n                if (err) {\n                    reject(err);\n                }\n                else {\n                    resolve(buf);\n                }\n            });\n        });\n    };\n    exports.H = H = async (msg) => {\n        const sign = nodeCrypto.createHash(\"sha256\");\n        sign.update(msg);\n        return sign.digest();\n    };\n    exports.HMAC = HMAC = async (key, msg) => {\n        const hm = nodeCrypto.createHmac(\"sha256\", key);\n        hm.update(msg);\n        return hm.digest();\n    };\n}\nelse {\n    exports.randomBytes = randomBytes = async (size) => {\n        return crypto.getRandomValues(new Uint8Array(size));\n    };\n    exports.H = H = async (msg) => {\n        return new Uint8Array(await crypto.subtle.digest(\"SHA-256\", msg));\n    };\n    exports.HMAC = HMAC = async (key, msg) => {\n        return new Uint8Array(await crypto.subtle.sign(\"HMAC\", await crypto.subtle.importKey(\"raw\", key, {\n            name: \"HMAC\",\n            hash: { name: \"SHA-256\" },\n        }, false, [\"sign\"]), msg));\n    };\n}\nfunction getEnv(envName, required = false) {\n    return process.env[envName];\n}\nexports.getEnv = getEnv;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.crcHqx = void 0;\nconst crctabHqx = new Uint16Array([\n    0x0000, 0x1021, 0x2042, 0x3063, 0x4084, 0x50a5, 0x60c6, 0x70e7, 0x8108,\n    0x9129, 0xa14a, 0xb16b, 0xc18c, 0xd1ad, 0xe1ce, 0xf1ef, 0x1231, 0x0210,\n    0x3273, 0x2252, 0x52b5, 0x4294, 0x72f7, 0x62d6, 0x9339, 0x8318, 0xb37b,\n    0xa35a, 0xd3bd, 0xc39c, 0xf3ff, 0xe3de, 0x2462, 0x3443, 0x0420, 0x1401,\n    0x64e6, 0x74c7, 0x44a4, 0x5485, 0xa56a, 0xb54b, 0x8528, 0x9509, 0xe5ee,\n    0xf5cf, 0xc5ac, 0xd58d, 0x3653, 0x2672, 0x1611, 0x0630, 0x76d7, 0x66f6,\n    0x5695, 0x46b4, 0xb75b, 0xa77a, 0x9719, 0x8738, 0xf7df, 0xe7fe, 0xd79d,\n    0xc7bc, 0x48c4, 0x58e5, 0x6886, 0x78a7, 0x0840, 0x1861, 0x2802, 0x3823,\n    0xc9cc, 0xd9ed, 0xe98e, 0xf9af, 0x8948, 0x9969, 0xa90a, 0xb92b, 0x5af5,\n    0x4ad4, 0x7ab7, 0x6a96, 0x1a71, 0x0a50, 0x3a33, 0x2a12, 0xdbfd, 0xcbdc,\n    0xfbbf, 0xeb9e, 0x9b79, 0x8b58, 0xbb3b, 0xab1a, 0x6ca6, 0x7c87, 0x4ce4,\n    0x5cc5, 0x2c22, 0x3c03, 0x0c60, 0x1c41, 0xedae, 0xfd8f, 0xcdec, 0xddcd,\n    0xad2a, 0xbd0b, 0x8d68, 0x9d49, 0x7e97, 0x6eb6, 0x5ed5, 0x4ef4, 0x3e13,\n    0x2e32, 0x1e51, 0x0e70, 0xff9f, 0xefbe, 0xdfdd, 0xcffc, 0xbf1b, 0xaf3a,\n    0x9f59, 0x8f78, 0x9188, 0x81a9, 0xb1ca, 0xa1eb, 0xd10c, 0xc12d, 0xf14e,\n    0xe16f, 0x1080, 0x00a1, 0x30c2, 0x20e3, 0x5004, 0x4025, 0x7046, 0x6067,\n    0x83b9, 0x9398, 0xa3fb, 0xb3da, 0xc33d, 0xd31c, 0xe37f, 0xf35e, 0x02b1,\n    0x1290, 0x22f3, 0x32d2, 0x4235, 0x5214, 0x6277, 0x7256, 0xb5ea, 0xa5cb,\n    0x95a8, 0x8589, 0xf56e, 0xe54f, 0xd52c, 0xc50d, 0x34e2, 0x24c3, 0x14a0,\n    0x0481, 0x7466, 0x6447, 0x5424, 0x4405, 0xa7db, 0xb7fa, 0x8799, 0x97b8,\n    0xe75f, 0xf77e, 0xc71d, 0xd73c, 0x26d3, 0x36f2, 0x0691, 0x16b0, 0x6657,\n    0x7676, 0x4615, 0x5634, 0xd94c, 0xc96d, 0xf90e, 0xe92f, 0x99c8, 0x89e9,\n    0xb98a, 0xa9ab, 0x5844, 0x4865, 0x7806, 0x6827, 0x18c0, 0x08e1, 0x3882,\n    0x28a3, 0xcb7d, 0xdb5c, 0xeb3f, 0xfb1e, 0x8bf9, 0x9bd8, 0xabbb, 0xbb9a,\n    0x4a75, 0x5a54, 0x6a37, 0x7a16, 0x0af1, 0x1ad0, 0x2ab3, 0x3a92, 0xfd2e,\n    0xed0f, 0xdd6c, 0xcd4d, 0xbdaa, 0xad8b, 0x9de8, 0x8dc9, 0x7c26, 0x6c07,\n    0x5c64, 0x4c45, 0x3ca2, 0x2c83, 0x1ce0, 0x0cc1, 0xef1f, 0xff3e, 0xcf5d,\n    0xdf7c, 0xaf9b, 0xbfba, 0x8fd9, 0x9ff8, 0x6e17, 0x7e36, 0x4e55, 0x5e74,\n    0x2e93, 0x3eb2, 0x0ed1, 0x1ef0,\n]);\nfunction crcHqx(data, crc) {\n    crc &= 0xffff;\n    const len = data.length;\n    let i = 0;\n    while (i < len) {\n        crc = ((crc << 8) & 0xff00) ^ crctabHqx[(crc >> 8) ^ data[i++]];\n    }\n    return crc;\n}\nexports.crcHqx = crcHqx;\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2019-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parseDuration = exports.ResolvedConnectConfig = exports.getConnectArgumentsParser = exports.validTlsSecurityValues = void 0;\nconst errors = __importStar(require(\"./errors\"));\nconst credentials_1 = require(\"./credentials\");\nconst adapter_shared_node_1 = require(\"./adapter.shared.node\");\nconst datetime_1 = require(\"./datatypes/datetime\");\nconst datetime_2 = require(\"./codecs/datetime\");\nconst errors_1 = require(\"./errors\");\nconst buffer_1 = require(\"./primitives/buffer\");\nconst crcHqx_1 = require(\"./primitives/crcHqx\");\nconst DOMAIN_NAME_MAX_LEN = 63;\nexports.validTlsSecurityValues = [\n    \"insecure\",\n    \"no_host_verification\",\n    \"strict\",\n    \"default\",\n];\nfunction getConnectArgumentsParser(utils) {\n    return async (opts) => {\n        var _a;\n        return {\n            ...(await parseConnectDsnAndArgs(opts, utils)),\n            connectTimeout: opts.timeout,\n            logging: (_a = opts.logging) !== null && _a !== void 0 ? _a : true,\n        };\n    };\n}\nexports.getConnectArgumentsParser = getConnectArgumentsParser;\nclass ResolvedConnectConfig {\n    constructor() {\n        Object.defineProperty(this, \"_host\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"_hostSource\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"_port\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"_portSource\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"_database\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"_databaseSource\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"_user\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"_userSource\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"_password\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"_passwordSource\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"_secretKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"_secretKeySource\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"_cloudProfile\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"_cloudProfileSource\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"_tlsCAData\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"_tlsCADataSource\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"_tlsSecurity\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"_tlsSecuritySource\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"_waitUntilAvailable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"_waitUntilAvailableSource\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"serverSettings\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        this.setHost = this.setHost.bind(this);\n        this.setPort = this.setPort.bind(this);\n        this.setDatabase = this.setDatabase.bind(this);\n        this.setUser = this.setUser.bind(this);\n        this.setPassword = this.setPassword.bind(this);\n        this.setSecretKey = this.setSecretKey.bind(this);\n        this.setTlsCAData = this.setTlsCAData.bind(this);\n        this.setTlsCAFile = this.setTlsCAFile.bind(this);\n        this.setTlsSecurity = this.setTlsSecurity.bind(this);\n        this.setWaitUntilAvailable = this.setWaitUntilAvailable.bind(this);\n    }\n    _setParam(param, value, source, validator) {\n        if (this[`_${param}`] === null) {\n            this[`_${param}Source`] = source;\n            if (value !== null) {\n                this[`_${param}`] = validator\n                    ? validator(value)\n                    : value;\n                return true;\n            }\n        }\n        return false;\n    }\n    async _setParamAsync(param, value, source, validator) {\n        if (this[`_${param}`] === null) {\n            this[`_${param}Source`] = source;\n            if (value !== null) {\n                this[`_${param}`] = validator\n                    ? await validator(value)\n                    : value;\n                return true;\n            }\n        }\n        return false;\n    }\n    setHost(host, source) {\n        return this._setParam(\"host\", host, source, validateHost);\n    }\n    setPort(port, source) {\n        return this._setParam(\"port\", port, source, parseValidatePort);\n    }\n    setDatabase(database, source) {\n        return this._setParam(\"database\", database, source, (db) => {\n            if (db === \"\") {\n                throw new errors_1.InterfaceError(`invalid database name: '${db}'`);\n            }\n            return db;\n        });\n    }\n    setUser(user, source) {\n        return this._setParam(\"user\", user, source, (_user) => {\n            if (_user === \"\") {\n                throw new errors_1.InterfaceError(`invalid user name: '${_user}'`);\n            }\n            return _user;\n        });\n    }\n    setPassword(password, source) {\n        return this._setParam(\"password\", password, source);\n    }\n    setSecretKey(secretKey, source) {\n        return this._setParam(\"secretKey\", secretKey, source);\n    }\n    setCloudProfile(cloudProfile, source) {\n        return this._setParam(\"cloudProfile\", cloudProfile, source);\n    }\n    setTlsCAData(caData, source) {\n        return this._setParam(\"tlsCAData\", caData, source);\n    }\n    setTlsCAFile(caFile, source, readFile) {\n        return this._setParamAsync(\"tlsCAData\", caFile, source, (caFilePath) => readFile(caFilePath));\n    }\n    setTlsSecurity(tlsSecurity, source) {\n        return this._setParam(\"tlsSecurity\", tlsSecurity, source, (_tlsSecurity) => {\n            if (!exports.validTlsSecurityValues.includes(_tlsSecurity)) {\n                throw new errors_1.InterfaceError(`invalid 'tlsSecurity' value: '${_tlsSecurity}', ` +\n                    `must be one of ${exports.validTlsSecurityValues\n                        .map((val) => `'${val}'`)\n                        .join(\", \")}`);\n            }\n            const clientSecurity = (0, adapter_shared_node_1.getEnv)(\"EDGEDB_CLIENT_SECURITY\");\n            if (clientSecurity !== undefined) {\n                if (![\"default\", \"insecure_dev_mode\", \"strict\"].includes(clientSecurity)) {\n                    throw new errors_1.InterfaceError(`invalid EDGEDB_CLIENT_SECURITY value: '${clientSecurity}', ` +\n                        `must be one of 'default', 'insecure_dev_mode' or 'strict'`);\n                }\n                if (clientSecurity === \"insecure_dev_mode\") {\n                    if (_tlsSecurity === \"default\") {\n                        _tlsSecurity = \"insecure\";\n                    }\n                }\n                else if (clientSecurity === \"strict\") {\n                    if (_tlsSecurity === \"insecure\" ||\n                        _tlsSecurity === \"no_host_verification\") {\n                        throw new errors_1.InterfaceError(`'tlsSecurity' value (${_tlsSecurity}) conflicts with ` +\n                            `EDGEDB_CLIENT_SECURITY value (${clientSecurity}), ` +\n                            `'tlsSecurity' value cannot be lower than security level ` +\n                            `set by EDGEDB_CLIENT_SECURITY`);\n                    }\n                    _tlsSecurity = \"strict\";\n                }\n            }\n            return _tlsSecurity;\n        });\n    }\n    setWaitUntilAvailable(duration, source) {\n        return this._setParam(\"waitUntilAvailable\", duration, source, parseDuration);\n    }\n    addServerSettings(settings) {\n        this.serverSettings = {\n            ...settings,\n            ...this.serverSettings,\n        };\n    }\n    get address() {\n        var _a, _b;\n        return [(_a = this._host) !== null && _a !== void 0 ? _a : \"localhost\", (_b = this._port) !== null && _b !== void 0 ? _b : 5656];\n    }\n    get database() {\n        var _a;\n        return (_a = this._database) !== null && _a !== void 0 ? _a : \"edgedb\";\n    }\n    get user() {\n        var _a;\n        return (_a = this._user) !== null && _a !== void 0 ? _a : \"edgedb\";\n    }\n    get password() {\n        var _a;\n        return (_a = this._password) !== null && _a !== void 0 ? _a : undefined;\n    }\n    get secretKey() {\n        var _a;\n        return (_a = this._secretKey) !== null && _a !== void 0 ? _a : undefined;\n    }\n    get cloudProfile() {\n        var _a;\n        return (_a = this._cloudProfile) !== null && _a !== void 0 ? _a : \"default\";\n    }\n    get tlsSecurity() {\n        return this._tlsSecurity && this._tlsSecurity !== \"default\"\n            ? this._tlsSecurity\n            : this._tlsCAData !== null\n                ? \"no_host_verification\"\n                : \"strict\";\n    }\n    get waitUntilAvailable() {\n        var _a;\n        return (_a = this._waitUntilAvailable) !== null && _a !== void 0 ? _a : 30000;\n    }\n    explainConfig() {\n        const output = [\n            `Parameter          Value                                    Source`,\n            `---------          -----                                    ------`,\n        ];\n        const outputLine = (param, val, rawVal, source) => {\n            var _a;\n            const isDefault = rawVal === null;\n            const maxValLength = 40 - (isDefault ? 10 : 0);\n            let value = String(val);\n            if (value.length > maxValLength) {\n                value = value.slice(0, maxValLength - 3) + \"...\";\n            }\n            output.push((_a = param.padEnd(19, \" \") +\n                (value + (isDefault ? \" (default)\" : \"\")).padEnd(42, \" \") +\n                source) !== null && _a !== void 0 ? _a : \"default\");\n        };\n        outputLine(\"host\", this.address[0], this._host, this._hostSource);\n        outputLine(\"port\", this.address[1], this._port, this._portSource);\n        outputLine(\"database\", this.database, this._database, this._databaseSource);\n        outputLine(\"user\", this.user, this._user, this._userSource);\n        outputLine(\"password\", this.password &&\n            this.password.slice(0, 3).padEnd(this.password.length, \"*\"), this._password, this._passwordSource);\n        outputLine(\"tlsCAData\", this._tlsCAData && this._tlsCAData.replace(/\\r\\n?|\\n/, \"\"), this._tlsCAData, this._tlsCADataSource);\n        outputLine(\"tlsSecurity\", this.tlsSecurity, this._tlsSecurity, this._tlsSecuritySource);\n        outputLine(\"waitUntilAvailable\", this.waitUntilAvailable, this._waitUntilAvailable, this._waitUntilAvailableSource);\n        return output.join(\"\\n\");\n    }\n}\nexports.ResolvedConnectConfig = ResolvedConnectConfig;\nfunction parseValidatePort(port) {\n    let parsedPort;\n    if (typeof port === \"string\") {\n        if (!/^\\d*$/.test(port)) {\n            throw new errors_1.InterfaceError(`invalid port: ${port}`);\n        }\n        parsedPort = parseInt(port, 10);\n        if (Number.isNaN(parsedPort)) {\n            throw new errors_1.InterfaceError(`invalid port: ${port}`);\n        }\n    }\n    else {\n        parsedPort = port;\n    }\n    if (!Number.isInteger(parsedPort) || parsedPort < 1 || parsedPort > 65535) {\n        throw new errors_1.InterfaceError(`invalid port: ${port}`);\n    }\n    return parsedPort;\n}\nfunction validateHost(host) {\n    if (host.includes(\"/\")) {\n        throw new errors_1.InterfaceError(`unix socket paths not supported`);\n    }\n    if (!host.length || host.includes(\",\")) {\n        throw new errors_1.InterfaceError(`invalid host: '${host}'`);\n    }\n    return host;\n}\nfunction parseDuration(duration) {\n    if (typeof duration === \"number\") {\n        if (duration < 0) {\n            throw new errors_1.InterfaceError(\"invalid waitUntilAvailable duration, must be >= 0\");\n        }\n        return duration;\n    }\n    if (typeof duration === \"string\") {\n        if (duration.startsWith(\"P\")) {\n            duration = datetime_1.Duration.from(duration);\n        }\n        else {\n            return (0, datetime_1.parseHumanDurationString)(duration);\n        }\n    }\n    if (duration instanceof datetime_1.Duration) {\n        const invalidField = (0, datetime_2.checkValidEdgeDBDuration)(duration);\n        if (invalidField) {\n            throw new errors_1.InterfaceError(`invalid waitUntilAvailable duration, cannot have a '${invalidField}' value`);\n        }\n        if (duration.sign < 0) {\n            throw new errors_1.InterfaceError(\"invalid waitUntilAvailable duration, must be >= 0\");\n        }\n        return (duration.milliseconds +\n            duration.seconds * 1000 +\n            duration.minutes * 60000 +\n            duration.hours * 3600000);\n    }\n    throw new errors_1.InterfaceError(`invalid duration`);\n}\nexports.parseDuration = parseDuration;\nasync function parseConnectDsnAndArgs(config, serverUtils) {\n    const resolvedConfig = new ResolvedConnectConfig();\n    let fromEnv = false;\n    let fromProject = false;\n    const [dsn, instanceName] = config.instanceName == null &&\n        config.dsn != null &&\n        !/^[a-z]+:\\/\\//i.test(config.dsn)\n        ? [undefined, config.dsn]\n        : [config.dsn, config.instanceName];\n    let { hasCompoundOptions } = await resolveConfigOptions(resolvedConfig, {\n        dsn,\n        instanceName,\n        credentials: config.credentials,\n        credentialsFile: config.credentialsFile,\n        host: config.host,\n        port: config.port,\n        database: config.database,\n        user: config.user,\n        password: config.password,\n        secretKey: config.secretKey,\n        tlsCA: config.tlsCA,\n        tlsCAFile: config.tlsCAFile,\n        tlsSecurity: config.tlsSecurity,\n        serverSettings: config.serverSettings,\n        waitUntilAvailable: config.waitUntilAvailable,\n    }, {\n        dsn: `'dsnOrInstanceName' option (parsed as dsn)`,\n        instanceName: config.instanceName != null\n            ? `'instanceName' option`\n            : `'dsnOrInstanceName' option (parsed as instance name)`,\n        credentials: `'credentials' option`,\n        credentialsFile: `'credentialsFile' option`,\n        host: `'host' option`,\n        port: `'port' option`,\n        database: `'database' option`,\n        user: `'user' option`,\n        password: `'password' option`,\n        secretKey: `'secretKey' option`,\n        tlsCA: `'tlsCA' option`,\n        tlsCAFile: `'tlsCAFile' option`,\n        tlsSecurity: `'tlsSecurity' option`,\n        serverSettings: `'serverSettings' option`,\n        waitUntilAvailable: `'waitUntilAvailable' option`,\n    }, `Cannot have more than one of the following connection options: ` +\n        `'dsn', 'instanceName', 'credentials', 'credentialsFile' or 'host'/'port'`, serverUtils);\n    if (!hasCompoundOptions) {\n        let port = (0, adapter_shared_node_1.getEnv)(\"EDGEDB_PORT\");\n        if (resolvedConfig._port === null && (port === null || port === void 0 ? void 0 : port.startsWith(\"tcp://\"))) {\n            console.warn(`EDGEDB_PORT in 'tcp://host:port' format, so will be ignored`);\n            port = undefined;\n        }\n        ({ hasCompoundOptions, anyOptionsUsed: fromEnv } =\n            await resolveConfigOptions(resolvedConfig, {\n                dsn: (0, adapter_shared_node_1.getEnv)(\"EDGEDB_DSN\"),\n                instanceName: (0, adapter_shared_node_1.getEnv)(\"EDGEDB_INSTANCE\"),\n                credentials: (0, adapter_shared_node_1.getEnv)(\"EDGEDB_CREDENTIALS\"),\n                credentialsFile: (0, adapter_shared_node_1.getEnv)(\"EDGEDB_CREDENTIALS_FILE\"),\n                host: (0, adapter_shared_node_1.getEnv)(\"EDGEDB_HOST\"),\n                port,\n                database: (0, adapter_shared_node_1.getEnv)(\"EDGEDB_DATABASE\"),\n                user: (0, adapter_shared_node_1.getEnv)(\"EDGEDB_USER\"),\n                password: (0, adapter_shared_node_1.getEnv)(\"EDGEDB_PASSWORD\"),\n                secretKey: (0, adapter_shared_node_1.getEnv)(\"EDGEDB_SECRET_KEY\"),\n                cloudProfile: (0, adapter_shared_node_1.getEnv)(\"EDGEDB_CLOUD_PROFILE\"),\n                tlsCA: (0, adapter_shared_node_1.getEnv)(\"EDGEDB_TLS_CA\"),\n                tlsCAFile: (0, adapter_shared_node_1.getEnv)(\"EDGEDB_TLS_CA_FILE\"),\n                tlsSecurity: (0, adapter_shared_node_1.getEnv)(\"EDGEDB_CLIENT_TLS_SECURITY\"),\n                waitUntilAvailable: (0, adapter_shared_node_1.getEnv)(\"EDGEDB_WAIT_UNTIL_AVAILABLE\"),\n            }, {\n                dsn: `'EDGEDB_DSN' environment variable`,\n                instanceName: `'EDGEDB_INSTANCE' environment variable`,\n                credentials: `'EDGEDB_CREDENTIALS' environment variable`,\n                credentialsFile: `'EDGEDB_CREDENTIALS_FILE' environment variable`,\n                host: `'EDGEDB_HOST' environment variable`,\n                port: `'EDGEDB_PORT' environment variable`,\n                database: `'EDGEDB_DATABASE' environment variable`,\n                user: `'EDGEDB_USER' environment variable`,\n                password: `'EDGEDB_PASSWORD' environment variable`,\n                secretKey: `'EDGEDB_SECRET_KEY' environment variable`,\n                cloudProfile: `'EDGEDB_CLOUD_PROFILE' environment variable`,\n                tlsCA: `'EDGEDB_TLS_CA' environment variable`,\n                tlsCAFile: `'EDGEDB_TLS_CA_FILE' environment variable`,\n                tlsSecurity: `'EDGEDB_CLIENT_TLS_SECURITY' environment variable`,\n                waitUntilAvailable: `'EDGEDB_WAIT_UNTIL_AVAILABLE' environment variable`,\n            }, `Cannot have more than one of the following connection environment variables: ` +\n                `'EDGEDB_DSN', 'EDGEDB_INSTANCE', 'EDGEDB_CREDENTIALS', ` +\n                `'EDGEDB_CREDENTIALS_FILE' or 'EDGEDB_HOST'`, serverUtils));\n    }\n    if (!hasCompoundOptions) {\n        if (!serverUtils) {\n            throw new errors.ClientConnectionError(\"no connection options specified either by arguments to `createClient` API \" +\n                \"or environment variables; also cannot resolve from edgedb.toml in browser \" +\n                \"(or edge runtime) environment\");\n        }\n        const projectDir = await (serverUtils === null || serverUtils === void 0 ? void 0 : serverUtils.findProjectDir());\n        if (!projectDir) {\n            throw new errors.ClientConnectionError(\"no 'edgedb.toml' found and no connection options specified\" +\n                \" either via arguments to `createClient()` API or via environment\" +\n                \" variables EDGEDB_HOST, EDGEDB_INSTANCE, EDGEDB_DSN, \" +\n                \"EDGEDB_CREDENTIALS or EDGEDB_CREDENTIALS_FILE\");\n        }\n        const stashDir = await serverUtils.findStashPath(projectDir);\n        const instName = await serverUtils\n            .readFileUtf8(stashDir, \"instance-name\")\n            .then((name) => name.trim())\n            .catch(() => null);\n        if (instName !== null) {\n            const [cloudProfile, database] = await Promise.all([\n                serverUtils\n                    .readFileUtf8(stashDir, \"cloud-profile\")\n                    .then((name) => name.trim())\n                    .catch(() => undefined),\n                serverUtils\n                    .readFileUtf8(stashDir, \"database\")\n                    .then((name) => name.trim())\n                    .catch(() => undefined),\n            ]);\n            await resolveConfigOptions(resolvedConfig, { instanceName: instName, cloudProfile, database }, {\n                instanceName: `project linked instance ('${instName}')`,\n                cloudProfile: `project defined cloud instance ('${cloudProfile}')`,\n                database: `project default database`,\n            }, \"\", serverUtils);\n            fromProject = true;\n        }\n        else {\n            throw new errors.ClientConnectionError(\"Found 'edgedb.toml' but the project is not initialized. \" +\n                \"Run `edgedb project init`.\");\n        }\n    }\n    resolvedConfig.setTlsSecurity(\"default\", \"default\");\n    return {\n        connectionParams: resolvedConfig,\n        inProject: async () => (await (serverUtils === null || serverUtils === void 0 ? void 0 : serverUtils.findProjectDir(false))) != null,\n        fromEnv,\n        fromProject,\n    };\n}\nasync function resolveConfigOptions(resolvedConfig, config, sources, compoundParamsError, serverUtils) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v;\n    let anyOptionsUsed = false;\n    const readFile = (_a = serverUtils === null || serverUtils === void 0 ? void 0 : serverUtils.readFileUtf8) !== null && _a !== void 0 ? _a : ((fn) => {\n        throw new errors_1.InterfaceError(`cannot read file \"${fn}\" in browser (or edge runtime) environment`);\n    });\n    if (config.tlsCA != null && config.tlsCAFile != null) {\n        throw new errors_1.InterfaceError(`Cannot specify both ${sources.tlsCA} and ${sources.tlsCAFile}`);\n    }\n    anyOptionsUsed =\n        resolvedConfig.setDatabase((_b = config.database) !== null && _b !== void 0 ? _b : null, sources.database) ||\n            anyOptionsUsed;\n    anyOptionsUsed =\n        resolvedConfig.setUser((_c = config.user) !== null && _c !== void 0 ? _c : null, sources.user) ||\n            anyOptionsUsed;\n    anyOptionsUsed =\n        resolvedConfig.setPassword((_d = config.password) !== null && _d !== void 0 ? _d : null, sources.password) ||\n            anyOptionsUsed;\n    anyOptionsUsed =\n        resolvedConfig.setSecretKey((_e = config.secretKey) !== null && _e !== void 0 ? _e : null, sources.secretKey) ||\n            anyOptionsUsed;\n    anyOptionsUsed =\n        resolvedConfig.setCloudProfile((_f = config.cloudProfile) !== null && _f !== void 0 ? _f : null, sources.cloudProfile) || anyOptionsUsed;\n    anyOptionsUsed =\n        resolvedConfig.setTlsCAData((_g = config.tlsCA) !== null && _g !== void 0 ? _g : null, sources.tlsCA) ||\n            anyOptionsUsed;\n    anyOptionsUsed =\n        (await resolvedConfig.setTlsCAFile((_h = config.tlsCAFile) !== null && _h !== void 0 ? _h : null, sources.tlsCAFile, readFile)) || anyOptionsUsed;\n    anyOptionsUsed =\n        resolvedConfig.setTlsSecurity((_j = config.tlsSecurity) !== null && _j !== void 0 ? _j : null, sources.tlsSecurity) || anyOptionsUsed;\n    anyOptionsUsed =\n        resolvedConfig.setWaitUntilAvailable((_k = config.waitUntilAvailable) !== null && _k !== void 0 ? _k : null, sources.waitUntilAvailable) || anyOptionsUsed;\n    resolvedConfig.addServerSettings((_l = config.serverSettings) !== null && _l !== void 0 ? _l : {});\n    const compoundParamsCount = [\n        config.dsn,\n        config.instanceName,\n        config.credentials,\n        config.credentialsFile,\n        (_m = config.host) !== null && _m !== void 0 ? _m : config.port,\n    ].filter((param) => param !== undefined).length;\n    if (compoundParamsCount > 1) {\n        throw new errors_1.InterfaceError(compoundParamsError);\n    }\n    if (compoundParamsCount === 1) {\n        if (config.dsn !== undefined ||\n            config.host !== undefined ||\n            config.port !== undefined) {\n            let dsn = config.dsn;\n            if (dsn === undefined) {\n                if (config.port !== undefined) {\n                    resolvedConfig.setPort(config.port, sources.port);\n                }\n                const host = config.host != null ? validateHost(config.host) : \"\";\n                dsn = `edgedb://${host.includes(\":\") ? `[${encodeURI(host)}]` : host}`;\n            }\n            await parseDSNIntoConfig(dsn, resolvedConfig, config.dsn\n                ? sources.dsn\n                : config.host !== undefined\n                    ? sources.host\n                    : sources.port, readFile);\n        }\n        else {\n            let creds;\n            let source;\n            if (config.credentials != null) {\n                creds = (0, credentials_1.validateCredentials)(JSON.parse(config.credentials));\n                source = sources.credentials;\n            }\n            else {\n                if (!serverUtils && !((_o = config.instanceName) === null || _o === void 0 ? void 0 : _o.includes(\"/\"))) {\n                    throw new errors_1.InterfaceError(`cannot ${config.credentialsFile\n                        ? `read credentials file \"${config.credentialsFile}\"`\n                        : `resolve instance name \"${config.instanceName}\"`} in browser (or edge runtime) environment`);\n                }\n                let credentialsFile = config.credentialsFile;\n                if (credentialsFile === undefined) {\n                    if (/^\\w(-?\\w)*$/.test(config.instanceName)) {\n                        credentialsFile = await (0, credentials_1.getCredentialsPath)(config.instanceName, serverUtils);\n                        source = sources.instanceName;\n                    }\n                    else {\n                        if (!/^([A-Za-z0-9](-?[A-Za-z0-9])*)\\/([A-Za-z0-9](-?[A-Za-z0-9])*)$/.test(config.instanceName)) {\n                            throw new errors_1.InterfaceError(`invalid DSN or instance name: '${config.instanceName}'`);\n                        }\n                        await parseCloudInstanceNameIntoConfig(resolvedConfig, config.instanceName, sources.instanceName, serverUtils);\n                        return { hasCompoundOptions: true, anyOptionsUsed: true };\n                    }\n                }\n                else {\n                    source = sources.credentialsFile;\n                }\n                creds = await (0, credentials_1.readCredentialsFile)(credentialsFile, serverUtils);\n            }\n            resolvedConfig.setHost((_p = creds.host) !== null && _p !== void 0 ? _p : null, source);\n            resolvedConfig.setPort((_q = creds.port) !== null && _q !== void 0 ? _q : null, source);\n            resolvedConfig.setDatabase((_r = creds.database) !== null && _r !== void 0 ? _r : null, source);\n            resolvedConfig.setUser((_s = creds.user) !== null && _s !== void 0 ? _s : null, source);\n            resolvedConfig.setPassword((_t = creds.password) !== null && _t !== void 0 ? _t : null, source);\n            resolvedConfig.setTlsCAData((_u = creds.tlsCAData) !== null && _u !== void 0 ? _u : null, source);\n            resolvedConfig.setTlsSecurity((_v = creds.tlsSecurity) !== null && _v !== void 0 ? _v : null, source);\n        }\n        return { hasCompoundOptions: true, anyOptionsUsed: true };\n    }\n    return { hasCompoundOptions: false, anyOptionsUsed };\n}\nasync function parseDSNIntoConfig(_dsnString, config, source, readFile) {\n    let dsnString = _dsnString;\n    let regexHostname = null;\n    let zoneId = \"\";\n    const regexResult = /\\[(.*?)(%25.+?)\\]/.exec(_dsnString);\n    if (regexResult) {\n        regexHostname = regexResult[1];\n        zoneId = decodeURI(regexResult[2]);\n        dsnString =\n            dsnString.slice(0, regexResult.index + regexHostname.length + 1) +\n                dsnString.slice(regexResult.index + regexHostname.length + regexResult[2].length + 1);\n    }\n    let parsed;\n    try {\n        parsed = new URL(dsnString);\n        if (regexHostname !== null && parsed.hostname !== `[${regexHostname}]`) {\n            throw new Error();\n        }\n    }\n    catch (_) {\n        throw new errors_1.InterfaceError(`invalid DSN or instance name: '${_dsnString}'`);\n    }\n    if (parsed.protocol !== \"edgedb:\") {\n        throw new errors_1.InterfaceError(`invalid DSN: scheme is expected to be ` +\n            `'edgedb', got '${parsed.protocol.slice(0, -1)}'`);\n    }\n    const searchParams = new Map();\n    for (const [key, value] of parsed.searchParams) {\n        if (searchParams.has(key)) {\n            throw new errors_1.InterfaceError(`invalid DSN: duplicate query parameter '${key}'`);\n        }\n        searchParams.set(key, value);\n    }\n    async function handleDSNPart(paramName, value, currentValue, setter, formatter = (val) => val) {\n        var _a, _b;\n        if ([\n            value || null,\n            searchParams.get(paramName),\n            searchParams.get(`${paramName}_env`),\n            searchParams.get(`${paramName}_file`),\n        ].filter((param) => param != null).length > 1) {\n            throw new errors_1.InterfaceError(`invalid DSN: more than one of ${value !== null ? `'${paramName}', ` : \"\"}'?${paramName}=', ` +\n                `'?${paramName}_env=' or '?${paramName}_file=' was specified ${dsnString}`);\n        }\n        if (currentValue === null) {\n            let param = value || ((_a = searchParams.get(paramName)) !== null && _a !== void 0 ? _a : null);\n            let paramSource = source;\n            if (param === null) {\n                const env = searchParams.get(`${paramName}_env`);\n                if (env != null) {\n                    param = (_b = (0, adapter_shared_node_1.getEnv)(env, true)) !== null && _b !== void 0 ? _b : null;\n                    if (param === null) {\n                        throw new errors_1.InterfaceError(`'${paramName}_env' environment variable '${env}' doesn't exist`);\n                    }\n                    paramSource += ` (${paramName}_env: ${env})`;\n                }\n            }\n            if (param === null) {\n                const file = searchParams.get(`${paramName}_file`);\n                if (file != null) {\n                    param = await readFile(file);\n                    paramSource += ` (${paramName}_file: ${file})`;\n                }\n            }\n            param = param !== null ? formatter(param) : null;\n            await setter(param, paramSource);\n        }\n        searchParams.delete(paramName);\n        searchParams.delete(`${paramName}_env`);\n        searchParams.delete(`${paramName}_file`);\n    }\n    const hostname = /^\\[.*\\]$/.test(parsed.hostname)\n        ? parsed.hostname.slice(1, -1) + zoneId\n        : parsed.hostname;\n    await handleDSNPart(\"host\", hostname, config._host, config.setHost);\n    await handleDSNPart(\"port\", parsed.port, config._port, config.setPort);\n    const stripLeadingSlash = (str) => str.replace(/^\\//, \"\");\n    await handleDSNPart(\"database\", stripLeadingSlash(parsed.pathname), config._database, config.setDatabase, stripLeadingSlash);\n    await handleDSNPart(\"user\", parsed.username, config._user, config.setUser);\n    await handleDSNPart(\"password\", parsed.password, config._password, config.setPassword);\n    await handleDSNPart(\"secret_key\", null, config._secretKey, config.setSecretKey);\n    await handleDSNPart(\"tls_ca\", null, config._tlsCAData, config.setTlsCAData);\n    await handleDSNPart(\"tls_ca_file\", null, config._tlsCAData, (val, _source) => config.setTlsCAFile(val, _source, readFile));\n    await handleDSNPart(\"tls_security\", null, config._tlsSecurity, config.setTlsSecurity);\n    await handleDSNPart(\"wait_until_available\", null, config._waitUntilAvailable, config.setWaitUntilAvailable);\n    const serverSettings = {};\n    for (const [key, value] of searchParams) {\n        serverSettings[key] = value;\n    }\n    config.addServerSettings(serverSettings);\n}\nasync function parseCloudInstanceNameIntoConfig(config, cloudInstanceName, source, serverUtils) {\n    const normInstanceName = cloudInstanceName.toLowerCase();\n    const [org, instanceName] = normInstanceName.split(\"/\");\n    const domainName = `${instanceName}--${org}`;\n    if (domainName.length > DOMAIN_NAME_MAX_LEN) {\n        throw new errors_1.InterfaceError(`invalid instance name: cloud instance name length cannot exceed ${DOMAIN_NAME_MAX_LEN - 1} characters: ${cloudInstanceName}`);\n    }\n    let secretKey = config.secretKey;\n    if (secretKey == null) {\n        try {\n            if (!serverUtils) {\n                throw new errors_1.InterfaceError(`Cannot get secret key from cloud profile in browser (or edge runtime) environment`);\n            }\n            const profile = config.cloudProfile;\n            const profilePath = await serverUtils.searchConfigDir(\"cloud-credentials\", `${profile}.json`);\n            const fileData = await serverUtils.readFileUtf8(profilePath);\n            secretKey = JSON.parse(fileData)[\"secret_key\"];\n            if (!secretKey) {\n                throw new errors_1.InterfaceError(`Cloud profile '${profile}' doesn't contain a secret key`);\n            }\n            config.setSecretKey(secretKey, `cloud-credentials/${profile}.json`);\n        }\n        catch (e) {\n            throw new errors_1.InterfaceError(`Cannot connect to cloud instances without a secret key: ${e}`);\n        }\n    }\n    try {\n        const keyParts = secretKey.split(\".\");\n        if (keyParts.length < 2) {\n            throw new errors_1.InterfaceError(\"Invalid secret key: does not contain payload\");\n        }\n        const dnsZone = _jwtBase64Decode(keyParts[1])[\"iss\"];\n        if (!dnsZone) {\n            throw new errors_1.InterfaceError(\"Invalid secret key: payload does not contain 'iss' value\");\n        }\n        const dnsBucket = ((0, crcHqx_1.crcHqx)(buffer_1.utf8Encoder.encode(normInstanceName), 0) % 100)\n            .toString(10)\n            .padStart(2, \"0\");\n        const host = `${domainName}.c-${dnsBucket}.i.${dnsZone}`;\n        config.setHost(host, `resolved from 'secretKey' and ${source}`);\n    }\n    catch (e) {\n        if (e instanceof errors.EdgeDBError) {\n            throw e;\n        }\n        else {\n            throw new errors_1.InterfaceError(`Invalid secret key: ${e}`);\n        }\n    }\n}\nfunction _jwtBase64Decode(payload) {\n    return JSON.parse(buffer_1.utf8Decoder.decode((0, buffer_1.decodeB64)(payload.padEnd(Math.ceil(payload.length / 4) * 4, \"=\"))));\n}\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2019-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.errorMapping = void 0;\nconst errors = __importStar(require(\"./index\"));\nexports.errorMapping = new Map();\nexports.errorMapping.set(16777216, errors.InternalServerError);\nexports.errorMapping.set(33554432, errors.UnsupportedFeatureError);\nexports.errorMapping.set(50331648, errors.ProtocolError);\nexports.errorMapping.set(50397184, errors.BinaryProtocolError);\nexports.errorMapping.set(50397185, errors.UnsupportedProtocolVersionError);\nexports.errorMapping.set(50397186, errors.TypeSpecNotFoundError);\nexports.errorMapping.set(50397187, errors.UnexpectedMessageError);\nexports.errorMapping.set(50462720, errors.InputDataError);\nexports.errorMapping.set(50462976, errors.ParameterTypeMismatchError);\nexports.errorMapping.set(50463232, errors.StateMismatchError);\nexports.errorMapping.set(50528256, errors.ResultCardinalityMismatchError);\nexports.errorMapping.set(50593792, errors.CapabilityError);\nexports.errorMapping.set(50594048, errors.UnsupportedCapabilityError);\nexports.errorMapping.set(50594304, errors.DisabledCapabilityError);\nexports.errorMapping.set(67108864, errors.QueryError);\nexports.errorMapping.set(67174400, errors.InvalidSyntaxError);\nexports.errorMapping.set(67174656, errors.EdgeQLSyntaxError);\nexports.errorMapping.set(67174912, errors.SchemaSyntaxError);\nexports.errorMapping.set(67175168, errors.GraphQLSyntaxError);\nexports.errorMapping.set(67239936, errors.InvalidTypeError);\nexports.errorMapping.set(67240192, errors.InvalidTargetError);\nexports.errorMapping.set(67240193, errors.InvalidLinkTargetError);\nexports.errorMapping.set(67240194, errors.InvalidPropertyTargetError);\nexports.errorMapping.set(67305472, errors.InvalidReferenceError);\nexports.errorMapping.set(67305473, errors.UnknownModuleError);\nexports.errorMapping.set(67305474, errors.UnknownLinkError);\nexports.errorMapping.set(67305475, errors.UnknownPropertyError);\nexports.errorMapping.set(67305476, errors.UnknownUserError);\nexports.errorMapping.set(67305477, errors.UnknownDatabaseError);\nexports.errorMapping.set(67305478, errors.UnknownParameterError);\nexports.errorMapping.set(67371008, errors.SchemaError);\nexports.errorMapping.set(67436544, errors.SchemaDefinitionError);\nexports.errorMapping.set(67436800, errors.InvalidDefinitionError);\nexports.errorMapping.set(67436801, errors.InvalidModuleDefinitionError);\nexports.errorMapping.set(67436802, errors.InvalidLinkDefinitionError);\nexports.errorMapping.set(67436803, errors.InvalidPropertyDefinitionError);\nexports.errorMapping.set(67436804, errors.InvalidUserDefinitionError);\nexports.errorMapping.set(67436805, errors.InvalidDatabaseDefinitionError);\nexports.errorMapping.set(67436806, errors.InvalidOperatorDefinitionError);\nexports.errorMapping.set(67436807, errors.InvalidAliasDefinitionError);\nexports.errorMapping.set(67436808, errors.InvalidFunctionDefinitionError);\nexports.errorMapping.set(67436809, errors.InvalidConstraintDefinitionError);\nexports.errorMapping.set(67436810, errors.InvalidCastDefinitionError);\nexports.errorMapping.set(67437056, errors.DuplicateDefinitionError);\nexports.errorMapping.set(67437057, errors.DuplicateModuleDefinitionError);\nexports.errorMapping.set(67437058, errors.DuplicateLinkDefinitionError);\nexports.errorMapping.set(67437059, errors.DuplicatePropertyDefinitionError);\nexports.errorMapping.set(67437060, errors.DuplicateUserDefinitionError);\nexports.errorMapping.set(67437061, errors.DuplicateDatabaseDefinitionError);\nexports.errorMapping.set(67437062, errors.DuplicateOperatorDefinitionError);\nexports.errorMapping.set(67437063, errors.DuplicateViewDefinitionError);\nexports.errorMapping.set(67437064, errors.DuplicateFunctionDefinitionError);\nexports.errorMapping.set(67437065, errors.DuplicateConstraintDefinitionError);\nexports.errorMapping.set(67437066, errors.DuplicateCastDefinitionError);\nexports.errorMapping.set(67437067, errors.DuplicateMigrationError);\nexports.errorMapping.set(67502080, errors.SessionTimeoutError);\nexports.errorMapping.set(67502336, errors.IdleSessionTimeoutError);\nexports.errorMapping.set(67502592, errors.QueryTimeoutError);\nexports.errorMapping.set(67504640, errors.TransactionTimeoutError);\nexports.errorMapping.set(67504641, errors.IdleTransactionTimeoutError);\nexports.errorMapping.set(83886080, errors.ExecutionError);\nexports.errorMapping.set(83951616, errors.InvalidValueError);\nexports.errorMapping.set(83951617, errors.DivisionByZeroError);\nexports.errorMapping.set(83951618, errors.NumericOutOfRangeError);\nexports.errorMapping.set(83951619, errors.AccessPolicyError);\nexports.errorMapping.set(83951620, errors.QueryAssertionError);\nexports.errorMapping.set(84017152, errors.IntegrityError);\nexports.errorMapping.set(84017153, errors.ConstraintViolationError);\nexports.errorMapping.set(84017154, errors.CardinalityViolationError);\nexports.errorMapping.set(84017155, errors.MissingRequiredError);\nexports.errorMapping.set(84082688, errors.TransactionError);\nexports.errorMapping.set(84082944, errors.TransactionConflictError);\nexports.errorMapping.set(84082945, errors.TransactionSerializationError);\nexports.errorMapping.set(84082946, errors.TransactionDeadlockError);\nexports.errorMapping.set(84148224, errors.WatchError);\nexports.errorMapping.set(100663296, errors.ConfigurationError);\nexports.errorMapping.set(117440512, errors.AccessError);\nexports.errorMapping.set(117506048, errors.AuthenticationError);\nexports.errorMapping.set(134217728, errors.AvailabilityError);\nexports.errorMapping.set(134217729, errors.BackendUnavailableError);\nexports.errorMapping.set(150994944, errors.BackendError);\nexports.errorMapping.set(150995200, errors.UnsupportedBackendFeatureError);\nexports.errorMapping.set(4026531840, errors.LogMessage);\nexports.errorMapping.set(4026597376, errors.WarningMessage);\nexports.errorMapping.set(4278190080, errors.ClientError);\nexports.errorMapping.set(4278255616, errors.ClientConnectionError);\nexports.errorMapping.set(4278255872, errors.ClientConnectionFailedError);\nexports.errorMapping.set(4278255873, errors.ClientConnectionFailedTemporarilyError);\nexports.errorMapping.set(4278256128, errors.ClientConnectionTimeoutError);\nexports.errorMapping.set(4278256384, errors.ClientConnectionClosedError);\nexports.errorMapping.set(4278321152, errors.InterfaceError);\nexports.errorMapping.set(4278321408, errors.QueryArgumentError);\nexports.errorMapping.set(4278321409, errors.MissingArgumentError);\nexports.errorMapping.set(4278321410, errors.UnknownArgumentError);\nexports.errorMapping.set(4278321411, errors.InvalidArgumentError);\nexports.errorMapping.set(4278386688, errors.NoDataError);\nexports.errorMapping.set(4278452224, errors.InternalClientError);\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2019-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.resolveErrorCode = void 0;\nconst errors = __importStar(require(\"./index\"));\nconst map_1 = require(\"./map\");\nfunction resolveErrorCode(code) {\n    let result;\n    result = map_1.errorMapping.get(code);\n    if (result) {\n        return result;\n    }\n    code = code & 4294967040;\n    result = map_1.errorMapping.get(code);\n    if (result) {\n        return result;\n    }\n    code = code & 4294901760;\n    result = map_1.errorMapping.get(code);\n    if (result) {\n        return result;\n    }\n    code = code & 4278190080;\n    result = map_1.errorMapping.get(code);\n    if (result) {\n        return result;\n    }\n    return errors.EdgeDBError;\n}\nexports.resolveErrorCode = resolveErrorCode;\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2019-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BaseRawConnection = exports.Capabilities = exports.PROTO_VER_MIN = exports.PROTO_VER = void 0;\nconst codecs_1 = require(\"./codecs/codecs\");\nconst namedtuple_1 = require(\"./codecs/namedtuple\");\nconst object_1 = require(\"./codecs/object\");\nconst tuple_1 = require(\"./codecs/tuple\");\nconst utils_1 = require(\"./utils\");\nconst errors = __importStar(require(\"./errors\"));\nconst resolve_1 = require(\"./errors/resolve\");\nconst ifaces_1 = require(\"./ifaces\");\nconst buffer_1 = require(\"./primitives/buffer\");\nconst chars = __importStar(require(\"./primitives/chars\"));\nconst event_1 = __importDefault(require(\"./primitives/event\"));\nconst lru_1 = __importDefault(require(\"./primitives/lru\"));\nconst options_1 = require(\"./options\");\nexports.PROTO_VER = [1, 0];\nexports.PROTO_VER_MIN = [0, 9];\nvar TransactionStatus;\n(function (TransactionStatus) {\n    TransactionStatus[TransactionStatus[\"TRANS_IDLE\"] = 0] = \"TRANS_IDLE\";\n    TransactionStatus[TransactionStatus[\"TRANS_ACTIVE\"] = 1] = \"TRANS_ACTIVE\";\n    TransactionStatus[TransactionStatus[\"TRANS_INTRANS\"] = 2] = \"TRANS_INTRANS\";\n    TransactionStatus[TransactionStatus[\"TRANS_INERROR\"] = 3] = \"TRANS_INERROR\";\n    TransactionStatus[TransactionStatus[\"TRANS_UNKNOWN\"] = 4] = \"TRANS_UNKNOWN\";\n})(TransactionStatus || (TransactionStatus = {}));\nvar Capabilities;\n(function (Capabilities) {\n    Capabilities[Capabilities[\"NONE\"] = 0] = \"NONE\";\n    Capabilities[Capabilities[\"MODIFICATONS\"] = 1] = \"MODIFICATONS\";\n    Capabilities[Capabilities[\"SESSION_CONFIG\"] = 2] = \"SESSION_CONFIG\";\n    Capabilities[Capabilities[\"TRANSACTION\"] = 4] = \"TRANSACTION\";\n    Capabilities[Capabilities[\"DDL\"] = 8] = \"DDL\";\n    Capabilities[Capabilities[\"PERSISTENT_CONFIG\"] = 16] = \"PERSISTENT_CONFIG\";\n    Capabilities[Capabilities[\"SET_GLOBAL\"] = 32] = \"SET_GLOBAL\";\n    Capabilities[Capabilities[\"ALL\"] = 4294967295] = \"ALL\";\n})(Capabilities = exports.Capabilities || (exports.Capabilities = {}));\nconst NO_TRANSACTION_CAPABILITIES = (Capabilities.ALL & ~Capabilities.TRANSACTION) >>> 0;\nconst NO_TRANSACTION_CAPABILITIES_BYTES = new Uint8Array(Array(8).fill(255));\nnew DataView(NO_TRANSACTION_CAPABILITIES_BYTES.buffer).setUint32(4, NO_TRANSACTION_CAPABILITIES);\nconst RESTRICTED_CAPABILITIES = (Capabilities.ALL &\n    ~Capabilities.TRANSACTION &\n    ~Capabilities.SESSION_CONFIG &\n    ~Capabilities.SET_GLOBAL) >>>\n    0;\nconst STUDIO_CAPABILITIES = (RESTRICTED_CAPABILITIES |\n    Capabilities.SESSION_CONFIG |\n    Capabilities.SET_GLOBAL) >>>\n    0;\nvar CompilationFlag;\n(function (CompilationFlag) {\n    CompilationFlag[CompilationFlag[\"INJECT_OUTPUT_TYPE_IDS\"] = 1] = \"INJECT_OUTPUT_TYPE_IDS\";\n    CompilationFlag[CompilationFlag[\"INJECT_OUTPUT_TYPE_NAMES\"] = 2] = \"INJECT_OUTPUT_TYPE_NAMES\";\n    CompilationFlag[CompilationFlag[\"INJECT_OUTPUT_OBJECT_IDS\"] = 4] = \"INJECT_OUTPUT_OBJECT_IDS\";\n})(CompilationFlag || (CompilationFlag = {}));\nconst OLD_ERROR_CODES = new Map([\n    [84082689, 84082945],\n    [84082690, 84082946],\n]);\nclass BaseRawConnection {\n    constructor(registry) {\n        Object.defineProperty(this, \"connected\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"lastStatus\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"codecsRegistry\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"queryCodecCache\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"serverSecret\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"serverSettings\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"serverXactStatus\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"buffer\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"messageWaiter\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"connWaiter\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"connAbortWaiter\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_abortedWith\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"protocolVersion\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: exports.PROTO_VER\n        });\n        Object.defineProperty(this, \"isLegacyProtocol\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"stateCodec\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: codecs_1.INVALID_CODEC\n        });\n        Object.defineProperty(this, \"stateCache\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"lastStateUpdate\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"adminUIMode\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        this.buffer = new buffer_1.ReadMessageBuffer();\n        this.codecsRegistry = registry;\n        this.queryCodecCache = new lru_1.default({ capacity: 1000 });\n        this.lastStatus = null;\n        this.serverSecret = null;\n        this.serverSettings = {};\n        this.serverXactStatus = TransactionStatus.TRANS_UNKNOWN;\n        this.messageWaiter = null;\n        this.connWaiter = new event_1.default();\n        this.connAbortWaiter = new event_1.default();\n    }\n    throwNotImplemented(method) {\n        throw new errors.InternalClientError(`method ${method} is not implemented`);\n    }\n    async _waitForMessage() {\n        this.throwNotImplemented(\"_waitForMessage\");\n    }\n    _sendData(data) {\n        this.throwNotImplemented(\"_sendData\");\n    }\n    getConnAbortError() {\n        var _a;\n        return ((_a = this._abortedWith) !== null && _a !== void 0 ? _a : new errors.InterfaceError(`client has been closed`));\n    }\n    _checkState() {\n        if (this.isClosed()) {\n            throw this.getConnAbortError();\n        }\n    }\n    _abortWithError(err) {\n        this._abortedWith = err;\n        this._abort();\n    }\n    _ignoreHeaders() {\n        let numFields = this.buffer.readInt16();\n        while (numFields) {\n            this.buffer.readInt16();\n            this.buffer.readLenPrefixedBuffer();\n            numFields--;\n        }\n    }\n    _abortWaiters(err) {\n        var _a;\n        if (!this.connWaiter.done) {\n            this.connWaiter.setError(err);\n        }\n        (_a = this.messageWaiter) === null || _a === void 0 ? void 0 : _a.setError(err);\n        this.messageWaiter = null;\n    }\n    _parseHeaders() {\n        const ret = new Map();\n        let numFields = this.buffer.readInt16();\n        while (numFields) {\n            const key = this.buffer.readInt16();\n            const value = this.buffer.readLenPrefixedBuffer();\n            ret.set(key, value);\n            numFields--;\n        }\n        return ret;\n    }\n    _parseDescribeTypeMessage() {\n        let capabilities = -1;\n        if (this.isLegacyProtocol) {\n            const headers = this._parseHeaders();\n            if (headers.has(ifaces_1.LegacyHeaderCodes.capabilities)) {\n                const buf = headers.get(ifaces_1.LegacyHeaderCodes.capabilities);\n                capabilities = Number(new DataView(buf.buffer, buf.byteOffset, buf.byteLength).getBigInt64(0));\n            }\n        }\n        else {\n            this._ignoreHeaders();\n            capabilities = Number(this.buffer.readBigInt64());\n        }\n        const cardinality = this.buffer.readChar();\n        const inTypeId = this.buffer.readUUID();\n        const inTypeData = this.buffer.readLenPrefixedBuffer();\n        const outTypeId = this.buffer.readUUID();\n        const outTypeData = this.buffer.readLenPrefixedBuffer();\n        this.buffer.finishMessage();\n        let inCodec = this.codecsRegistry.getCodec(inTypeId);\n        if (inCodec == null) {\n            inCodec = this.codecsRegistry.buildCodec(inTypeData, this.protocolVersion);\n        }\n        let outCodec = this.codecsRegistry.getCodec(outTypeId);\n        if (outCodec == null) {\n            outCodec = this.codecsRegistry.buildCodec(outTypeData, this.protocolVersion);\n        }\n        return [\n            cardinality,\n            inCodec,\n            outCodec,\n            capabilities,\n            inTypeData,\n            outTypeData,\n        ];\n    }\n    _parseCommandCompleteMessage() {\n        this._ignoreHeaders();\n        let status;\n        if (this.isLegacyProtocol) {\n            status = this.buffer.readString();\n        }\n        else {\n            this.buffer.readBigInt64();\n            status = this.buffer.readString();\n            const stateTypeId = this.buffer.readUUID();\n            const stateData = this.buffer.readLenPrefixedBuffer();\n            if (this.adminUIMode && stateTypeId === this.stateCodec.tid) {\n                this.lastStateUpdate = this.stateCodec.decode(new buffer_1.ReadBuffer(stateData));\n            }\n        }\n        this.buffer.finishMessage();\n        return status;\n    }\n    _parseErrorMessage() {\n        var _a;\n        this.buffer.readChar();\n        const code = this.buffer.readUInt32();\n        const message = this.buffer.readString();\n        const errorType = (0, resolve_1.resolveErrorCode)((_a = OLD_ERROR_CODES.get(code)) !== null && _a !== void 0 ? _a : code);\n        const err = new errorType(message);\n        err._attrs = this._parseHeaders();\n        this.buffer.finishMessage();\n        if (err instanceof errors.AuthenticationError) {\n            throw err;\n        }\n        return err;\n    }\n    _parseSyncMessage() {\n        this._parseHeaders();\n        const status = this.buffer.readChar();\n        switch (status) {\n            case chars.$I:\n                this.serverXactStatus = TransactionStatus.TRANS_IDLE;\n                break;\n            case chars.$T:\n                this.serverXactStatus = TransactionStatus.TRANS_INTRANS;\n                break;\n            case chars.$E:\n                this.serverXactStatus = TransactionStatus.TRANS_INERROR;\n                break;\n            default:\n                this.serverXactStatus = TransactionStatus.TRANS_UNKNOWN;\n        }\n        this.buffer.finishMessage();\n    }\n    _parseDataMessages(codec, result) {\n        const frb = buffer_1.ReadBuffer.alloc();\n        const $D = chars.$D;\n        const buffer = this.buffer;\n        if (Array.isArray(result)) {\n            while (buffer.takeMessageType($D)) {\n                buffer.consumeMessageInto(frb);\n                frb.discard(6);\n                result.push(codec.decode(frb));\n                frb.finish();\n            }\n        }\n        else {\n            while (buffer.takeMessageType($D)) {\n                const msg = buffer.consumeMessage();\n                result.writeChar($D);\n                result.writeInt32(msg.length + 4);\n                result.writeBuffer(msg);\n            }\n        }\n    }\n    _parseServerSettings(name, value) {\n        switch (name) {\n            case \"suggested_pool_concurrency\": {\n                this.serverSettings.suggested_pool_concurrency = parseInt(buffer_1.utf8Decoder.decode(value), 10);\n                break;\n            }\n            case \"system_config\": {\n                const buf = new buffer_1.ReadBuffer(value);\n                const typedescLen = buf.readInt32() - 16;\n                const typedescId = buf.readUUID();\n                const typedesc = buf.readBuffer(typedescLen);\n                let codec = this.codecsRegistry.getCodec(typedescId);\n                if (codec === null) {\n                    codec = this.codecsRegistry.buildCodec(typedesc, this.protocolVersion);\n                }\n                buf.discard(4);\n                const data = codec.decode(buf);\n                buf.finish();\n                this.serverSettings.system_config = data;\n                break;\n            }\n            default:\n                this.serverSettings[name] = value;\n                break;\n        }\n    }\n    _parseDescribeStateMessage() {\n        const typedescId = this.buffer.readUUID();\n        const typedesc = this.buffer.readBuffer(this.buffer.readInt32());\n        let codec = this.codecsRegistry.getCodec(typedescId);\n        if (codec === null) {\n            codec = this.codecsRegistry.buildCodec(typedesc, this.protocolVersion);\n        }\n        this.stateCodec = codec;\n        this.stateCache = null;\n        this.buffer.finishMessage();\n    }\n    _fallthrough() {\n        const mtype = this.buffer.getMessageType();\n        switch (mtype) {\n            case chars.$S: {\n                const name = this.buffer.readString();\n                const value = this.buffer.readLenPrefixedBuffer();\n                this._parseServerSettings(name, value);\n                this.buffer.finishMessage();\n                break;\n            }\n            case chars.$L: {\n                const severity = this.buffer.readChar();\n                const code = this.buffer.readUInt32();\n                const message = this.buffer.readString();\n                this._parseHeaders();\n                this.buffer.finishMessage();\n                console.info(\"SERVER MESSAGE\", severity, code, message);\n                break;\n            }\n            default:\n                throw new errors.UnexpectedMessageError(`unexpected message type ${mtype} (\"${chars.chr(mtype)}\")`);\n        }\n    }\n    async _legacyParse(query, outputFormat, expectOne) {\n        const wb = new buffer_1.WriteMessageBuffer();\n        const parseSendsTypeData = (0, utils_1.versionGreaterThanOrEqual)(this.protocolVersion, [0, 14]);\n        wb.beginMessage(chars.$P)\n            .writeLegacyHeaders({\n            explicitObjectids: \"true\",\n            allowCapabilities: NO_TRANSACTION_CAPABILITIES_BYTES,\n        })\n            .writeChar(outputFormat)\n            .writeChar(expectOne ? ifaces_1.Cardinality.AT_MOST_ONE : ifaces_1.Cardinality.MANY);\n        wb.writeString(\"\");\n        wb.writeString(query);\n        wb.endMessage();\n        wb.writeSync();\n        this._sendData(wb.unwrap());\n        let cardinality;\n        let inTypeId;\n        let outTypeId;\n        let inCodec;\n        let outCodec;\n        let capabilities = -1;\n        let parsing = true;\n        let error = null;\n        let inCodecData = null;\n        let outCodecData = null;\n        while (parsing) {\n            if (!this.buffer.takeMessage()) {\n                await this._waitForMessage();\n            }\n            const mtype = this.buffer.getMessageType();\n            switch (mtype) {\n                case chars.$1: {\n                    const headers = this._parseHeaders();\n                    if (headers.has(ifaces_1.LegacyHeaderCodes.capabilities)) {\n                        const buf = headers.get(ifaces_1.LegacyHeaderCodes.capabilities);\n                        capabilities = Number(new DataView(buf.buffer, buf.byteOffset, buf.byteLength).getBigInt64(0));\n                    }\n                    cardinality = this.buffer.readChar();\n                    if (parseSendsTypeData) {\n                        inTypeId = this.buffer.readUUID();\n                        inCodecData = this.buffer.readLenPrefixedBuffer();\n                        outTypeId = this.buffer.readUUID();\n                        outCodecData = this.buffer.readLenPrefixedBuffer();\n                    }\n                    else {\n                        inTypeId = this.buffer.readUUID();\n                        outTypeId = this.buffer.readUUID();\n                    }\n                    this.buffer.finishMessage();\n                    break;\n                }\n                case chars.$E: {\n                    error = this._parseErrorMessage();\n                    error._query = query;\n                    break;\n                }\n                case chars.$Z: {\n                    this._parseSyncMessage();\n                    parsing = false;\n                    break;\n                }\n                default:\n                    this._fallthrough();\n            }\n        }\n        if (error != null) {\n            throw error;\n        }\n        if (inTypeId == null || outTypeId == null) {\n            throw new errors.ProtocolError(\"did not receive in/out type ids in Parse response\");\n        }\n        inCodec = this.codecsRegistry.getCodec(inTypeId);\n        outCodec = this.codecsRegistry.getCodec(outTypeId);\n        if (inCodec == null && inCodecData != null) {\n            inCodec = this.codecsRegistry.buildCodec(inCodecData, this.protocolVersion);\n        }\n        if (outCodec == null && outCodecData != null) {\n            outCodec = this.codecsRegistry.buildCodec(outCodecData, this.protocolVersion);\n        }\n        if (inCodec == null || outCodec == null || !parseSendsTypeData) {\n            if (parseSendsTypeData) {\n                throw new errors.ProtocolError(\"in/out codecs were not sent\");\n            }\n            wb.reset();\n            wb.beginMessage(chars.$D)\n                .writeInt16(0)\n                .writeChar(chars.$T)\n                .writeString(\"\")\n                .endMessage()\n                .writeSync();\n            this._sendData(wb.unwrap());\n            parsing = true;\n            while (parsing) {\n                if (!this.buffer.takeMessage()) {\n                    await this._waitForMessage();\n                }\n                const mtype = this.buffer.getMessageType();\n                switch (mtype) {\n                    case chars.$T: {\n                        try {\n                            [\n                                cardinality,\n                                inCodec,\n                                outCodec,\n                                capabilities,\n                                inCodecData,\n                                outCodecData,\n                            ] = this._parseDescribeTypeMessage();\n                        }\n                        catch (e) {\n                            error = e;\n                        }\n                        break;\n                    }\n                    case chars.$E: {\n                        error = this._parseErrorMessage();\n                        error._query = query;\n                        break;\n                    }\n                    case chars.$Z: {\n                        this._parseSyncMessage();\n                        parsing = false;\n                        break;\n                    }\n                    default:\n                        this._fallthrough();\n                }\n            }\n            if (error != null) {\n                throw error;\n            }\n        }\n        if (cardinality == null || outCodec == null || inCodec == null) {\n            throw new errors.ProtocolError(\"failed to receive type information in response to a Parse message\");\n        }\n        return [\n            cardinality,\n            inCodec,\n            outCodec,\n            capabilities,\n            inCodecData,\n            outCodecData,\n        ];\n    }\n    _encodeArgs(args, inCodec) {\n        if ((0, utils_1.versionGreaterThanOrEqual)(this.protocolVersion, [0, 12])) {\n            if (inCodec === codecs_1.NULL_CODEC) {\n                if (args != null) {\n                    throw new errors.QueryArgumentError(`This query does not contain any query parameters, ` +\n                        `but query arguments were provided to the 'query*()' method`);\n                }\n                return codecs_1.NullCodec.BUFFER;\n            }\n            if (inCodec instanceof object_1.ObjectCodec) {\n                return inCodec.encodeArgs(args);\n            }\n            throw new errors.ProtocolError(\"invalid input codec\");\n        }\n        else {\n            if (inCodec === tuple_1.EMPTY_TUPLE_CODEC) {\n                if (args != null) {\n                    throw new errors.QueryArgumentError(`This query does not contain any query parameters, ` +\n                        `but query arguments were provided to the 'query*()' method`);\n                }\n                return tuple_1.EmptyTupleCodec.BUFFER;\n            }\n            if (inCodec instanceof namedtuple_1.NamedTupleCodec || inCodec instanceof tuple_1.TupleCodec) {\n                return inCodec.encodeArgs(args);\n            }\n            throw new errors.ProtocolError(\"invalid input codec\");\n        }\n    }\n    async _legacyExecuteFlow(args, inCodec, outCodec, result) {\n        const wb = new buffer_1.WriteMessageBuffer();\n        wb.beginMessage(chars.$E)\n            .writeLegacyHeaders({\n            allowCapabilities: NO_TRANSACTION_CAPABILITIES_BYTES,\n        })\n            .writeString(\"\")\n            .writeBuffer(this._encodeArgs(args, inCodec))\n            .endMessage()\n            .writeSync();\n        this._sendData(wb.unwrap());\n        let parsing = true;\n        let error = null;\n        while (parsing) {\n            if (!this.buffer.takeMessage()) {\n                await this._waitForMessage();\n            }\n            const mtype = this.buffer.getMessageType();\n            switch (mtype) {\n                case chars.$D: {\n                    if (error == null) {\n                        try {\n                            this._parseDataMessages(outCodec, result);\n                        }\n                        catch (e) {\n                            error = e;\n                            this.buffer.finishMessage();\n                        }\n                    }\n                    else {\n                        this.buffer.discardMessage();\n                    }\n                    break;\n                }\n                case chars.$C: {\n                    this.lastStatus = this._parseCommandCompleteMessage();\n                    break;\n                }\n                case chars.$E: {\n                    error = this._parseErrorMessage();\n                    break;\n                }\n                case chars.$Z: {\n                    this._parseSyncMessage();\n                    parsing = false;\n                    break;\n                }\n                default:\n                    this._fallthrough();\n            }\n        }\n        if (error != null) {\n            throw error;\n        }\n    }\n    async _legacyOptimisticExecuteFlow(query, args, outputFormat, expectedCardinality, inCodec, outCodec, result) {\n        const expectOne = expectedCardinality === ifaces_1.Cardinality.ONE ||\n            expectedCardinality === ifaces_1.Cardinality.AT_MOST_ONE;\n        const wb = new buffer_1.WriteMessageBuffer();\n        wb.beginMessage(chars.$O);\n        wb.writeLegacyHeaders({\n            explicitObjectids: \"true\",\n            allowCapabilities: NO_TRANSACTION_CAPABILITIES_BYTES,\n        });\n        wb.writeChar(outputFormat);\n        wb.writeChar(expectOne ? ifaces_1.Cardinality.AT_MOST_ONE : ifaces_1.Cardinality.MANY);\n        wb.writeString(query);\n        wb.writeBuffer(inCodec.tidBuffer);\n        wb.writeBuffer(outCodec.tidBuffer);\n        wb.writeBuffer(this._encodeArgs(args, inCodec));\n        wb.endMessage();\n        wb.writeSync();\n        this._sendData(wb.unwrap());\n        let reExec = false;\n        let error = null;\n        let parsing = true;\n        let newCard = null;\n        let capabilities = -1;\n        while (parsing) {\n            if (!this.buffer.takeMessage()) {\n                await this._waitForMessage();\n            }\n            const mtype = this.buffer.getMessageType();\n            switch (mtype) {\n                case chars.$D: {\n                    if (error == null) {\n                        try {\n                            this._parseDataMessages(outCodec, result);\n                        }\n                        catch (e) {\n                            error = e;\n                            this.buffer.finishMessage();\n                        }\n                    }\n                    else {\n                        this.buffer.discardMessage();\n                    }\n                    break;\n                }\n                case chars.$C: {\n                    this.lastStatus = this._parseCommandCompleteMessage();\n                    break;\n                }\n                case chars.$Z: {\n                    this._parseSyncMessage();\n                    parsing = false;\n                    break;\n                }\n                case chars.$T: {\n                    try {\n                        [newCard, inCodec, outCodec, capabilities] =\n                            this._parseDescribeTypeMessage();\n                        const key = this._getQueryCacheKey(query, outputFormat, expectedCardinality);\n                        this.queryCodecCache.set(key, [\n                            newCard,\n                            inCodec,\n                            outCodec,\n                            capabilities,\n                        ]);\n                        reExec = true;\n                    }\n                    catch (e) {\n                        error = e;\n                    }\n                    break;\n                }\n                case chars.$E: {\n                    error = this._parseErrorMessage();\n                    error._query = query;\n                    break;\n                }\n                default:\n                    this._fallthrough();\n            }\n        }\n        if (error != null) {\n            throw error;\n        }\n        if (reExec) {\n            this._validateFetchCardinality(newCard, outputFormat, expectedCardinality);\n            return await this._legacyExecuteFlow(args, inCodec, outCodec, result);\n        }\n    }\n    _encodeParseParams(wb, query, outputFormat, expectedCardinality, state, capabilitiesFlags, options) {\n        var _a, _b;\n        wb.writeFlags(4294967295, capabilitiesFlags);\n        wb.writeFlags(0, 0 |\n            ((options === null || options === void 0 ? void 0 : options.injectObjectids)\n                ? CompilationFlag.INJECT_OUTPUT_OBJECT_IDS\n                : 0) |\n            ((options === null || options === void 0 ? void 0 : options.injectTypeids) ? CompilationFlag.INJECT_OUTPUT_TYPE_IDS : 0) |\n            ((options === null || options === void 0 ? void 0 : options.injectTypenames)\n                ? CompilationFlag.INJECT_OUTPUT_TYPE_NAMES\n                : 0));\n        wb.writeBigInt64((_a = options === null || options === void 0 ? void 0 : options.implicitLimit) !== null && _a !== void 0 ? _a : BigInt(0));\n        wb.writeChar(outputFormat);\n        wb.writeChar(expectedCardinality === ifaces_1.Cardinality.ONE ||\n            expectedCardinality === ifaces_1.Cardinality.AT_MOST_ONE\n            ? ifaces_1.Cardinality.AT_MOST_ONE\n            : ifaces_1.Cardinality.MANY);\n        wb.writeString(query);\n        if (!this.adminUIMode && state === options_1.Session.defaults()) {\n            wb.writeBuffer(codecs_1.NULL_CODEC.tidBuffer);\n            wb.writeInt32(0);\n        }\n        else {\n            wb.writeBuffer(this.stateCodec.tidBuffer);\n            if (this.stateCodec === codecs_1.INVALID_CODEC || this.stateCodec === codecs_1.NULL_CODEC) {\n                wb.writeInt32(0);\n            }\n            else {\n                if (((_b = this.stateCache) === null || _b === void 0 ? void 0 : _b[0]) !== state) {\n                    const buf = new buffer_1.WriteBuffer();\n                    this.stateCodec.encode(buf, state._serialise());\n                    this.stateCache = [state, buf.unwrap()];\n                }\n                wb.writeBuffer(this.stateCache[1]);\n            }\n        }\n    }\n    async _parse(query, outputFormat, expectedCardinality, state, capabilitiesFlags = RESTRICTED_CAPABILITIES, options) {\n        const wb = new buffer_1.WriteMessageBuffer();\n        wb.beginMessage(chars.$P);\n        wb.writeUInt16(0);\n        this._encodeParseParams(wb, query, outputFormat, expectedCardinality, state, capabilitiesFlags, options);\n        wb.endMessage();\n        wb.writeSync();\n        this._sendData(wb.unwrap());\n        let parsing = true;\n        let error = null;\n        let newCard = null;\n        let capabilities = -1;\n        let inCodec = null;\n        let outCodec = null;\n        let inCodecBuf = null;\n        let outCodecBuf = null;\n        while (parsing) {\n            if (!this.buffer.takeMessage()) {\n                await this._waitForMessage();\n            }\n            const mtype = this.buffer.getMessageType();\n            switch (mtype) {\n                case chars.$T: {\n                    try {\n                        [\n                            newCard,\n                            inCodec,\n                            outCodec,\n                            capabilities,\n                            inCodecBuf,\n                            outCodecBuf,\n                        ] = this._parseDescribeTypeMessage();\n                        const key = this._getQueryCacheKey(query, outputFormat, expectedCardinality);\n                        this.queryCodecCache.set(key, [\n                            newCard,\n                            inCodec,\n                            outCodec,\n                            capabilities,\n                        ]);\n                    }\n                    catch (e) {\n                        error = e;\n                    }\n                    break;\n                }\n                case chars.$E: {\n                    error = this._parseErrorMessage();\n                    error._query = query;\n                    break;\n                }\n                case chars.$s: {\n                    this._parseDescribeStateMessage();\n                    break;\n                }\n                case chars.$Z: {\n                    this._parseSyncMessage();\n                    parsing = false;\n                    break;\n                }\n                default:\n                    this._fallthrough();\n            }\n        }\n        if (error !== null) {\n            if (error instanceof errors.StateMismatchError) {\n                return this._parse(query, outputFormat, expectedCardinality, state, capabilitiesFlags, options);\n            }\n            throw error;\n        }\n        return [\n            newCard,\n            inCodec,\n            outCodec,\n            capabilities,\n            inCodecBuf,\n            outCodecBuf,\n        ];\n    }\n    async _executeFlow(query, args, outputFormat, expectedCardinality, state, inCodec, outCodec, result, capabilitiesFlags = RESTRICTED_CAPABILITIES, options) {\n        const wb = new buffer_1.WriteMessageBuffer();\n        wb.beginMessage(chars.$O);\n        wb.writeUInt16(0);\n        this._encodeParseParams(wb, query, outputFormat, expectedCardinality, state, capabilitiesFlags, options);\n        wb.writeBuffer(inCodec.tidBuffer);\n        wb.writeBuffer(outCodec.tidBuffer);\n        if (inCodec) {\n            wb.writeBuffer(this._encodeArgs(args, inCodec));\n        }\n        else {\n            wb.writeInt32(0);\n        }\n        wb.endMessage();\n        wb.writeSync();\n        this._sendData(wb.unwrap());\n        let error = null;\n        let parsing = true;\n        while (parsing) {\n            if (!this.buffer.takeMessage()) {\n                await this._waitForMessage();\n            }\n            const mtype = this.buffer.getMessageType();\n            switch (mtype) {\n                case chars.$D: {\n                    if (error == null) {\n                        try {\n                            this._parseDataMessages(outCodec, result);\n                        }\n                        catch (e) {\n                            error = e;\n                            this.buffer.finishMessage();\n                        }\n                    }\n                    else {\n                        this.buffer.discardMessage();\n                    }\n                    break;\n                }\n                case chars.$C: {\n                    this.lastStatus = this._parseCommandCompleteMessage();\n                    break;\n                }\n                case chars.$Z: {\n                    this._parseSyncMessage();\n                    parsing = false;\n                    break;\n                }\n                case chars.$T: {\n                    try {\n                        const [newCard, newInCodec, newOutCodec, capabilities] = this._parseDescribeTypeMessage();\n                        const key = this._getQueryCacheKey(query, outputFormat, expectedCardinality);\n                        this.queryCodecCache.set(key, [\n                            newCard,\n                            newInCodec,\n                            newOutCodec,\n                            capabilities,\n                        ]);\n                        outCodec = newOutCodec;\n                    }\n                    catch (e) {\n                        error = e;\n                    }\n                    break;\n                }\n                case chars.$s: {\n                    this._parseDescribeStateMessage();\n                    break;\n                }\n                case chars.$E: {\n                    error = this._parseErrorMessage();\n                    error._query = query;\n                    break;\n                }\n                default:\n                    this._fallthrough();\n            }\n        }\n        if (error != null) {\n            if (error instanceof errors.StateMismatchError) {\n                return this._executeFlow(query, args, outputFormat, expectedCardinality, state, inCodec, outCodec, result, capabilitiesFlags, options);\n            }\n            throw error;\n        }\n    }\n    _getQueryCacheKey(query, outputFormat, expectedCardinality) {\n        const expectOne = expectedCardinality === ifaces_1.Cardinality.ONE ||\n            expectedCardinality === ifaces_1.Cardinality.AT_MOST_ONE;\n        return [outputFormat, expectOne, query.length, query].join(\";\");\n    }\n    _validateFetchCardinality(card, outputFormat, expectedCardinality) {\n        if (expectedCardinality === ifaces_1.Cardinality.ONE &&\n            card === ifaces_1.Cardinality.NO_RESULT) {\n            throw new errors.NoDataError(`query executed via queryRequiredSingle${outputFormat === ifaces_1.OutputFormat.JSON ? \"JSON\" : \"\"}() returned no data`);\n        }\n    }\n    async fetch(query, args = null, outputFormat, expectedCardinality, state, privilegedMode = false) {\n        var _a, _b;\n        if (this.isLegacyProtocol && outputFormat === ifaces_1.OutputFormat.NONE) {\n            if (args != null) {\n                throw new errors.InterfaceError(`arguments in execute() is not supported in this version of ` +\n                    `EdgeDB. Upgrade to EdgeDB 2.0 or newer.`);\n            }\n            return this.legacyExecute(query, privilegedMode);\n        }\n        this._checkState();\n        const requiredOne = expectedCardinality === ifaces_1.Cardinality.ONE;\n        const expectOne = requiredOne || expectedCardinality === ifaces_1.Cardinality.AT_MOST_ONE;\n        const asJson = outputFormat === ifaces_1.OutputFormat.JSON;\n        const key = this._getQueryCacheKey(query, outputFormat, expectedCardinality);\n        const ret = [];\n        if (!this.isLegacyProtocol) {\n            let [card, inCodec, outCodec] = (_a = this.queryCodecCache.get(key)) !== null && _a !== void 0 ? _a : [];\n            if (card) {\n                this._validateFetchCardinality(card, outputFormat, expectedCardinality);\n            }\n            if ((!inCodec && args !== null) ||\n                (this.stateCodec === codecs_1.INVALID_CODEC && state !== options_1.Session.defaults())) {\n                [card, inCodec, outCodec] = await this._parse(query, outputFormat, expectedCardinality, state, privilegedMode ? Capabilities.ALL : undefined);\n                this._validateFetchCardinality(card, outputFormat, expectedCardinality);\n            }\n            try {\n                await this._executeFlow(query, args, outputFormat, expectedCardinality, state, inCodec !== null && inCodec !== void 0 ? inCodec : codecs_1.NULL_CODEC, outCodec !== null && outCodec !== void 0 ? outCodec : codecs_1.NULL_CODEC, ret, privilegedMode ? Capabilities.ALL : undefined);\n            }\n            catch (e) {\n                if (e instanceof errors.ParameterTypeMismatchError) {\n                    [card, inCodec, outCodec] = this.queryCodecCache.get(key);\n                    await this._executeFlow(query, args, outputFormat, expectedCardinality, state, inCodec !== null && inCodec !== void 0 ? inCodec : codecs_1.NULL_CODEC, outCodec !== null && outCodec !== void 0 ? outCodec : codecs_1.NULL_CODEC, ret, privilegedMode ? Capabilities.ALL : undefined);\n                }\n                else {\n                    throw e;\n                }\n            }\n        }\n        else {\n            if (state !== options_1.Session.defaults()) {\n                throw new errors.InterfaceError(`setting session state is not supported in this version of ` +\n                    `EdgeDB. Upgrade to EdgeDB 2.0 or newer.`);\n            }\n            if (this.queryCodecCache.has(key)) {\n                const [card, inCodec, outCodec] = this.queryCodecCache.get(key);\n                this._validateFetchCardinality(card, outputFormat, expectedCardinality);\n                await this._legacyOptimisticExecuteFlow(query, args, outputFormat, expectedCardinality, inCodec, outCodec, ret);\n            }\n            else {\n                const [card, inCodec, outCodec, capabilities] = await this._legacyParse(query, outputFormat, expectOne);\n                this._validateFetchCardinality(card, outputFormat, expectedCardinality);\n                this.queryCodecCache.set(key, [card, inCodec, outCodec, capabilities]);\n                await this._legacyExecuteFlow(args, inCodec, outCodec, ret);\n            }\n        }\n        if (outputFormat === ifaces_1.OutputFormat.NONE) {\n            return;\n        }\n        if (expectOne) {\n            if (requiredOne && !ret.length) {\n                throw new errors.NoDataError(\"query returned no data\");\n            }\n            else {\n                return (_b = ret[0]) !== null && _b !== void 0 ? _b : (asJson ? \"null\" : null);\n            }\n        }\n        else {\n            if (ret && ret.length) {\n                if (asJson) {\n                    return ret[0];\n                }\n                else {\n                    return ret;\n                }\n            }\n            else {\n                if (asJson) {\n                    return \"[]\";\n                }\n                else {\n                    return ret;\n                }\n            }\n        }\n    }\n    getQueryCapabilities(query, outputFormat, expectedCardinality) {\n        var _a, _b;\n        const key = this._getQueryCacheKey(query, outputFormat, expectedCardinality);\n        return (_b = (_a = this.queryCodecCache.get(key)) === null || _a === void 0 ? void 0 : _a[3]) !== null && _b !== void 0 ? _b : null;\n    }\n    async legacyExecute(query, allowTransactionCommands = false) {\n        this._checkState();\n        const wb = new buffer_1.WriteMessageBuffer();\n        wb.beginMessage(chars.$Q)\n            .writeLegacyHeaders({\n            allowCapabilities: !allowTransactionCommands\n                ? NO_TRANSACTION_CAPABILITIES_BYTES\n                : undefined,\n        })\n            .writeString(query)\n            .endMessage();\n        this._sendData(wb.unwrap());\n        let error = null;\n        let parsing = true;\n        while (parsing) {\n            if (!this.buffer.takeMessage()) {\n                await this._waitForMessage();\n            }\n            const mtype = this.buffer.getMessageType();\n            switch (mtype) {\n                case chars.$C: {\n                    this.lastStatus = this._parseCommandCompleteMessage();\n                    break;\n                }\n                case chars.$Z: {\n                    this._parseSyncMessage();\n                    parsing = false;\n                    break;\n                }\n                case chars.$E: {\n                    error = this._parseErrorMessage();\n                    error._query = query;\n                    break;\n                }\n                default:\n                    this._fallthrough();\n            }\n        }\n        if (error != null) {\n            throw error;\n        }\n    }\n    async resetState() {\n        if (this.connected &&\n            this.serverXactStatus !== TransactionStatus.TRANS_IDLE) {\n            try {\n                await this.fetch(`rollback`, undefined, ifaces_1.OutputFormat.NONE, ifaces_1.Cardinality.NO_RESULT, options_1.Session.defaults(), true);\n            }\n            catch {\n                this._abortWithError(new errors.ClientConnectionClosedError(\"failed to reset state\"));\n            }\n        }\n    }\n    _abort() {\n        this.connected = false;\n        this._abortWaiters(this.getConnAbortError());\n        if (!this.connAbortWaiter.done) {\n            this.connAbortWaiter.set();\n        }\n    }\n    isClosed() {\n        return !this.connected;\n    }\n    async close() {\n        this._abort();\n    }\n    async rawParse(query, state, options) {\n        const result = (await this._parse(query, ifaces_1.OutputFormat.BINARY, ifaces_1.Cardinality.MANY, state, STUDIO_CAPABILITIES, options));\n        return [\n            result[1],\n            result[2],\n            result[4],\n            result[5],\n            this.protocolVersion,\n            result[3],\n        ];\n    }\n    async rawExecute(query, state, outCodec, options, inCodec, args = null) {\n        const result = new buffer_1.WriteBuffer();\n        await this._executeFlow(query, args, outCodec ? ifaces_1.OutputFormat.BINARY : ifaces_1.OutputFormat.NONE, ifaces_1.Cardinality.MANY, state, inCodec !== null && inCodec !== void 0 ? inCodec : codecs_1.NULL_CODEC, outCodec !== null && outCodec !== void 0 ? outCodec : codecs_1.NULL_CODEC, result, STUDIO_CAPABILITIES, options);\n        return result.unwrap();\n    }\n}\nexports.BaseRawConnection = BaseRawConnection;\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2019-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.XOR = exports.getServerKey = exports.getClientKey = exports.getSaltedPassword = exports.buildClientFinalMessage = exports.parseServerFinalMessage = exports.parseServerFirstMessage = exports.buildClientFirstMessage = exports.generateNonce = exports.bufferEquals = exports.saslprep = exports.HMAC = exports.H = void 0;\nconst adapter_shared_node_1 = require(\"./adapter.shared.node\");\nObject.defineProperty(exports, \"H\", { enumerable: true, get: function () { return adapter_shared_node_1.H; } });\nObject.defineProperty(exports, \"HMAC\", { enumerable: true, get: function () { return adapter_shared_node_1.HMAC; } });\nconst buffer_1 = require(\"./primitives/buffer\");\nconst errors_1 = require(\"./errors\");\nconst RAW_NONCE_LENGTH = 18;\nfunction saslprep(str) {\n    return str.normalize(\"NFKC\");\n}\nexports.saslprep = saslprep;\nfunction bufferEquals(a, b) {\n    if (a.length !== b.length) {\n        return false;\n    }\n    for (let i = 0, len = a.length; i < len; i++) {\n        if (a[i] !== b[i]) {\n            return false;\n        }\n    }\n    return true;\n}\nexports.bufferEquals = bufferEquals;\nfunction generateNonce(length = RAW_NONCE_LENGTH) {\n    return (0, adapter_shared_node_1.randomBytes)(length);\n}\nexports.generateNonce = generateNonce;\nfunction buildClientFirstMessage(clientNonce, username) {\n    const bare = `n=${saslprep(username)},r=${(0, buffer_1.encodeB64)(clientNonce)}`;\n    return [`n,,${bare}`, bare];\n}\nexports.buildClientFirstMessage = buildClientFirstMessage;\nfunction parseServerFirstMessage(msg) {\n    const attrs = msg.split(\",\");\n    if (attrs.length < 3) {\n        throw new errors_1.ProtocolError(\"malformed SCRAM message\");\n    }\n    const nonceAttr = attrs[0];\n    if (!nonceAttr || nonceAttr[0] !== \"r\") {\n        throw new errors_1.ProtocolError(\"malformed SCRAM message\");\n    }\n    const nonceB64 = nonceAttr.split(\"=\", 2)[1];\n    if (!nonceB64) {\n        throw new errors_1.ProtocolError(\"malformed SCRAM message\");\n    }\n    const nonce = (0, buffer_1.decodeB64)(nonceB64);\n    const saltAttr = attrs[1];\n    if (!saltAttr || saltAttr[0] !== \"s\") {\n        throw new errors_1.ProtocolError(\"malformed SCRAM message\");\n    }\n    const saltB64 = saltAttr.split(\"=\", 2)[1];\n    if (!saltB64) {\n        throw new errors_1.ProtocolError(\"malformed SCRAM message\");\n    }\n    const salt = (0, buffer_1.decodeB64)(saltB64);\n    const iterAttr = attrs[2];\n    if (!iterAttr || iterAttr[0] !== \"i\") {\n        throw new errors_1.ProtocolError(\"malformed SCRAM message\");\n    }\n    const iter = iterAttr.split(\"=\", 2)[1];\n    if (!iter || !iter.match(/^[0-9]*$/)) {\n        throw new errors_1.ProtocolError(\"malformed SCRAM message\");\n    }\n    const iterCount = parseInt(iter, 10);\n    if (iterCount <= 0) {\n        throw new errors_1.ProtocolError(\"malformed SCRAM message\");\n    }\n    return [nonce, salt, iterCount];\n}\nexports.parseServerFirstMessage = parseServerFirstMessage;\nfunction parseServerFinalMessage(msg) {\n    const attrs = msg.split(\",\");\n    if (attrs.length < 1) {\n        throw new errors_1.ProtocolError(\"malformed SCRAM message\");\n    }\n    const nonceAttr = attrs[0];\n    if (!nonceAttr || nonceAttr[0] !== \"v\") {\n        throw new errors_1.ProtocolError(\"malformed SCRAM message\");\n    }\n    const signatureB64 = nonceAttr.split(\"=\", 2)[1];\n    if (!signatureB64) {\n        throw new errors_1.ProtocolError(\"malformed SCRAM message\");\n    }\n    return (0, buffer_1.decodeB64)(signatureB64);\n}\nexports.parseServerFinalMessage = parseServerFinalMessage;\nasync function buildClientFinalMessage(password, salt, iterations, clientFirstBare, serverFirst, serverNonce) {\n    const clientFinal = `c=biws,r=${(0, buffer_1.encodeB64)(serverNonce)}`;\n    const authMessage = buffer_1.utf8Encoder.encode(`${clientFirstBare},${serverFirst},${clientFinal}`);\n    const saltedPassword = await getSaltedPassword(buffer_1.utf8Encoder.encode(saslprep(password)), salt, iterations);\n    const clientKey = await getClientKey(saltedPassword);\n    const storedKey = await (0, adapter_shared_node_1.H)(clientKey);\n    const clientSignature = await (0, adapter_shared_node_1.HMAC)(storedKey, authMessage);\n    const clientProof = XOR(clientKey, clientSignature);\n    const serverKey = await getServerKey(saltedPassword);\n    const serverProof = await (0, adapter_shared_node_1.HMAC)(serverKey, authMessage);\n    return [`${clientFinal},p=${(0, buffer_1.encodeB64)(clientProof)}`, serverProof];\n}\nexports.buildClientFinalMessage = buildClientFinalMessage;\nasync function getSaltedPassword(password, salt, iterations) {\n    const msg = new Uint8Array(salt.length + 4);\n    msg.set(salt);\n    msg.set([0, 0, 0, 1], salt.length);\n    let Hi = await (0, adapter_shared_node_1.HMAC)(password, msg);\n    let Ui = Hi;\n    for (let _ = 0; _ < iterations - 1; _++) {\n        Ui = await (0, adapter_shared_node_1.HMAC)(password, Ui);\n        Hi = XOR(Hi, Ui);\n    }\n    return Hi;\n}\nexports.getSaltedPassword = getSaltedPassword;\nfunction getClientKey(saltedPassword) {\n    return (0, adapter_shared_node_1.HMAC)(saltedPassword, buffer_1.utf8Encoder.encode(\"Client Key\"));\n}\nexports.getClientKey = getClientKey;\nfunction getServerKey(saltedPassword) {\n    return (0, adapter_shared_node_1.HMAC)(saltedPassword, buffer_1.utf8Encoder.encode(\"Server Key\"));\n}\nexports.getServerKey = getServerKey;\nfunction XOR(a, b) {\n    const len = a.length;\n    if (len !== b.length) {\n        throw new errors_1.ProtocolError(\"scram.XOR: buffers are of different lengths\");\n    }\n    const res = new Uint8Array(len);\n    for (let i = 0; i < len; i++) {\n        res[i] = a[i] ^ b[i];\n    }\n    return res;\n}\nexports.XOR = XOR;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.HTTPSCRAMAuth = void 0;\nconst errors_1 = require(\"./errors\");\nconst buffer_1 = require(\"./primitives/buffer\");\nconst scram_1 = require(\"./scram\");\nconst AUTH_ENDPOINT = \"/auth/token\";\nasync function HTTPSCRAMAuth(baseUrl, username, password) {\n    var _a;\n    const authUrl = baseUrl + AUTH_ENDPOINT;\n    const clientNonce = await (0, scram_1.generateNonce)();\n    const [clientFirst, clientFirstBare] = (0, scram_1.buildClientFirstMessage)(clientNonce, username);\n    const serverFirstRes = await fetch(authUrl, {\n        headers: {\n            Authorization: `SCRAM-SHA-256 data=${utf8ToB64(clientFirst)}`,\n        },\n    });\n    const authenticateHeader = serverFirstRes.headers.get(\"WWW-Authenticate\");\n    if (serverFirstRes.status !== 401 || !authenticateHeader) {\n        const body = await serverFirstRes.text();\n        throw new errors_1.ProtocolError(`authentication failed: ${body}`);\n    }\n    if (!authenticateHeader.startsWith(\"SCRAM-SHA-256\")) {\n        throw new errors_1.ProtocolError(`unsupported authentication scheme: ${authenticateHeader}`);\n    }\n    const authParams = (_a = authenticateHeader.split(/ (.+)?/, 2)[1]) !== null && _a !== void 0 ? _a : \"\";\n    if (authParams.length === 0) {\n        const body = await serverFirstRes.text();\n        throw new errors_1.ProtocolError(`authentication failed: ${body}`);\n    }\n    const { sid, data: serverFirst } = parseScramAttrs(authParams);\n    if (!sid || !serverFirst) {\n        throw new errors_1.ProtocolError(`authentication challenge missing attributes: expected \"sid\" and \"data\", got '${authParams}'`);\n    }\n    const [serverNonce, salt, iterCount] = (0, scram_1.parseServerFirstMessage)(serverFirst);\n    const [clientFinal, expectedServerSig] = await (0, scram_1.buildClientFinalMessage)(password, salt, iterCount, clientFirstBare, serverFirst, serverNonce);\n    const serverFinalRes = await fetch(authUrl, {\n        headers: {\n            Authorization: `SCRAM-SHA-256 sid=${sid}, data=${utf8ToB64(clientFinal)}`,\n        },\n    });\n    const authInfoHeader = serverFinalRes.headers.get(\"Authentication-Info\");\n    if (!serverFinalRes.ok || !authInfoHeader) {\n        const body = await serverFinalRes.text();\n        throw new errors_1.ProtocolError(`authentication failed: ${body}`);\n    }\n    const { data: serverFinal, sid: sidFinal } = parseScramAttrs(authInfoHeader);\n    if (!sidFinal || !serverFinal) {\n        throw new errors_1.ProtocolError(`authentication info missing attributes: expected \"sid\" and \"data\", got '${authInfoHeader}'`);\n    }\n    if (sidFinal !== sid) {\n        throw new errors_1.ProtocolError(\"SCRAM session id does not match\");\n    }\n    const serverSig = (0, scram_1.parseServerFinalMessage)(serverFinal);\n    if (!(0, scram_1.bufferEquals)(serverSig, expectedServerSig)) {\n        throw new errors_1.ProtocolError(\"server SCRAM proof does not match\");\n    }\n    const authToken = await serverFinalRes.text();\n    return authToken;\n}\nexports.HTTPSCRAMAuth = HTTPSCRAMAuth;\nfunction utf8ToB64(str) {\n    return (0, buffer_1.encodeB64)(buffer_1.utf8Encoder.encode(str));\n}\nfunction b64ToUtf8(str) {\n    return buffer_1.utf8Decoder.decode((0, buffer_1.decodeB64)(str));\n}\nfunction parseScramAttrs(paramsStr) {\n    var _a;\n    const params = new Map(paramsStr.length > 0\n        ? paramsStr\n            .split(\",\")\n            .map((attr) => attr.split(/=(.+)?/, 2))\n            .map(([key, val]) => [key.trim(), val.trim()])\n        : []);\n    const sid = (_a = params.get(\"sid\")) !== null && _a !== void 0 ? _a : null;\n    const rawData = params.get(\"data\");\n    const data = rawData ? b64ToUtf8(rawData) : null;\n    return { sid, data };\n}\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2022-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FetchConnection = exports.AdminUIFetchConnection = void 0;\nconst baseConn_1 = require(\"./baseConn\");\nconst event_1 = __importDefault(require(\"./primitives/event\"));\nconst chars = __importStar(require(\"./primitives/chars\"));\nconst errors_1 = require(\"./errors\");\nconst httpScram_1 = require(\"./httpScram\");\nconst PROTO_MIME = `application/x.edgedb.v_${baseConn_1.PROTO_VER[0]}_${baseConn_1.PROTO_VER[1]}.binary'`;\nclass BaseFetchConnection extends baseConn_1.BaseRawConnection {\n    constructor(config, registry) {\n        super(registry);\n        Object.defineProperty(this, \"config\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"addr\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.config = config;\n        this.addr = this._buildAddr();\n    }\n    _buildAddr() {\n        this.throwNotImplemented(\"_buildAddr\");\n    }\n    async _waitForMessage() {\n        if (this.buffer.takeMessage()) {\n            return;\n        }\n        if (this.messageWaiter == null || this.messageWaiter.done) {\n            throw new errors_1.InternalClientError(`message waiter was not initialized before waiting for response`);\n        }\n        await this.messageWaiter.wait();\n    }\n    async __sendData(data) {\n        if (this.buffer.takeMessage()) {\n            const mtype = this.buffer.getMessageType();\n            throw new errors_1.InternalClientError(`sending request before reading all data of the previous one: ` +\n                `${chars.chr(mtype)}`);\n        }\n        if (this.messageWaiter != null && !this.messageWaiter.done) {\n            throw new errors_1.InternalClientError(`sending request before waiting for completion of the previous one`);\n        }\n        this.messageWaiter = new event_1.default();\n        try {\n            const headers = {\n                \"Content-Type\": PROTO_MIME,\n            };\n            if (this.config.user !== undefined) {\n                headers[\"X-EdgeDB-User\"] = this.config.user;\n            }\n            if (this.config.token !== undefined) {\n                headers.Authorization = `Bearer ${this.config.token}`;\n            }\n            const resp = await fetch(this.addr, {\n                method: \"post\",\n                body: data,\n                headers,\n            });\n            if (!resp.ok) {\n                throw new errors_1.ProtocolError(`fetch failed with status code ${resp.status}: ${resp.statusText}`);\n            }\n            const respData = await resp.arrayBuffer();\n            const buf = new Uint8Array(respData);\n            try {\n                this.buffer.feed(buf);\n            }\n            catch (e) {\n                this.messageWaiter.setError(e);\n            }\n            if (!this.buffer.takeMessage()) {\n                throw new errors_1.ProtocolError(\"no binary protocol messages in the response\");\n            }\n            this.messageWaiter.set();\n        }\n        catch (e) {\n            this.messageWaiter.setError(e);\n        }\n        finally {\n            this.messageWaiter = null;\n        }\n    }\n    _sendData(data) {\n        this.__sendData(data);\n    }\n    static create(config, registry) {\n        const conn = new this(config, registry);\n        conn.connected = true;\n        conn.connWaiter.set();\n        return conn;\n    }\n}\nclass AdminUIFetchConnection extends BaseFetchConnection {\n    constructor() {\n        super(...arguments);\n        Object.defineProperty(this, \"adminUIMode\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n    }\n    _buildAddr() {\n        const config = this.config;\n        if (typeof config.address === \"string\") {\n            return `${config.address}/db/${config.database}`;\n        }\n        const { address, tlsSecurity, database } = config;\n        const protocol = tlsSecurity === \"insecure\" ? \"http\" : \"https\";\n        const baseUrl = `${protocol}://${address[0]}:${address[1]}`;\n        return `${baseUrl}/db/${database}`;\n    }\n}\nexports.AdminUIFetchConnection = AdminUIFetchConnection;\nconst _tokens = new WeakMap();\nclass FetchConnection extends BaseFetchConnection {\n    _buildAddr() {\n        const config = this.config;\n        if (typeof config.address === \"string\") {\n            return `${config.address}/db/${config.database}`;\n        }\n        const { address, tlsSecurity, database } = config;\n        const protocol = tlsSecurity === \"insecure\" ? \"http\" : \"https\";\n        const baseUrl = `${protocol}://${address[0]}:${address[1]}`;\n        return `${baseUrl}/db/${database}`;\n    }\n    static async connectWithTimeout(addr, config, registry) {\n        const { connectionParams: { tlsSecurity, user, password = \"\", secretKey }, } = config;\n        let token = secretKey !== null && secretKey !== void 0 ? secretKey : _tokens.get(config);\n        if (!token) {\n            const protocol = tlsSecurity === \"insecure\" ? \"http\" : \"https\";\n            const baseUrl = `${protocol}://${addr[0]}:${addr[1]}`;\n            token = await (0, httpScram_1.HTTPSCRAMAuth)(baseUrl, user, password);\n            _tokens.set(config, token);\n        }\n        const conn = new FetchConnection({\n            address: addr,\n            tlsSecurity,\n            database: config.connectionParams.database,\n            user: config.connectionParams.user,\n            token,\n        }, registry);\n        conn.connected = true;\n        conn.connWaiter.set();\n        return conn;\n    }\n}\nexports.FetchConnection = FetchConnection;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createHttpClient = exports.createClient = exports.FetchClientPool = void 0;\nconst baseClient_1 = require(\"./baseClient\");\nconst conUtils_1 = require(\"./conUtils\");\nconst errors_1 = require(\"./errors\");\nconst fetchConn_1 = require(\"./fetchConn\");\nconst options_1 = require(\"./options\");\nconst parseConnectArguments = (0, conUtils_1.getConnectArgumentsParser)(null);\nclass FetchClientPool extends baseClient_1.BaseClientPool {\n    constructor() {\n        super(...arguments);\n        Object.defineProperty(this, \"isStateless\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"_connectWithTimeout\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: fetchConn_1.FetchConnection.connectWithTimeout\n        });\n    }\n}\nexports.FetchClientPool = FetchClientPool;\nfunction createClient() {\n    throw new errors_1.EdgeDBError(`'createClient()' cannot be used in browser (or edge runtime) environment, ` +\n        `use 'createHttpClient()' API instead`);\n}\nexports.createClient = createClient;\nfunction createHttpClient(options) {\n    return new baseClient_1.Client(new FetchClientPool(parseConnectArguments, typeof options === \"string\" ? { dsn: options } : options !== null && options !== void 0 ? options : {}), options_1.Options.defaults());\n}\nexports.createHttpClient = createHttpClient;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.srcDir = exports.exit = exports.homeDir = exports.input = exports.exists = exports.walk = exports.hashSHA1toHex = exports.readDir = exports.watch = exports.hasFSReadPermission = exports.readFileUtf8 = exports.process = exports.tls = exports.fs = exports.net = exports.path = void 0;\nconst crypto = __importStar(require(\"crypto\"));\nconst fs_1 = require(\"fs\");\nObject.defineProperty(exports, \"fs\", { enumerable: true, get: function () { return fs_1.promises; } });\nconst net = __importStar(require(\"net\"));\nexports.net = net;\nconst os = __importStar(require(\"os\"));\nconst path = __importStar(require(\"path\"));\nexports.path = path;\nconst tls = __importStar(require(\"tls\"));\nexports.tls = tls;\nconst process_1 = __importDefault(require(\"process\"));\nexports.process = process_1.default;\nconst readline = __importStar(require(\"readline\"));\nconst stream_1 = require(\"stream\");\nasync function readFileUtf8(...pathParts) {\n    return await fs_1.promises.readFile(path.join(...pathParts), { encoding: \"utf8\" });\n}\nexports.readFileUtf8 = readFileUtf8;\nfunction hasFSReadPermission() {\n    return true;\n}\nexports.hasFSReadPermission = hasFSReadPermission;\nfunction watch(dir) {\n    return fs_1.promises.watch(dir, { recursive: true });\n}\nexports.watch = watch;\nasync function readDir(pathString) {\n    return fs_1.promises.readdir(pathString);\n}\nexports.readDir = readDir;\nfunction hashSHA1toHex(msg) {\n    return crypto.createHash(\"sha1\").update(msg).digest(\"hex\");\n}\nexports.hashSHA1toHex = hashSHA1toHex;\nasync function walk(dir, params) {\n    const { match, skip = [] } = params || {};\n    try {\n        await fs_1.promises.access(dir);\n    }\n    catch (err) {\n        return [];\n    }\n    const dirents = await fs_1.promises.readdir(dir, { withFileTypes: true });\n    const files = await Promise.all(dirents.map((dirent) => {\n        const fspath = path.resolve(dir, dirent.name);\n        if (skip) {\n            if (skip.some((re) => re.test(fspath))) {\n                return [];\n            }\n        }\n        if (dirent.isDirectory()) {\n            return walk(fspath, params);\n        }\n        if (match) {\n            if (!match.some((re) => re.test(fspath))) {\n                return [];\n            }\n        }\n        return [fspath];\n    }));\n    return Array.prototype.concat(...files);\n}\nexports.walk = walk;\nasync function exists(filepath) {\n    try {\n        await fs_1.promises.access(filepath);\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\nexports.exists = exists;\nfunction input(message, params) {\n    let silent = false;\n    const output = !!(params === null || params === void 0 ? void 0 : params.silent)\n        ? new stream_1.Writable({\n            write(chunk, encoding, callback) {\n                if (!silent)\n                    process_1.default.stdout.write(chunk, encoding);\n                callback();\n            },\n        })\n        : process_1.default.stdout;\n    const rl = readline.createInterface({\n        input: process_1.default.stdin,\n        output,\n    });\n    return new Promise((resolve, rej) => {\n        rl.question(message, (val) => {\n            rl.close();\n            resolve(val);\n        });\n        silent = true;\n    });\n}\nexports.input = input;\nexports.homeDir = os.homedir;\nfunction exit(code) {\n    process_1.default.exit(code);\n}\nexports.exit = exit;\nfunction srcDir() {\n    return __dirname;\n}\nexports.srcDir = srcDir;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.searchConfigDir = exports.isWindows = void 0;\nconst adapter_node_1 = require(\"./adapter.node\");\nexports.isWindows = process.platform === \"win32\";\nlet _configDir;\nif (process.platform === \"darwin\") {\n    _configDir = () => {\n        return adapter_node_1.path.join((0, adapter_node_1.homeDir)(), \"Library\", \"Application Support\", \"edgedb\");\n    };\n}\nelse if (process.platform === \"win32\") {\n    _configDir = () => {\n        var _a;\n        const localAppDataDir = (_a = process.env.LOCALAPPDATA) !== null && _a !== void 0 ? _a : adapter_node_1.path.join((0, adapter_node_1.homeDir)(), \"AppData\", \"Local\");\n        return adapter_node_1.path.join(localAppDataDir, \"EdgeDB\", \"config\");\n    };\n}\nelse {\n    _configDir = () => {\n        let xdgConfigDir = process.env.XDG_CONFIG_HOME;\n        if (!xdgConfigDir || !adapter_node_1.path.isAbsolute(xdgConfigDir)) {\n            xdgConfigDir = adapter_node_1.path.join((0, adapter_node_1.homeDir)(), \".config\");\n        }\n        return adapter_node_1.path.join(xdgConfigDir, \"edgedb\");\n    };\n}\nasync function searchConfigDir(...configPath) {\n    const filePath = adapter_node_1.path.join(_configDir(), ...configPath);\n    if (await (0, adapter_node_1.exists)(filePath)) {\n        return filePath;\n    }\n    const fallbackPath = adapter_node_1.path.join((0, adapter_node_1.homeDir)(), \".edgedb\", ...configPath);\n    if (await (0, adapter_node_1.exists)(fallbackPath)) {\n        return fallbackPath;\n    }\n    return filePath;\n}\nexports.searchConfigDir = searchConfigDir;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parseConnectArguments = exports.serverUtils = exports.findStashPath = void 0;\nconst adapter_node_1 = require(\"./adapter.node\");\nconst platform = __importStar(require(\"./platform\"));\nconst conUtils_1 = require(\"./conUtils\");\nconst projectDirCache = new Map();\nasync function findProjectDir(required = true) {\n    if (!required && !(0, adapter_node_1.hasFSReadPermission)()) {\n        return null;\n    }\n    const workingDir = process.cwd();\n    if (projectDirCache.has(workingDir)) {\n        return projectDirCache.get(workingDir);\n    }\n    let dir = workingDir;\n    const cwdDev = (await adapter_node_1.fs.stat(dir)).dev;\n    while (true) {\n        if (await (0, adapter_node_1.exists)(adapter_node_1.path.join(dir, \"edgedb.toml\"))) {\n            projectDirCache.set(workingDir, dir);\n            return dir;\n        }\n        const parentDir = adapter_node_1.path.join(dir, \"..\");\n        if (parentDir === dir || (await adapter_node_1.fs.stat(parentDir)).dev !== cwdDev) {\n            projectDirCache.set(workingDir, null);\n            return null;\n        }\n        dir = parentDir;\n    }\n}\nasync function findStashPath(projectDir) {\n    let projectPath = await adapter_node_1.fs.realpath(projectDir);\n    if (platform.isWindows && !projectPath.startsWith(\"\\\\\\\\\")) {\n        projectPath = \"\\\\\\\\?\\\\\" + projectPath;\n    }\n    const hash = (0, adapter_node_1.hashSHA1toHex)(projectPath);\n    const baseName = adapter_node_1.path.basename(projectPath);\n    const dirName = baseName + \"-\" + hash;\n    return platform.searchConfigDir(\"projects\", dirName);\n}\nexports.findStashPath = findStashPath;\nexports.serverUtils = {\n    findProjectDir,\n    findStashPath,\n    readFileUtf8: adapter_node_1.readFileUtf8,\n    searchConfigDir: platform.searchConfigDir,\n};\nexports.parseConnectArguments = (0, conUtils_1.getConnectArgumentsParser)(exports.serverUtils);\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2019-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RawConnection = void 0;\nconst adapter_node_1 = require(\"./adapter.node\");\nconst baseConn_1 = require(\"./baseConn\");\nconst utils_1 = require(\"./utils\");\nconst buffer_1 = require(\"./primitives/buffer\");\nconst event_1 = __importDefault(require(\"./primitives/event\"));\nconst chars = __importStar(require(\"./primitives/chars\"));\nconst scram = __importStar(require(\"./scram\"));\nconst errors = __importStar(require(\"./errors\"));\nvar AuthenticationStatuses;\n(function (AuthenticationStatuses) {\n    AuthenticationStatuses[AuthenticationStatuses[\"AUTH_OK\"] = 0] = \"AUTH_OK\";\n    AuthenticationStatuses[AuthenticationStatuses[\"AUTH_SASL\"] = 10] = \"AUTH_SASL\";\n    AuthenticationStatuses[AuthenticationStatuses[\"AUTH_SASL_CONTINUE\"] = 11] = \"AUTH_SASL_CONTINUE\";\n    AuthenticationStatuses[AuthenticationStatuses[\"AUTH_SASL_FINAL\"] = 12] = \"AUTH_SASL_FINAL\";\n})(AuthenticationStatuses || (AuthenticationStatuses = {}));\nconst _tlsOptions = new WeakMap();\nfunction getTlsOptions(config) {\n    if (_tlsOptions.has(config)) {\n        return _tlsOptions.get(config);\n    }\n    const tlsSecurity = config.tlsSecurity;\n    const tlsOptions = {\n        ALPNProtocols: [\"edgedb-binary\"],\n        servername: config.address[0],\n        rejectUnauthorized: tlsSecurity !== \"insecure\",\n    };\n    _tlsOptions.set(config, tlsOptions);\n    if (config._tlsCAData !== null) {\n        tlsOptions.ca = config._tlsCAData;\n    }\n    if (tlsSecurity === \"no_host_verification\") {\n        tlsOptions.checkServerIdentity = (hostname, cert) => {\n            const err = adapter_node_1.tls.checkServerIdentity(hostname, cert);\n            if (err === undefined) {\n                return undefined;\n            }\n            if (err.message.startsWith(\"Hostname/IP does not match certificate\")) {\n                return undefined;\n            }\n            return err;\n        };\n    }\n    return tlsOptions;\n}\nclass RawConnection extends baseConn_1.BaseRawConnection {\n    constructor(sock, config, registry) {\n        super(registry);\n        Object.defineProperty(this, \"config\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"sock\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"paused\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.config = config;\n        this.paused = false;\n        this.sock = sock;\n        this.sock.setNoDelay();\n        this.sock.on(\"error\", this._onError.bind(this));\n        this.sock.on(\"data\", this._onData.bind(this));\n        if (adapter_node_1.tls.TLSSocket && this.sock instanceof adapter_node_1.tls.TLSSocket) {\n            this.sock.on(\"secureConnect\", this._onConnect.bind(this));\n        }\n        else {\n            this.sock.on(\"connect\", this._onConnect.bind(this));\n        }\n        this.sock.on(\"close\", this._onClose.bind(this));\n    }\n    _onConnect() {\n        this.connWaiter.set();\n    }\n    _onClose() {\n        if (!this.connected) {\n            return;\n        }\n        const newErr = new errors.ClientConnectionClosedError(`the connection has been aborted`);\n        if (!this.connWaiter.done || this.messageWaiter) {\n            this._abortWaiters(newErr);\n        }\n        if (this.buffer.takeMessage() &&\n            this.buffer.getMessageType() === chars.$E) {\n            newErr.source = this._parseErrorMessage();\n        }\n        this._abortWithError(newErr);\n    }\n    _onError(err) {\n        const newErr = new errors.ClientConnectionClosedError(`network error: ${err}`);\n        newErr.source = err;\n        try {\n            this._abortWaiters(newErr);\n        }\n        finally {\n            this._abortWithError(newErr);\n        }\n    }\n    _onData(data) {\n        try {\n            this.buffer.feed(data);\n        }\n        catch (e) {\n            if (this.messageWaiter) {\n                this.messageWaiter.setError(e);\n                this.messageWaiter = null;\n            }\n            this._abortWithError(e);\n        }\n        if (this.messageWaiter) {\n            if (this.buffer.takeMessage()) {\n                this.messageWaiter.set();\n                this.messageWaiter = null;\n            }\n        }\n    }\n    async _waitForMessage() {\n        if (this.buffer.takeMessage()) {\n            return;\n        }\n        if (this.paused) {\n            this.paused = false;\n            this.sock.resume();\n        }\n        this.sock.ref();\n        this.messageWaiter = new event_1.default();\n        try {\n            await this.messageWaiter.wait();\n        }\n        finally {\n            this.sock.unref();\n        }\n    }\n    _sendData(data) {\n        this.sock.write(data);\n    }\n    static newSock(addr, options) {\n        if (typeof addr === \"string\") {\n            return adapter_node_1.net.createConnection(addr);\n        }\n        const [host, port] = addr;\n        if (options == null) {\n            return adapter_node_1.net.createConnection(port, host);\n        }\n        const opts = { ...options, host, port };\n        return adapter_node_1.tls.connect(opts);\n    }\n    _abort() {\n        if (this.sock && this.connected) {\n            this.sock.destroy();\n        }\n        super._abort();\n    }\n    async close() {\n        if (this.sock && this.connected) {\n            this.sock.write(new buffer_1.WriteMessageBuffer().beginMessage(chars.$X).endMessage().unwrap());\n        }\n        return await super.close();\n    }\n    static async connectWithTimeout(addr, config, registry, useTls = true) {\n        const sock = this.newSock(addr, useTls ? getTlsOptions(config.connectionParams) : undefined);\n        const conn = new this(sock, config, registry);\n        const connPromise = conn.connect();\n        let timeoutCb = null;\n        let timeoutHappened = false;\n        if (config.connectTimeout) {\n            timeoutCb = setTimeout(() => {\n                if (!conn.connected) {\n                    timeoutHappened = true;\n                    conn.sock.destroy(new errors.ClientConnectionTimeoutError(`connection timed out (${config.connectTimeout}ms)`));\n                }\n            }, config.connectTimeout);\n        }\n        try {\n            await connPromise;\n        }\n        catch (e) {\n            conn._abort();\n            if (timeoutHappened && e instanceof errors.ClientConnectionClosedError) {\n                throw new errors.ClientConnectionTimeoutError(`connection timed out (${config.connectTimeout}ms)`);\n            }\n            if (e instanceof errors.EdgeDBError) {\n                throw e;\n            }\n            else {\n                let err;\n                switch (e.code) {\n                    case \"EPROTO\":\n                        if (useTls === true) {\n                            try {\n                                return this.connectWithTimeout(addr, config, registry, false);\n                            }\n                            catch {\n                            }\n                        }\n                        err = new errors.ClientConnectionFailedError(`${e.message}\\n` +\n                            `Attempted to connect using the following credentials:\\n` +\n                            `${config.connectionParams.explainConfig()}\\n`);\n                        break;\n                    case \"ECONNREFUSED\":\n                    case \"ECONNABORTED\":\n                    case \"ECONNRESET\":\n                    case \"ENOTFOUND\":\n                    case \"ENOENT\":\n                        err = new errors.ClientConnectionFailedTemporarilyError(`${e.message}\\n` +\n                            `Attempted to connect using the following credentials:\\n` +\n                            `${config.connectionParams.explainConfig()}\\n`);\n                        break;\n                    default:\n                        err = new errors.ClientConnectionFailedError(`${e.message}\\n` +\n                            `Attempted to connect using the following credentials:\\n` +\n                            `${config.connectionParams.explainConfig()}\\n`);\n                        break;\n                }\n                err.source = e;\n                throw err;\n            }\n        }\n        finally {\n            if (timeoutCb != null) {\n                clearTimeout(timeoutCb);\n            }\n        }\n        return conn;\n    }\n    async connect() {\n        await this.connWaiter.wait();\n        if (this.sock instanceof adapter_node_1.tls.TLSSocket) {\n            if (this.sock.alpnProtocol !== \"edgedb-binary\") {\n                throw new errors.ClientConnectionFailedError(\"The server doesn't support the edgedb-binary protocol.\");\n            }\n        }\n        const handshake = new buffer_1.WriteMessageBuffer();\n        handshake\n            .beginMessage(chars.$V)\n            .writeInt16(this.protocolVersion[0])\n            .writeInt16(this.protocolVersion[1]);\n        const clientHandshakeOptions = {\n            user: this.config.connectionParams.user,\n            database: this.config.connectionParams.database,\n        };\n        if (this.config.connectionParams.secretKey != null) {\n            clientHandshakeOptions.secret_key =\n                this.config.connectionParams.secretKey;\n        }\n        handshake.writeInt16(Object.keys(clientHandshakeOptions).length);\n        for (const [key, value] of Object.entries(clientHandshakeOptions)) {\n            handshake.writeString(key).writeString(value);\n        }\n        handshake.writeInt16(0);\n        handshake.endMessage();\n        this.sock.write(handshake.unwrap());\n        while (true) {\n            if (!this.buffer.takeMessage()) {\n                await this._waitForMessage();\n            }\n            const mtype = this.buffer.getMessageType();\n            switch (mtype) {\n                case chars.$v: {\n                    const hi = this.buffer.readInt16();\n                    const lo = this.buffer.readInt16();\n                    this._parseHeaders();\n                    this.buffer.finishMessage();\n                    const proposed = [hi, lo];\n                    if ((0, utils_1.versionGreaterThan)(proposed, baseConn_1.PROTO_VER) ||\n                        (0, utils_1.versionGreaterThan)(baseConn_1.PROTO_VER_MIN, proposed)) {\n                        throw new errors.UnsupportedProtocolVersionError(`the server requested an unsupported version of ` +\n                            `the protocol ${hi}.${lo}`);\n                    }\n                    this.protocolVersion = [hi, lo];\n                    this.isLegacyProtocol = !(0, utils_1.versionGreaterThanOrEqual)(this.protocolVersion, [1, 0]);\n                    break;\n                }\n                case chars.$R: {\n                    const status = this.buffer.readInt32();\n                    if (status === AuthenticationStatuses.AUTH_OK) {\n                        this.buffer.finishMessage();\n                    }\n                    else if (status === AuthenticationStatuses.AUTH_SASL) {\n                        await this._authSasl();\n                    }\n                    else {\n                        throw new errors.ProtocolError(`unsupported authentication method requested by the ` +\n                            `server: ${status}`);\n                    }\n                    break;\n                }\n                case chars.$K: {\n                    this.serverSecret = this.buffer.readBuffer(32);\n                    this.buffer.finishMessage();\n                    break;\n                }\n                case chars.$E: {\n                    throw this._parseErrorMessage();\n                }\n                case chars.$s: {\n                    this._parseDescribeStateMessage();\n                    break;\n                }\n                case chars.$Z: {\n                    this._parseSyncMessage();\n                    if (!(this.sock instanceof adapter_node_1.tls.TLSSocket) &&\n                        typeof Deno === \"undefined\" &&\n                        (0, utils_1.versionGreaterThanOrEqual)(this.protocolVersion, [0, 11])) {\n                        const [major, minor] = this.protocolVersion;\n                        throw new errors.ProtocolError(`the protocol version requires TLS: ${major}.${minor}`);\n                    }\n                    this.connected = true;\n                    return;\n                }\n                default:\n                    this._fallthrough();\n            }\n        }\n    }\n    async _authSasl() {\n        const numMethods = this.buffer.readInt32();\n        if (numMethods <= 0) {\n            throw new errors.ProtocolError(\"the server requested SASL authentication but did not offer any methods\");\n        }\n        const methods = [];\n        let foundScram256 = false;\n        for (let _ = 0; _ < numMethods; _++) {\n            const method = this.buffer.readString();\n            if (method === \"SCRAM-SHA-256\") {\n                foundScram256 = true;\n            }\n            methods.push(method);\n        }\n        this.buffer.finishMessage();\n        if (!foundScram256) {\n            throw new errors.ProtocolError(`the server offered the following SASL authentication ` +\n                `methods: ${methods.join(\", \")}, neither are supported.`);\n        }\n        const clientNonce = await scram.generateNonce();\n        const [clientFirst, clientFirstBare] = scram.buildClientFirstMessage(clientNonce, this.config.connectionParams.user);\n        const wb = new buffer_1.WriteMessageBuffer();\n        wb.beginMessage(chars.$p)\n            .writeString(\"SCRAM-SHA-256\")\n            .writeString(clientFirst)\n            .endMessage();\n        this.sock.write(wb.unwrap());\n        await this._ensureMessage(chars.$R, \"SASLContinue\");\n        let status = this.buffer.readInt32();\n        if (status !== AuthenticationStatuses.AUTH_SASL_CONTINUE) {\n            throw new errors.ProtocolError(`expected SASLContinue from the server, received ${status}`);\n        }\n        const serverFirst = this.buffer.readString();\n        this.buffer.finishMessage();\n        const [serverNonce, salt, itercount] = scram.parseServerFirstMessage(serverFirst);\n        const [clientFinal, expectedServerSig] = await scram.buildClientFinalMessage(this.config.connectionParams.password || \"\", salt, itercount, clientFirstBare, serverFirst, serverNonce);\n        wb.reset().beginMessage(chars.$r).writeString(clientFinal).endMessage();\n        this.sock.write(wb.unwrap());\n        await this._ensureMessage(chars.$R, \"SASLFinal\");\n        status = this.buffer.readInt32();\n        if (status !== AuthenticationStatuses.AUTH_SASL_FINAL) {\n            throw new errors.ProtocolError(`expected SASLFinal from the server, received ${status}`);\n        }\n        const serverFinal = this.buffer.readString();\n        this.buffer.finishMessage();\n        const serverSig = scram.parseServerFinalMessage(serverFinal);\n        if (!scram.bufferEquals(serverSig, expectedServerSig)) {\n            throw new errors.ProtocolError(\"server SCRAM proof does not match\");\n        }\n    }\n    async _ensureMessage(expectedMtype, err) {\n        if (!this.buffer.takeMessage()) {\n            await this._waitForMessage();\n        }\n        const mtype = this.buffer.getMessageType();\n        switch (mtype) {\n            case chars.$E: {\n                throw this._parseErrorMessage();\n            }\n            case expectedMtype: {\n                return;\n            }\n            default: {\n                throw new errors.UnexpectedMessageError(`expected ${err} from the server, received ${chars.chr(mtype)}`);\n            }\n        }\n    }\n}\nexports.RawConnection = RawConnection;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createHttpClient = exports.createClient = void 0;\nconst baseClient_1 = require(\"./baseClient\");\nconst browserClient_1 = require(\"./browserClient\");\nconst conUtils_server_1 = require(\"./conUtils.server\");\nconst options_1 = require(\"./options\");\nconst rawConn_1 = require(\"./rawConn\");\nclass ClientPool extends baseClient_1.BaseClientPool {\n    constructor() {\n        super(...arguments);\n        Object.defineProperty(this, \"isStateless\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"_connectWithTimeout\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: rawConn_1.RawConnection.connectWithTimeout.bind(rawConn_1.RawConnection)\n        });\n    }\n}\nfunction createClient(options) {\n    return new baseClient_1.Client(new ClientPool(conUtils_server_1.parseConnectArguments, typeof options === \"string\" ? { dsn: options } : options !== null && options !== void 0 ? options : {}), options_1.Options.defaults());\n}\nexports.createClient = createClient;\nfunction createHttpClient(options) {\n    return new baseClient_1.Client(new browserClient_1.FetchClientPool(conUtils_server_1.parseConnectArguments, typeof options === \"string\" ? { dsn: options } : options !== null && options !== void 0 ? options : {}), options_1.Options.defaults());\n}\nexports.createHttpClient = createHttpClient;\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2019-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports._plugJSBI = exports._ReadBuffer = exports._CodecsRegistry = exports.Range = exports.ConfigMemory = exports.DateDuration = exports.RelativeDuration = exports.Duration = exports.LocalTime = exports.LocalDate = exports.LocalDateTime = void 0;\nvar datetime_1 = require(\"./datatypes/datetime\");\nObject.defineProperty(exports, \"LocalDateTime\", { enumerable: true, get: function () { return datetime_1.LocalDateTime; } });\nObject.defineProperty(exports, \"LocalDate\", { enumerable: true, get: function () { return datetime_1.LocalDate; } });\nObject.defineProperty(exports, \"LocalTime\", { enumerable: true, get: function () { return datetime_1.LocalTime; } });\nObject.defineProperty(exports, \"Duration\", { enumerable: true, get: function () { return datetime_1.Duration; } });\nObject.defineProperty(exports, \"RelativeDuration\", { enumerable: true, get: function () { return datetime_1.RelativeDuration; } });\nObject.defineProperty(exports, \"DateDuration\", { enumerable: true, get: function () { return datetime_1.DateDuration; } });\nvar memory_1 = require(\"./datatypes/memory\");\nObject.defineProperty(exports, \"ConfigMemory\", { enumerable: true, get: function () { return memory_1.ConfigMemory; } });\nvar range_1 = require(\"./datatypes/range\");\nObject.defineProperty(exports, \"Range\", { enumerable: true, get: function () { return range_1.Range; } });\n__exportStar(require(\"./errors\"), exports);\nconst reg = __importStar(require(\"./codecs/registry\"));\nconst buf = __importStar(require(\"./primitives/buffer\"));\nexports._CodecsRegistry = reg.CodecsRegistry;\nexports._ReadBuffer = buf.ReadBuffer;\nconst bigint_1 = require(\"./primitives/bigint\");\nexports._plugJSBI = bigint_1.plugJSBI;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OperatorKind = exports.SelectModifierKind = exports.ExpressionKind = exports.TypeKind = exports.Cardinality = void 0;\nvar Cardinality;\n(function (Cardinality) {\n    Cardinality[\"AtMostOne\"] = \"AtMostOne\";\n    Cardinality[\"One\"] = \"One\";\n    Cardinality[\"Many\"] = \"Many\";\n    Cardinality[\"AtLeastOne\"] = \"AtLeastOne\";\n    Cardinality[\"Empty\"] = \"Empty\";\n})(Cardinality = exports.Cardinality || (exports.Cardinality = {}));\nvar TypeKind;\n(function (TypeKind) {\n    TypeKind[\"scalar\"] = \"scalar\";\n    TypeKind[\"enum\"] = \"enum\";\n    TypeKind[\"object\"] = \"object\";\n    TypeKind[\"namedtuple\"] = \"namedtuple\";\n    TypeKind[\"tuple\"] = \"tuple\";\n    TypeKind[\"array\"] = \"array\";\n    TypeKind[\"range\"] = \"range\";\n})(TypeKind = exports.TypeKind || (exports.TypeKind = {}));\nvar ExpressionKind;\n(function (ExpressionKind) {\n    ExpressionKind[\"Set\"] = \"Set\";\n    ExpressionKind[\"Array\"] = \"Array\";\n    ExpressionKind[\"Tuple\"] = \"Tuple\";\n    ExpressionKind[\"NamedTuple\"] = \"NamedTuple\";\n    ExpressionKind[\"TuplePath\"] = \"TuplePath\";\n    ExpressionKind[\"PathNode\"] = \"PathNode\";\n    ExpressionKind[\"PathLeaf\"] = \"PathLeaf\";\n    ExpressionKind[\"Literal\"] = \"Literal\";\n    ExpressionKind[\"Cast\"] = \"Cast\";\n    ExpressionKind[\"Select\"] = \"Select\";\n    ExpressionKind[\"Update\"] = \"Update\";\n    ExpressionKind[\"Delete\"] = \"Delete\";\n    ExpressionKind[\"Insert\"] = \"Insert\";\n    ExpressionKind[\"InsertUnlessConflict\"] = \"InsertUnlessConflict\";\n    ExpressionKind[\"Function\"] = \"Function\";\n    ExpressionKind[\"Operator\"] = \"Operator\";\n    ExpressionKind[\"For\"] = \"For\";\n    ExpressionKind[\"ForVar\"] = \"ForVar\";\n    ExpressionKind[\"TypeIntersection\"] = \"TypeIntersection\";\n    ExpressionKind[\"Alias\"] = \"Alias\";\n    ExpressionKind[\"With\"] = \"With\";\n    ExpressionKind[\"WithParams\"] = \"WithParams\";\n    ExpressionKind[\"Param\"] = \"Param\";\n    ExpressionKind[\"OptionalParam\"] = \"OptionalParam\";\n    ExpressionKind[\"Detached\"] = \"Detached\";\n    ExpressionKind[\"Global\"] = \"Global\";\n    ExpressionKind[\"PolyShapeElement\"] = \"PolyShapeElement\";\n    ExpressionKind[\"Group\"] = \"Group\";\n})(ExpressionKind = exports.ExpressionKind || (exports.ExpressionKind = {}));\nvar SelectModifierKind;\n(function (SelectModifierKind) {\n    SelectModifierKind[\"filter\"] = \"filter\";\n    SelectModifierKind[\"order_by\"] = \"order_by\";\n    SelectModifierKind[\"offset\"] = \"offset\";\n    SelectModifierKind[\"limit\"] = \"limit\";\n})(SelectModifierKind = exports.SelectModifierKind || (exports.SelectModifierKind = {}));\nvar OperatorKind;\n(function (OperatorKind) {\n    OperatorKind[\"Infix\"] = \"Infix\";\n    OperatorKind[\"Postfix\"] = \"Postfix\";\n    OperatorKind[\"Prefix\"] = \"Prefix\";\n    OperatorKind[\"Ternary\"] = \"Ternary\";\n})(OperatorKind = exports.OperatorKind || (exports.OperatorKind = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.util = void 0;\nvar util;\n(function (util) {\n    function assertNever(arg, error) {\n        throw error !== null && error !== void 0 ? error : new Error(`${arg} is supposed to be of \"never\" type`);\n    }\n    util.assertNever = assertNever;\n    function splitName(name) {\n        if (!name.includes(\"::\"))\n            throw new Error(`Invalid FQN ${name}`);\n        const parts = name.split(\"::\");\n        return {\n            mod: parts.slice(0, -1).join(\"::\"),\n            name: parts[parts.length - 1],\n        };\n    }\n    util.splitName = splitName;\n    function toIdent(name) {\n        if (name.includes(\"::\")) {\n            throw new Error(`toIdent: invalid name ${name}`);\n        }\n        return name.replace(/([^a-zA-Z0-9_]+)/g, \"_\");\n    }\n    util.toIdent = toIdent;\n    util.deduplicate = (args) => [...new Set(args)];\n    util.getFromArrayMap = (map, id) => {\n        return map[id] || [];\n    };\n    util.defineProperty = (obj, name, def) => {\n        return Object.defineProperty(obj, name, def);\n    };\n    util.defineGetter = (obj, name, getter) => {\n        return Object.defineProperty(obj, name, {\n            get: getter,\n            enumerable: true,\n        });\n    };\n    util.defineMethod = (obj, name, method) => {\n        obj[name] = method.bind(obj);\n        return obj;\n    };\n    function flatMap(array, callbackfn) {\n        return Array.prototype.concat(...array.map(callbackfn));\n    }\n    util.flatMap = flatMap;\n    function omitDollarPrefixed(object) {\n        const obj = {};\n        for (const key of Object.keys(object)) {\n            if (!key.startsWith(\"$\")) {\n                obj[key] = object[key];\n            }\n        }\n        return obj;\n    }\n    util.omitDollarPrefixed = omitDollarPrefixed;\n})(util = exports.util || (exports.util = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2020-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.StrictMap = void 0;\nclass StrictMap extends Map {\n    get(key) {\n        if (!this.has(key)) {\n            throw new Error(`key \"${key}\" is not found`);\n        }\n        return super.get(key);\n    }\n}\nexports.StrictMap = StrictMap;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.reservedKeywords = void 0;\nexports.reservedKeywords = new Set([\n    \"__edgedbsys__\",\n    \"__edgedbtpl__\",\n    \"__source__\",\n    \"__std__\",\n    \"__subject__\",\n    \"__type__\",\n    \"abort\",\n    \"alter\",\n    \"analyze\",\n    \"and\",\n    \"anyarray\",\n    \"anytuple\",\n    \"anytype\",\n    \"begin\",\n    \"case\",\n    \"check\",\n    \"commit\",\n    \"configure\",\n    \"create\",\n    \"deallocate\",\n    \"declare\",\n    \"delete\",\n    \"describe\",\n    \"detached\",\n    \"discard\",\n    \"distinct\",\n    \"do\",\n    \"drop\",\n    \"else\",\n    \"empty\",\n    \"end\",\n    \"execute\",\n    \"exists\",\n    \"explain\",\n    \"extending\",\n    \"fetch\",\n    \"filter\",\n    \"for\",\n    \"get\",\n    \"global\",\n    \"grant\",\n    \"group\",\n    \"if\",\n    \"ilike\",\n    \"import\",\n    \"in\",\n    \"insert\",\n    \"introspect\",\n    \"is\",\n    \"like\",\n    \"limit\",\n    \"listen\",\n    \"load\",\n    \"lock\",\n    \"match\",\n    \"module\",\n    \"move\",\n    \"not\",\n    \"notify\",\n    \"offset\",\n    \"optional\",\n    \"or\",\n    \"order\",\n    \"over\",\n    \"partition\",\n    \"policy\",\n    \"populate\",\n    \"prepare\",\n    \"raise\",\n    \"refresh\",\n    \"reindex\",\n    \"release\",\n    \"reset\",\n    \"revoke\",\n    \"rollback\",\n    \"select\",\n    \"set\",\n    \"single\",\n    \"start\",\n    \"typeof\",\n    \"union\",\n    \"update\",\n    \"variadic\",\n    \"when\",\n    \"window\",\n    \"with\",\n]);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.types = exports.topoSort = exports.getTypes = exports.typeMapping = void 0;\nconst strictMap_1 = require(\"../strictMap\");\nconst numberType = {\n    id: \"00000000-0000-0000-0000-0000000001ff\",\n    name: \"std::number\",\n    is_abstract: false,\n    is_seq: false,\n    kind: \"scalar\",\n    enum_values: null,\n    material_id: null,\n    bases: [],\n};\nexports.typeMapping = new Map([\n    [\n        \"00000000-0000-0000-0000-000000000103\",\n        numberType,\n    ],\n    [\n        \"00000000-0000-0000-0000-000000000104\",\n        numberType,\n    ],\n    [\n        \"00000000-0000-0000-0000-000000000105\",\n        numberType,\n    ],\n    [\n        \"00000000-0000-0000-0000-000000000106\",\n        numberType,\n    ],\n    [\n        \"00000000-0000-0000-0000-000000000107\",\n        numberType,\n    ],\n]);\nasync function getTypes(cxn, params) {\n    var _a, _b, _c, _d, _e;\n    const debug = (params === null || params === void 0 ? void 0 : params.debug) === true;\n    const version = await cxn.queryRequiredSingle(`select sys::get_version().major;`);\n    const v2Plus = version >= 2;\n    const QUERY = `\n    WITH\n      MODULE schema,\n\n      material_scalars := (\n        SELECT ScalarType\n        FILTER NOT .abstract\n           AND NOT EXISTS .enum_values\n           AND NOT EXISTS (SELECT .ancestors FILTER NOT .abstract)\n      )\n\n    SELECT Type {\n      id,\n      name :=\n        array_join(array_agg([IS ObjectType].union_of.name), ' | ')\n        IF EXISTS [IS ObjectType].union_of\n        ELSE .name,\n      is_abstract := .abstract,\n\n      kind := 'object' IF Type IS ObjectType ELSE\n              'scalar' IF Type IS ScalarType ELSE\n              'array' IF Type IS Array ELSE\n              'tuple' IF Type IS Tuple ELSE\n              ${v2Plus ? `'range' IF Type IS Range ELSE` : ``}\n              'unknown',\n\n      [IS ScalarType].enum_values,\n      is_seq := 'std::sequence' in [IS ScalarType].ancestors.name,\n      # for sequence (abstract type that has non-abstract ancestor)\n      single material_id := (\n        SELECT x := Type[IS ScalarType].ancestors\n        FILTER x IN material_scalars\n        LIMIT 1\n      ).id,\n\n      [IS InheritingObject].bases: {\n        id\n      } ORDER BY @index ASC,\n\n      [IS ObjectType].union_of,\n      [IS ObjectType].intersection_of,\n      [IS ObjectType].pointers: {\n        card := (\"One\" IF .required ELSE \"AtMostOne\") IF <str>.cardinality = \"One\" ELSE (\"AtLeastOne\" IF .required ELSE \"Many\"),\n        name,\n        target_id := .target.id,\n        kind := 'link' IF .__type__.name = 'schema::Link' ELSE 'property',\n        is_exclusive := exists (select .constraints filter .name = 'std::exclusive'),\n        is_computed := len(.computed_fields) != 0,\n        is_readonly := .readonly,\n        has_default := EXISTS .default or (\"std::sequence\" in .target[IS ScalarType].ancestors.name),\n        [IS Link].pointers: {\n          card := (\"One\" IF .required ELSE \"AtMostOne\") IF <str>.cardinality = \"One\" ELSE (\"AtLeastOne\" IF .required ELSE \"Many\"),\n          name := '@' ++ .name,\n          target_id := .target.id,\n          kind := 'link' IF .__type__.name = 'schema::Link' ELSE 'property',\n          is_computed := len(.computed_fields) != 0,\n          is_readonly := .readonly\n        } filter .name != '@source' and .name != '@target',\n      } FILTER @is_owned,\n      exclusives := assert_distinct((\n        [is schema::ObjectType].constraints\n        union\n        [is schema::ObjectType].pointers.constraints\n      ) {\n        target := (.subject[is schema::Property].name ?? .subject[is schema::Link].name ?? .subjectexpr)\n      } filter .name = 'std::exclusive'),\n      backlinks := (\n         SELECT DETACHED Link\n         FILTER .target = Type\n           AND NOT EXISTS .source[IS ObjectType].union_of\n        ) {\n        card := \"AtMostOne\"\n          IF\n          EXISTS (select .constraints filter .name = 'std::exclusive')\n          ELSE\n          \"Many\",\n        name := '<' ++ .name ++ '[is ' ++ assert_exists(.source.name) ++ ']',\n        stub := .name,\n        target_id := .source.id,\n        kind := 'link',\n        is_exclusive := (EXISTS (select .constraints filter .name = 'std::exclusive')) AND <str>.cardinality = \"One\",\n      },\n      backlink_stubs := array_agg((\n        WITH\n          stubs := DISTINCT (SELECT DETACHED Link FILTER .target = Type).name,\n          baseObjectId := (SELECT DETACHED ObjectType FILTER .name = 'std::BaseObject' LIMIT 1).id\n        FOR stub in { stubs }\n        UNION (\n          SELECT {\n            card := \"Many\",\n            name := '<' ++ stub,\n            target_id := baseObjectId,\n            kind := 'link',\n            is_exclusive := false,\n          }\n        )\n      )),\n      array_element_id := [IS Array].element_type.id,\n\n      tuple_elements := (SELECT [IS Tuple].element_types {\n        target_id := .type.id,\n        name\n      } ORDER BY @index ASC),\n      ${v2Plus ? `range_element_id := [IS Range].element_type.id,` : ``}\n    }\n    ORDER BY .name;\n  `;\n    const _types = JSON.parse(await cxn.queryJSON(QUERY));\n    if (debug)\n        console.log(JSON.stringify(_types, null, 2));\n    for (const type of _types) {\n        if (Array.isArray(type.backlinks)) {\n            for (const backlink of type.backlinks) {\n                const isName = backlink.name.match(/\\[is (.+)\\]/)[1];\n                if (isName.split(\"::\").length === 2 && isName.startsWith(\"default::\")) {\n                    backlink.name = backlink.name.replace(/\\[is (.+)\\]/, `[is ${isName.slice(9)}]`);\n                }\n            }\n        }\n        switch (type.kind) {\n            case \"scalar\":\n                if (exports.typeMapping.has(type.id)) {\n                    type.cast_type = exports.typeMapping.get(type.id).id;\n                }\n                if (type.is_seq) {\n                    type.cast_type = numberType.id;\n                }\n                if (type.name !== \"std::sequence\" &&\n                    ((_a = type.bases[0]) === null || _a === void 0 ? void 0 : _a.id) === type.material_id) {\n                    type.cast_type =\n                        (_c = (_b = exports.typeMapping.get(type.material_id)) === null || _b === void 0 ? void 0 : _b.id) !== null && _c !== void 0 ? _c : type.material_id;\n                }\n                break;\n            case \"range\":\n                type.range_element_id =\n                    (_e = (_d = exports.typeMapping.get(type.range_element_id)) === null || _d === void 0 ? void 0 : _d.id) !== null && _e !== void 0 ? _e : type.range_element_id;\n                break;\n            case \"object\":\n                const ptrs = {};\n                for (const ptr of type.pointers) {\n                    ptrs[ptr.name] = ptr;\n                }\n                const rawExclusives = type.exclusives;\n                const exclusives = [];\n                for (const ex of rawExclusives) {\n                    const target = ex.target;\n                    if (target in ptrs) {\n                        exclusives.push({ [ex.target]: ptrs[ex.target] });\n                    }\n                    if (target[0] === \"(\" && target[target.length - 1] === \")\") {\n                        const targets = target\n                            .slice(1, -1)\n                            .split(\" \")\n                            .map((t) => {\n                            t = t.trim();\n                            if (t[0] === \".\")\n                                t = t.slice(1);\n                            if (t[t.length - 1] === \",\")\n                                t = t.slice(0, -1);\n                            return t;\n                        });\n                        const newEx = {};\n                        if (!targets.every((t) => t in ptrs)) {\n                            continue;\n                        }\n                        for (const t of targets) {\n                            newEx[t] = ptrs[t];\n                        }\n                        exclusives.push(newEx);\n                    }\n                }\n                type.exclusives = exclusives;\n                break;\n        }\n    }\n    _types.push(numberType);\n    const types = topoSort(_types);\n    for (const [_, type] of types) {\n        if (type.kind === \"object\" && type.union_of.length) {\n            const unionTypes = type.union_of.map(({ id }) => {\n                const t = types.get(id);\n                if (t.kind !== \"object\") {\n                    throw new Error(`type '${t.name}' of union '${type.name}' is not an object type`);\n                }\n                return t;\n            });\n            const [first, ...rest] = unionTypes;\n            const restPointerNames = rest.map((t) => new Set(t.pointers.map((p) => p.name)));\n            for (const pointer of first.pointers) {\n                if (restPointerNames.every((names) => names.has(pointer.name))) {\n                    type.pointers.push(pointer);\n                }\n            }\n            type.backlinks = [];\n            type.backlink_stubs = [];\n        }\n    }\n    return types;\n}\nexports.getTypes = getTypes;\nexports.types = getTypes;\nfunction topoSort(types) {\n    const graph = new strictMap_1.StrictMap();\n    const adj = new strictMap_1.StrictMap();\n    for (const type of types) {\n        graph.set(type.id, type);\n    }\n    for (const type of types) {\n        if (type.kind !== \"object\" && type.kind !== \"scalar\") {\n            continue;\n        }\n        for (const { id: base } of type.bases) {\n            if (!graph.has(base)) {\n                throw new Error(`reference to an unknown object type: ${base}`);\n            }\n            if (!adj.has(type.id)) {\n                adj.set(type.id, new Set());\n            }\n            adj.get(type.id).add(base);\n        }\n    }\n    const visiting = new Set();\n    const visited = new Set();\n    const sorted = new strictMap_1.StrictMap();\n    const visit = (type) => {\n        if (visiting.has(type.name)) {\n            const last = Array.from(visiting).slice(1, 2);\n            throw new Error(`dependency cycle between ${type.name} and ${last}`);\n        }\n        if (!visited.has(type.id)) {\n            visiting.add(type.name);\n            if (adj.has(type.id)) {\n                for (const adjId of adj.get(type.id).values()) {\n                    visit(graph.get(adjId));\n                }\n            }\n            sorted.set(type.id, type);\n            visited.add(type.id);\n            visiting.delete(type.name);\n        }\n    };\n    for (const type of types) {\n        visit(type);\n    }\n    return sorted;\n}\nexports.topoSort = topoSort;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.casts = void 0;\nconst types_1 = require(\"./types\");\nconst reachableFrom = (source, adj, seen = new Set()) => {\n    const reachable = new Set();\n    if (seen.has(source))\n        return [];\n    seen.add(source);\n    (adj[source] || []).map((cast) => {\n        reachable.add(cast);\n        for (const item of reachableFrom(cast, adj, seen)) {\n            reachable.add(item);\n        }\n    });\n    return [...reachable];\n};\nconst casts = async (cxn, params) => {\n    var _a, _b, _c, _d;\n    var _e, _f, _g, _h;\n    const allCastsRaw = await cxn.queryJSON(`WITH MODULE schema\n        SELECT Cast {\n            id,\n            source := .from_type { id, name },\n            target := .to_type { id, name },\n            allow_assignment,\n            allow_implicit,\n        }\n        FILTER .from_type IS ScalarType\n        AND .to_type IS ScalarType\n        # AND .from_type.is_abstract = false\n        # AND .to_type.is_abstract = false\n        `);\n    const allCasts = JSON.parse(allCastsRaw);\n    const types = new Set();\n    const typesById = {};\n    const castsById = {};\n    const castsBySource = {};\n    const implicitCastsBySource = {};\n    const implicitCastsByTarget = {};\n    const assignmentCastsBySource = {};\n    const assignmentCastsByTarget = {};\n    for (const cast of allCasts) {\n        if (types_1.typeMapping.has(cast.source.id) || types_1.typeMapping.has(cast.target.id)) {\n            cast.allow_implicit = false;\n            cast.allow_assignment = false;\n        }\n        typesById[cast.source.id] = cast.source;\n        typesById[cast.target.id] = cast.target;\n        types.add(cast.source.id);\n        types.add(cast.target.id);\n        castsById[cast.id] = cast;\n        castsBySource[cast.source.id] = castsBySource[cast.source.id] || [];\n        castsBySource[cast.source.id].push(cast.target.id);\n        if (cast.allow_assignment || cast.allow_implicit) {\n            (_a = assignmentCastsBySource[_e = cast.source.id]) !== null && _a !== void 0 ? _a : (assignmentCastsBySource[_e] = []);\n            assignmentCastsBySource[cast.source.id].push(cast.target.id);\n            (_b = assignmentCastsByTarget[_f = cast.target.id]) !== null && _b !== void 0 ? _b : (assignmentCastsByTarget[_f] = []);\n            assignmentCastsByTarget[cast.target.id].push(cast.source.id);\n        }\n        if (cast.allow_implicit) {\n            (_c = implicitCastsBySource[_g = cast.source.id]) !== null && _c !== void 0 ? _c : (implicitCastsBySource[_g] = []);\n            implicitCastsBySource[cast.source.id].push(cast.target.id);\n            (_d = implicitCastsByTarget[_h = cast.target.id]) !== null && _d !== void 0 ? _d : (implicitCastsByTarget[_h] = []);\n            implicitCastsByTarget[cast.target.id].push(cast.source.id);\n        }\n    }\n    const castMap = {};\n    const implicitCastMap = {};\n    const implicitCastFromMap = {};\n    const assignmentCastMap = {};\n    const assignableByMap = {};\n    for (const type of [...types]) {\n        castMap[type] = castsBySource[type] || [];\n        implicitCastMap[type] = reachableFrom(type, implicitCastsBySource);\n        implicitCastFromMap[type] = reachableFrom(type, implicitCastsByTarget);\n        assignmentCastMap[type] = reachableFrom(type, assignmentCastsBySource);\n        assignableByMap[type] = reachableFrom(type, assignmentCastsByTarget);\n    }\n    if ((params === null || params === void 0 ? void 0 : params.debug) === true) {\n        console.log(`\\nIMPLICIT`);\n        for (const [fromId, castArr] of Object.entries(implicitCastMap)) {\n            console.log(`${typesById[fromId].name} implicitly castable to: [${castArr\n                .map((id) => typesById[id].name)\n                .join(\", \")}]`);\n        }\n        console.log(\"\");\n        for (const [fromId, castArr] of Object.entries(implicitCastFromMap)) {\n            console.log(`${typesById[fromId].name} implicitly castable from: [${castArr\n                .map((id) => typesById[id].name)\n                .join(\", \")}]`);\n        }\n        console.log(`\\nASSIGNABLE TO`);\n        for (const [fromId, castArr] of Object.entries(assignmentCastMap)) {\n            console.log(`${typesById[fromId].name} assignable to: [${castArr\n                .map((id) => typesById[id].name)\n                .join(\", \")}]`);\n        }\n        console.log(`\\nASSIGNABLE BY`);\n        for (const [fromId, castArr] of Object.entries(assignableByMap)) {\n            console.log(`${typesById[fromId].name} assignable by: [${castArr\n                .map((id) => typesById[id].name)\n                .join(\", \")}]`);\n        }\n        console.log(`\\nEXPLICIT`);\n        for (const [fromId, castArr] of Object.entries(castMap)) {\n            console.log(`${typesById[fromId].name} castable to: [${castArr\n                .map((id) => {\n                return typesById[id].name;\n            })\n                .join(\", \")}]`);\n        }\n    }\n    return {\n        castsById,\n        typesById,\n        castMap,\n        implicitCastMap,\n        implicitCastFromMap,\n        assignmentCastMap,\n        assignableByMap,\n    };\n};\nexports.casts = casts;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.replaceNumberTypes = exports.functions = void 0;\nconst strictMap_1 = require(\"../strictMap\");\nconst types_1 = require(\"./types\");\nconst functions = async (cxn) => {\n    var _a;\n    const functionsJson = await cxn.queryJSON(`\n    with module schema\n    select Function {\n      id,\n      name,\n      annotations: {\n        name,\n        @value\n      } filter .name = 'std::description',\n      return_type: {id, name},\n      return_typemod,\n      params: {\n        name,\n        type: {id, name},\n        kind,\n        typemod,\n        hasDefault := exists .default,\n      } order by @index,\n      preserves_optionality,\n    } filter .internal = false\n  `);\n    const functionMap = new strictMap_1.StrictMap();\n    const seenFuncDefHashes = new Set();\n    for (const func of JSON.parse(functionsJson)) {\n        const { name } = func;\n        if (!functionMap.has(name)) {\n            functionMap.set(name, []);\n        }\n        const funcDef = {\n            ...func,\n            description: (_a = func.annotations[0]) === null || _a === void 0 ? void 0 : _a[\"@value\"],\n        };\n        replaceNumberTypes(funcDef);\n        const hash = hashFuncDef(funcDef);\n        if (!seenFuncDefHashes.has(hash)) {\n            functionMap.get(name).push(funcDef);\n            seenFuncDefHashes.add(hash);\n        }\n    }\n    return functionMap;\n};\nexports.functions = functions;\nfunction replaceNumberTypes(def) {\n    if (types_1.typeMapping.has(def.return_type.id)) {\n        const type = types_1.typeMapping.get(def.return_type.id);\n        def.return_type = {\n            id: type.id,\n            name: type.name,\n        };\n    }\n    for (const param of def.params) {\n        if (types_1.typeMapping.has(param.type.id)) {\n            const type = types_1.typeMapping.get(param.type.id);\n            param.type = {\n                id: type.id,\n                name: type.name,\n            };\n        }\n    }\n}\nexports.replaceNumberTypes = replaceNumberTypes;\nfunction hashFuncDef(def) {\n    return JSON.stringify({\n        name: def.name,\n        return_type: def.return_type.id,\n        return_typemod: def.return_typemod,\n        params: def.params\n            .map((param) => JSON.stringify({\n            kind: param.kind,\n            type: param.type.id,\n            typemod: param.typemod,\n            hasDefault: !!param.hasDefault,\n        }))\n            .sort(),\n        preserves_optionality: def.preserves_optionality,\n    });\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.globals = void 0;\nasync function globals(cxn) {\n    const globalsMap = new Map();\n    const version = await cxn.queryRequiredSingle(`select sys::get_version().major;`);\n    if (version === 1) {\n        return globalsMap;\n    }\n    const QUERY = `\n    WITH\n      MODULE schema\n    SELECT schema::Global {\n      id,\n      name,\n      target_id := .target.id,\n      card := (\"One\" IF .required ELSE \"One\" IF EXISTS .default ELSE \"AtMostOne\")\n        IF <str>.cardinality = \"One\" ELSE\n        (\"AtLeastOne\" IF .required ELSE \"Many\"),\n      has_default := exists .default,\n    }\n    ORDER BY .name;\n  `;\n    const allGlobals = JSON.parse(await cxn.queryJSON(QUERY));\n    for (const g of allGlobals) {\n        globalsMap.set(g.id, g);\n    }\n    return globalsMap;\n}\nexports.globals = globals;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.operators = void 0;\nconst strictMap_1 = require(\"../strictMap\");\nconst functions_1 = require(\"./functions\");\nconst util_1 = require(\"../util\");\nconst _operators = async (cxn) => {\n    var _a, _b;\n    const operatorsJson = await cxn.queryJSON(`\n    with module schema\n    select Operator {\n      id,\n      name,\n      annotations: {\n        name,\n        @value\n      } filter .name in {'std::identifier', 'std::description'},\n      operator_kind,\n      return_type: {id, name},\n      return_typemod,\n      params: {\n        name,\n        type: {id, name},\n        kind,\n        typemod,\n      } order by @index,\n    } filter not .internal and not .abstract\n  `);\n    const operators = new strictMap_1.StrictMap();\n    const seenOpDefHashes = new Set();\n    for (const op of JSON.parse(operatorsJson)) {\n        const identifier = (_a = op.annotations.find((anno) => anno.name === \"std::identifier\")) === null || _a === void 0 ? void 0 : _a[\"@value\"];\n        if (!identifier) {\n            continue;\n        }\n        const { mod } = util_1.util.splitName(op.name);\n        const name = `${mod}::${identifier}`;\n        if (!operators.has(name)) {\n            operators.set(name, []);\n        }\n        const opDef = {\n            ...op,\n            name,\n            kind: op.operator_kind,\n            originalName: op.name,\n            description: (_b = op.annotations.find((anno) => anno.name === \"std::description\")) === null || _b === void 0 ? void 0 : _b[\"@value\"],\n            annotations: undefined,\n        };\n        (0, functions_1.replaceNumberTypes)(opDef);\n        const hash = hashOpDef(opDef);\n        if (!seenOpDefHashes.has(hash)) {\n            operators.get(name).push(opDef);\n            seenOpDefHashes.add(hash);\n        }\n    }\n    return operators;\n};\nexports.operators = _operators;\nfunction hashOpDef(def) {\n    return JSON.stringify({\n        name: def.name,\n        return_type: def.return_type.id,\n        return_typemod: def.return_typemod,\n        params: def.params\n            .map((param) => JSON.stringify({\n            kind: param.kind,\n            type: param.type.id,\n            typemod: param.typemod,\n            hasDefault: !!param.hasDefault,\n        }))\n            .sort(),\n        operator_kind: def.operator_kind,\n    });\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.scalars = void 0;\nconst strictMap_1 = require(\"../strictMap\");\nconst _scalars = async (cxn) => {\n    const scalarArray = await cxn.queryJSON(`with module schema\nselect InheritingObject {\n  id,\n  name,\n  is_abstract,\n  bases: { id, name },\n  ancestors: { id, name },\n  children := .<bases[IS Type] { id, name },\n  descendants := .<ancestors[IS Type] { id, name }\n}\nFILTER\n  InheritingObject IS ScalarType OR\n  InheritingObject IS ObjectType;\n`);\n    const scalars = new strictMap_1.StrictMap();\n    for (const type of JSON.parse(scalarArray)) {\n        scalars.set(type.id, type);\n    }\n    return scalars;\n};\nexports.scalars = _scalars;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./queries/casts\"), exports);\n__exportStar(require(\"./queries/functions\"), exports);\n__exportStar(require(\"./queries/globals\"), exports);\n__exportStar(require(\"./queries/operators\"), exports);\n__exportStar(require(\"./queries/scalars\"), exports);\n__exportStar(require(\"./queries/types\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.analyzeQuery = void 0;\nconst array_1 = require(\"../codecs/array\");\nconst consts_1 = require(\"../codecs/consts\");\nconst enum_1 = require(\"../codecs/enum\");\nconst ifaces_1 = require(\"../codecs/ifaces\");\nconst namedtuple_1 = require(\"../codecs/namedtuple\");\nconst object_1 = require(\"../codecs/object\");\nconst range_1 = require(\"../codecs/range\");\nconst codecs_1 = require(\"../codecs/codecs\");\nconst set_1 = require(\"../codecs/set\");\nconst tuple_1 = require(\"../codecs/tuple\");\nconst ifaces_2 = require(\"../ifaces\");\nconst options_1 = require(\"../options\");\nasync function analyzeQuery(client, query) {\n    let parseResult;\n    const pool = client.pool;\n    const holder = await pool.acquireHolder(options_1.Options.defaults());\n    try {\n        const cxn = await holder._getConnection();\n        parseResult = await cxn._parse(query, ifaces_2.OutputFormat.BINARY, ifaces_2.Cardinality.MANY, options_1.Session.defaults());\n    }\n    finally {\n        await holder.release();\n    }\n    const cardinality = parseResult[0];\n    const inCodec = parseResult[1];\n    const outCodec = parseResult[2];\n    const imports = new Set();\n    const args = walkCodec(inCodec, {\n        indent: \"\",\n        optionalNulls: true,\n        imports,\n    });\n    const result = generateSetType(walkCodec(outCodec, {\n        indent: \"\",\n        optionalNulls: false,\n        imports,\n    }), cardinality);\n    return {\n        result,\n        args,\n        cardinality,\n        query,\n        imports,\n    };\n}\nexports.analyzeQuery = analyzeQuery;\nfunction generateSetType(type, cardinality) {\n    switch (cardinality) {\n        case ifaces_2.Cardinality.MANY:\n            return `${type}[]`;\n        case ifaces_2.Cardinality.ONE:\n            return type;\n        case ifaces_2.Cardinality.AT_MOST_ONE:\n            return `${type} | null`;\n        case ifaces_2.Cardinality.AT_LEAST_ONE:\n            return `[(${type}), ...(${type})[]]`;\n    }\n    throw Error(`unexpected cardinality: ${cardinality}`);\n}\nfunction walkCodec(codec, ctx) {\n    if (codec instanceof codecs_1.NullCodec) {\n        return \"null\";\n    }\n    if (codec instanceof ifaces_1.ScalarCodec) {\n        if (codec instanceof enum_1.EnumCodec) {\n            return `(${codec.values.map((val) => JSON.stringify(val)).join(\" | \")})`;\n        }\n        if (codec.importedType) {\n            ctx.imports.add(codec.tsType);\n        }\n        return codec.tsType;\n    }\n    if (codec instanceof object_1.ObjectCodec || codec instanceof namedtuple_1.NamedTupleCodec) {\n        const fields = codec instanceof object_1.ObjectCodec\n            ? codec.getFields()\n            : codec.getNames().map((name) => ({ name, cardinality: consts_1.ONE }));\n        const subCodecs = codec.getSubcodecs();\n        return `{\\n${fields\n            .map((field, i) => {\n            let subCodec = subCodecs[i];\n            if (subCodec instanceof set_1.SetCodec) {\n                if (!(field.cardinality === consts_1.MANY || field.cardinality === consts_1.AT_LEAST_ONE)) {\n                    throw Error(\"subcodec is SetCodec, but upper cardinality is one\");\n                }\n                subCodec = subCodec.getSubcodecs()[0];\n            }\n            return `${ctx.indent}  ${JSON.stringify(field.name)}${ctx.optionalNulls && field.cardinality === consts_1.AT_MOST_ONE ? \"?\" : \"\"}: ${generateSetType(walkCodec(subCodec, { ...ctx, indent: ctx.indent + \"  \" }), field.cardinality)};`;\n        })\n            .join(\"\\n\")}\\n${ctx.indent}}`;\n    }\n    if (codec instanceof array_1.ArrayCodec) {\n        return `${walkCodec(codec.getSubcodecs()[0], ctx)}[]`;\n    }\n    if (codec instanceof tuple_1.TupleCodec) {\n        return `[${codec\n            .getSubcodecs()\n            .map((subCodec) => walkCodec(subCodec, ctx))\n            .join(\", \")}]`;\n    }\n    if (codec instanceof range_1.RangeCodec) {\n        const subCodec = codec.getSubcodecs()[0];\n        if (!(subCodec instanceof ifaces_1.ScalarCodec)) {\n            throw Error(\"expected range subtype to be scalar type\");\n        }\n        ctx.imports.add(\"Range\");\n        return `Range<${subCodec.tsType}>`;\n    }\n    throw Error(`Unexpected codec kind: ${codec.getKind()}`);\n}\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2020-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.introspect = void 0;\n__exportStar(require(\"./enums\"), exports);\n__exportStar(require(\"./util\"), exports);\n__exportStar(require(\"./typeutil\"), exports);\n__exportStar(require(\"./util\"), exports);\n__exportStar(require(\"./strictMap\"), exports);\n__exportStar(require(\"./reservedKeywords\"), exports);\nexports.introspect = __importStar(require(\"./queries\"));\n__exportStar(require(\"./analyzeQuery\"), exports);\n","\"use strict\";\n/*!\n * This source file is part of the EdgeDB open source project.\n *\n * Copyright 2019-present MagicStack Inc. and the EdgeDB authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$ = exports.defaultBackoff = exports.Session = exports.RetryOptions = exports.RetryCondition = exports.IsolationLevel = exports._RawConnection = exports.adapter = exports.createHttpClient = exports.createClient = void 0;\nconst nodeClient_1 = require(\"./nodeClient\");\nexports.default = nodeClient_1.createClient;\nvar nodeClient_2 = require(\"./nodeClient\");\nObject.defineProperty(exports, \"createClient\", { enumerable: true, get: function () { return nodeClient_2.createClient; } });\nObject.defineProperty(exports, \"createHttpClient\", { enumerable: true, get: function () { return nodeClient_2.createHttpClient; } });\nconst adapter = __importStar(require(\"./adapter.node\"));\nexports.adapter = adapter;\nvar rawConn_1 = require(\"./rawConn\");\nObject.defineProperty(exports, \"_RawConnection\", { enumerable: true, get: function () { return rawConn_1.RawConnection; } });\nvar options_1 = require(\"./options\");\nObject.defineProperty(exports, \"IsolationLevel\", { enumerable: true, get: function () { return options_1.IsolationLevel; } });\nObject.defineProperty(exports, \"RetryCondition\", { enumerable: true, get: function () { return options_1.RetryCondition; } });\nObject.defineProperty(exports, \"RetryOptions\", { enumerable: true, get: function () { return options_1.RetryOptions; } });\nObject.defineProperty(exports, \"Session\", { enumerable: true, get: function () { return options_1.Session; } });\nvar options_2 = require(\"./options\");\nObject.defineProperty(exports, \"defaultBackoff\", { enumerable: true, get: function () { return options_2.defaultBackoff; } });\n__exportStar(require(\"./index.shared\"), exports);\nexports.$ = __importStar(require(\"./reflection\"));\n","import createClient, { Client, ConnectOptions, Duration } from \"edgedb\";\n\nexport { createClient } from \"edgedb\";\n\n// Class which implements CRUD operations for a given type with EdgeDB objects\nexport class CRUDService<\n\t/** \"types\" object exported from interfaces */\n    AllTypes extends any,\n    // @ts-expect-error\n\tTypeName extends keyof Omit<AllTypes['default'], 'Timestampable' | 'Role'> = keyof Omit<AllTypes['default'], 'Timestampable' | 'Role'>,\n    // @ts-expect-error\n    Type extends AllTypes['default'][TypeName] = AllTypes['default'][TypeName]\n> {\n    e: any\n\ttypeName: TypeName\n\teType: any\n\teFields: any\n    client: Client\n\n\tconstructor(private config: {\n\t\t/** Ready EdgeDB client or options for instantialization */\n        client?: Client | ConnectOptions,\n\t\t/** Name of EdgeDB type */\n\t\ttype: TypeName,\n\t\t/** Default object exported from edgeql-js */\n\t\tedgedb: any\n    }) {\n        if (config.client) {\n            // if is client key has 'options', it means it's a Client\n\t\t\tif (!('options' in config.client)) {\n\t\t\t\tthis.client = createClient(config.client)\n\t\t\t}\n\n\t\t\tthis.client = this.client.withConfig({\n\t\t\t\tsession_idle_transaction_timeout: Duration.from({ seconds: 10 }),\n\t\t\t\tallow_bare_ddl: 'AlwaysAllow',\n\t\t\t})\n\t\t\t.withRetryOptions({\n\t\t\t\tattempts: 3,\n\t\t\t\tbackoff: (attemptNo: number) => {\n\t\t\t\t\t// exponential backoff\n\t\t\t\t\treturn 2 ** attemptNo * 100 + Math.random() * 100\n\t\t\t\t},\n\t\t\t})\n        }\n\n        this.e = this.config.edgedb\n        this.typeName = this.config.type\n        this.eType = this.e[this.typeName]\n        this.eFields = this.eType['*']\n    }\n\n\tcreate = async (data: Omit<Type, 'id'>) => {\n\t\treturn await this.client.transaction(async (tx) => {\n\t\t\tconst { id: newId } = await this.e.insert(this.eType, data as any).run(tx)\n\n\t\t\treturn (await this.e\n\t\t\t\t.select(this.eType, () => ({\n\t\t\t\t\t...this.eFields,\n\t\t\t\t\tfilter_single: {\n\t\t\t\t\t\tid: newId,\n\t\t\t\t\t},\n\t\t\t\t}))\n\t\t\t\t.run(tx)) as Type\n\t\t})\n\t}\n\n\tupdateById = async (id: string, data: Partial<Type>) => {\n\t\tconst query = this.e.update(this.eType, () => ({\n\t\t\tset: data,\n\t\t\tfilter_single: {\n\t\t\t\tid: id,\n\t\t\t},\n\t\t}))\n\t\treturn (await query.run(this.client)) as Type\n\t}\n\n\tfindAll = async () => {\n\t\tconst query = this.e.select(this.eType, () => ({\n\t\t\t...this.eFields,\n\t\t}))\n\t\treturn (await query.run(this.client)) as Type[]\n\t}\n\n\tfindById = async (id: string) => {\n\t\tconst query = this.e.select(this.eType, () => ({\n\t\t\t...this.eFields,\n\t\t\tfilter_single: {\n\t\t\t\tid: id,\n\t\t\t},\n\t\t}))\n\t\treturn (await query.run(this.client)) as Type\n\t}\n\n\tdeleteById = async (id: string) => {\n\t\tconst query = this.e.delete(this.eType, () => ({\n\t\t\tfilter_single: {\n\t\t\t\tid: id,\n\t\t\t},\n\t\t}))\n\t\treturn (await query.run(this.client)) as Type\n\t}\n\n\tfindByField = async <Field extends keyof Type>(field: Field, value: Type[Field]) => {\n\t\tconst query = this.e.select(this.eType, (obj) => ({\n\t\t\t...this.eFields,\n\t\t\tfilter_single: this.e.op(obj[field], '=', this.e.uuid(value)),\n\t\t}))\n\t\treturn (await query.run(this.client)) as Type\n\t}\n\n\tfindAllByField = async <Field extends keyof Type>(field: Field, value: Type[Field]) => {\n\t\tconst query = this.e.select(this.eType, (obj) => ({\n\t\t\t...this.eFields,\n\t\t\tfilter: this.e.op(obj[field], '=', this.e.uuid(value)),\n\t\t}))\n\t\treturn (await query.run(this.client)) as Type[]\n\t}\n\n\tfindByFields = async <Field extends keyof Type>(fields: { [key in Field]: Type[Field] }) => {\n\t\tconst query = this.e.select(this.eType, () => ({\n\t\t\t...this.eFields,\n\t\t\tfilter_single: fields,\n\t\t}))\n\t\treturn (await query.run(this.client)) as Type\n\t}\n}\n\nexport default CRUDService"],"mappings":"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","names":["require_chars","__commonJSMin","exports","ord","str","ch","chr","require_bigint","__commonJSMin","exports","JSBI","plugJSBI","jsbi","_isBigInt","_make","_add","_div","_sub","_mul","_rshift","_bitand","_gte","_lt","_remainder","val","op1","op2","j","ensureJSBI","require_compat","__commonJSMin","exports","decodeInt64ToString","buf","inp","negative","x","result","digit","acc","ret","j","num","require_ifaces","__commonJSMin","exports","__createBinding","o","m","k","k2","desc","__setModuleDefault","v","__importStar","mod","result","chars","OutputFormat","Cardinality","require_buffer","__commonJSMin","exports","__createBinding","o","m","k","k2","desc","__setModuleDefault","v","__importStar","mod","result","chars","bi","compat","ifaces_1","BUFFER_INC_SIZE","EMPTY_BUFFER","decodeB64","encodeB64","b64","data","binaryString","size","bytes","useBigInt64Fallback","BufferError","WriteBuffer","extraLength","newSize","newBuffer","ch","s","buf","i","hi","lo","ii","len","WriteMessageBuffer","mtype","headers","entries","_","value","code","val","h","l","SYNC_MESSAGE","FLUSH_MESSAGE","byteToHex","uuidToBuffer","uuid","ReadMessageBuffer","buf0","nextBuf","nread","ret","retPos","unreadMessageType","frb","ReadBuffer","num","bhi","blo","res","snum","dash","pos","buffer","require_base","__commonJSMin","exports","buffer_1","EdgeDBError","message","options","prettyPrintError","tag","_a","ErrorAttr","tryParseInt","val","attrs","query","lineStart","lineEnd","colStart","colEnd","queryLines","lineNoWidth","errMessage","i","line","start","end","require_tags","__commonJSMin","exports","require_errors","__commonJSMin","exports","__createBinding","o","m","k","k2","desc","__setModuleDefault","v","__importStar","mod","result","__exportStar","p","base_1","tags","base_2","InternalServerError","UnsupportedFeatureError","ProtocolError","BinaryProtocolError","UnsupportedProtocolVersionError","TypeSpecNotFoundError","UnexpectedMessageError","InputDataError","ParameterTypeMismatchError","StateMismatchError","ResultCardinalityMismatchError","CapabilityError","UnsupportedCapabilityError","DisabledCapabilityError","QueryError","InvalidSyntaxError","EdgeQLSyntaxError","SchemaSyntaxError","GraphQLSyntaxError","InvalidTypeError","InvalidTargetError","InvalidLinkTargetError","InvalidPropertyTargetError","InvalidReferenceError","UnknownModuleError","UnknownLinkError","UnknownPropertyError","UnknownUserError","UnknownDatabaseError","UnknownParameterError","SchemaError","SchemaDefinitionError","InvalidDefinitionError","InvalidModuleDefinitionError","InvalidLinkDefinitionError","InvalidPropertyDefinitionError","InvalidUserDefinitionError","InvalidDatabaseDefinitionError","InvalidOperatorDefinitionError","InvalidAliasDefinitionError","InvalidFunctionDefinitionError","InvalidConstraintDefinitionError","InvalidCastDefinitionError","DuplicateDefinitionError","DuplicateModuleDefinitionError","DuplicateLinkDefinitionError","DuplicatePropertyDefinitionError","DuplicateUserDefinitionError","DuplicateDatabaseDefinitionError","DuplicateOperatorDefinitionError","DuplicateViewDefinitionError","DuplicateFunctionDefinitionError","DuplicateConstraintDefinitionError","DuplicateCastDefinitionError","DuplicateMigrationError","SessionTimeoutError","IdleSessionTimeoutError","QueryTimeoutError","TransactionTimeoutError","IdleTransactionTimeoutError","ExecutionError","InvalidValueError","DivisionByZeroError","NumericOutOfRangeError","AccessPolicyError","QueryAssertionError","IntegrityError","ConstraintViolationError","CardinalityViolationError","MissingRequiredError","TransactionError","TransactionConflictError","TransactionSerializationError","TransactionDeadlockError","WatchError","ConfigurationError","AccessError","AuthenticationError","AvailabilityError","BackendUnavailableError","BackendError","UnsupportedBackendFeatureError","LogMessage","WarningMessage","ClientError","ClientConnectionError","ClientConnectionFailedError","ClientConnectionFailedTemporarilyError","ClientConnectionTimeoutError","ClientConnectionClosedError","InterfaceError","QueryArgumentError","MissingArgumentError","UnknownArgumentError","InvalidArgumentError","NoDataError","InternalClientError","require_lru","__commonJSMin","exports","errors_1","Node","key","value","Deque","node","prev","next","tail","beforeLast","LRU","capacity","len","existingNode","newNode","bottomNode","require_consts","__commonJSMin","exports","res","id","name","require_ifaces","__commonJSMin","exports","buffer_1","consts_1","Codec","tid","ScalarCodec","derivedFromTid","typeName","self","require_boolean","__commonJSMin","exports","ifaces_1","errors_1","BoolCodec","buf","object","typeOf","require_numbers","__commonJSMin","exports","__createBinding","o","m","k","k2","desc","__setModuleDefault","v","__importStar","mod","result","bi","ifaces_1","errors_1","Int64Codec","buf","object","Int64BigintCodec","Int32Codec","Int16Codec","Float32Codec","Float64Codec","require_numerics","__commonJSMin","exports","ifaces_1","errors_1","NUMERIC_POS","NUMERIC_NEG","BigIntCodec","buf","object","NBASE","ZERO","digits","sign","uval","mod","i","decodeBigIntToString","DecimalStringCodec","match","_","int","_frac","_exp","frac","exp","sdigits","len","decodeDecimalToString","ndigits","weight","dscale","result","d","digit","sdigit","end","require_text","__commonJSMin","exports","buffer_1","ifaces_1","errors_1","StrCodec","buf","object","val","strbuf","require_uuid","__commonJSMin","exports","buffer_1","ifaces_1","errors_1","UUIDBufferFromString","uuid","uuidClean","UUIDCodec","buf","object","ubuf","require_bytes","__commonJSMin","exports","ifaces_1","errors_1","BytesCodec","buf","object","require_json","__commonJSMin","exports","buffer_1","ifaces_1","errors_1","JSONCodec","buf","object","val","strbuf","format","JSONStringCodec","require_dateutil","__commonJSMin","exports","isLeapYear","year","daysInMonth","month","_DAYS_IN_MONTH","daysBeforeYear","y","daysBeforeMonth","_DAYS_BEFORE_MONTH","_DI400Y","_DI100Y","_DI4Y","dbf","dbm","i","dim","ymd2ord","day","divmod","dividend","divisor","quotient","ord2ymd","n","n400","n100","n4","n1","leapyear","preceding","require_datetime","__commonJSMin","exports","__createBinding","o","m","k","k2","desc","__setModuleDefault","v","__importStar","mod","result","bi","dateutil_1","toNumber","val","n","assertInteger","LocalTime","isoHour","isoMinute","isoSecond","isoMillisecond","isoMicrosecond","isoNanosecond","hh","mm","ss","repr","LocalDate","isoYear","isoMonth","isoDay","maxDays","year","month","day","LocalDateToOrdinal","localdate","LocalDateFromOrdinal","ordinal","LocalDateTime","durationRegex","Duration","_Duration","years","months","weeks","days","hours","minutes","seconds","milliseconds","microseconds","nanoseconds","fields","sign","field","fieldSign","dateParts","timeParts","totalNanoseconds","fracSeconds","item","str","matches","_duration","_sign","_time","fHours","fMinutes","fSeconds","ns","RelativeDuration","DateDuration","humanDurationPrefixes","parseHumanDurationString","durationStr","regex","duration","seen","match","lastIndex","mult","require_datetime","__commonJSMin","exports","__createBinding","o","m","k","k2","desc","__setModuleDefault","v","__importStar","mod","result","ifaces_1","bi","datetime_1","dateutil_1","errors_1","TIMESHIFT","DATESHIFT_ORD","DateTimeCodec","buf","object","us","ms","LocalDateTimeCodec","bi1000","bi_us","bi_ms","date","LocalDateCodec","ord","LocalTimeCodec","seconds","minutes","hours","unencodableDurationFields","checkValidEdgeDBDuration","duration","field","DurationCodec","invalidField","bius","days","months","sign","biMillion","biSeconds","RelativeDurationCodec","weeks","years","DateDurationCodec","require_memory","__commonJSMin","exports","__createBinding","o","m","k","k2","desc","__setModuleDefault","v","__importStar","mod","result","bi","KiB","MiB","GiB","TiB","PiB","ConfigMemory","bytes","bigPiB","bigTiB","bigGiB","bigMiB","bigKiB","require_memory","__commonJSMin","exports","ifaces_1","memory_1","errors_1","ConfigMemoryCodec","buf","object","require_pgvector","__commonJSMin","exports","ifaces_1","errors_1","PgVectorCodec","buf","object","el","dim","vecBuf","data","vec","i","require_codecs","__commonJSMin","exports","buffer_1","boolean_1","ifaces_1","numbers_1","numerics_1","text_1","uuid_1","bytes_1","json_1","datetime_1","memory_1","pgvector_1","errors_1","consts_1","NullCodec","_buf","_object","registerScalarCodec","typename","type","id","require_tuple","__commonJSMin","exports","consts_1","ifaces_1","buffer_1","errors_1","TupleCodec","tid","codecs","buf","object","allowNull","codecsLen","EmptyTupleCodec","elemData","i","elem","e","elemBuf","args","els","subCodecs","result","elemLen","require_range","__commonJSMin","exports","Range","_Range","_lower","_upper","_incLower","_incUpper","range","require_range","__commonJSMin","exports","ifaces_1","buffer_1","range_1","errors_1","RangeFlags","RangeCodec","tid","subCodec","buf","obj","elemData","elemBuf","flags","lower","upper","require_namedtuple","__commonJSMin","exports","ifaces_1","buffer_1","tuple_1","errors_1","NamedTupleCodec","tid","codecs","names","buf","object","codecsLen","elemData","i","key","val","e","elemBuf","args","keys","namesSet","extraKeys","els","subCodecs","result","elemLen","require_array","__commonJSMin","exports","ifaces_1","buffer_1","tuple_1","range_1","errors_1","namedtuple_1","ArrayCodec","tid","subCodec","len","buf","obj","isTypedArray","elemData","objLen","i","item","elemBuf","ndims","result","elemLen","require_enum","__commonJSMin","exports","text_1","EnumCodec","tid","derivedFromTid","values","require_object","__commonJSMin","exports","ifaces_1","buffer_1","consts_1","errors_1","EDGE_POINTER_IS_IMPLICIT","EDGE_POINTER_IS_LINKPROP","ObjectCodec","tid","codecs","names","flags","cards","i","isLinkprop","name","_buf","_object","args","codecsLen","elemData","arg","card","elemBuf","buf","keys","fields","namesSet","extraKeys","key","val","els","result","elemLen","require_set","__commonJSMin","exports","ifaces_1","buffer_1","array_1","errors_1","SetCodec","tid","subCodec","_buf","_obj","buf","ndims","len","result","elemBuf","i","elemLen","require_utils","__commonJSMin","exports","idCounter","getUniqueId","prefix","id","sleep","durationMillis","accept","versionGreaterThan","left","right","versionGreaterThanOrEqual","require_sparseObject","__commonJSMin","exports","ifaces_1","buffer_1","errors_1","SparseObjectCodec","tid","codecs","names","buf","object","elemBuf","objLen","key","val","i","n","elemData","els","result","_","elemLen","name","require_registry","__commonJSMin","exports","__createBinding","o","m","k","k2","desc","__setModuleDefault","v","__importStar","mod","result","__importDefault","buffer_1","lru_1","ifaces_1","codecs_1","consts_1","tuple_1","numbers","datecodecs","json_1","array_1","namedtuple_1","enum_1","object_1","set_1","range_1","utils_1","sparseObject_1","errors_1","CODECS_CACHE_SIZE","CODECS_BUILD_CACHE_SIZE","CTYPE_SET","CTYPE_SHAPE","CTYPE_BASE_SCALAR","CTYPE_SCALAR","CTYPE_TUPLE","CTYPE_NAMEDTUPLE","CTYPE_ARRAY","CTYPE_ENUM","CTYPE_INPUT_SHAPE","CTYPE_RANGE","INT64_TYPEID","DATETIME_TYPEID","JSON_TYPEID","CodecsRegistry","int64_bigint","datetime_localDatetime","json_string","typeId","codec","spec","protocolVersion","frb","codecsList","cl","_a","t","tid","res","els","i","elm_length","ann_length","typeName","codecs","names","flags","cards","flag","card","name","pos","subCodec","dimLen","values","require_options","__commonJSMin","exports","__createBinding","o","m","k","k2","desc","__setModuleDefault","v","__importStar","mod","result","errors","defaultBackoff","attempt","IsolationLevel","RetryCondition","RetryRule","attempts","backoff","RetryOptions","_RetryOptions","condition","def","overrides","err","TransactionOptions","_TransactionOptions","isolation","readonly","deferrable","Session","_Session","module","moduleAliases","config","globals","aliases","state","_aliases","_globals","key","val","defaultSession","Options","_Options","retryOptions","transactionOptions","session","opt","require_event","__commonJSMin","exports","errors_1","Event","args","reason","futReject","futResolve","resolve","reject","value","require_queues","__commonJSMin","exports","errors_1","LifoQueue","resolve","reject","item","promise","err","rejecters","require_retry","__commonJSMin","exports","__createBinding","o","m","k","k2","desc","__setModuleDefault","v","__importStar","mod","result","errors","utils_1","lastLoggingAt","retryingConnect","connectWithTimeout","config","registry","maxTime","e","now","logMsg","require_transaction","__commonJSMin","exports","__createBinding","o","m","k","k2","desc","__setModuleDefault","v","__importStar","mod","result","errors","ifaces_1","TransactionState","Transaction","_Transaction","holder","rawConn","options","abortError","opname","op","errMessage","query","args","require_baseClient","__commonJSMin","exports","__createBinding","o","m","k","k2","desc","__setModuleDefault","v","__importStar","mod","result","__importDefault","registry_1","errors","ifaces_1","options_1","event_1","queues_1","retry_1","transaction_1","utils_1","ClientConnectionHolder","pool","_a","options","action","iteration","transaction","commitFailed","err","rollback_err","rule","query","args","outputFormat","expectedCardinality","conn","BaseClientPool","_parseConnectArguments","opts","holder","connHolder","_b","holdersDiff","i","connectionHolder","config","connection","suggestedConcurrency","error","warningTimeoutId","Client","_Client","session","aliases","newConfig","globals","require_credentials","__commonJSMin","exports","conUtils_1","errors_1","getCredentialsPath","instanceName","serverUtils","readCredentialsFile","file","data","validateCredentials","e","port","user","result","host","database","password","caData","certData","verifyHostname","tlsSecurity","val","require_adapter_shared_node","__commonJSMin","exports","randomBytes","H","HMAC","nodeCrypto","size","resolve","reject","err","buf","msg","sign","key","hm","getEnv","envName","required","require_crcHqx","__commonJSMin","exports","crctabHqx","crcHqx","data","crc","len","i","require_conUtils","__commonJSMin","exports","__createBinding","o","m","k","k2","desc","__setModuleDefault","v","__importStar","mod","result","errors","credentials_1","adapter_shared_node_1","datetime_1","datetime_2","errors_1","buffer_1","crcHqx_1","DOMAIN_NAME_MAX_LEN","getConnectArgumentsParser","utils","opts","_a","parseConnectDsnAndArgs","ResolvedConnectConfig","param","value","source","validator","host","validateHost","port","parseValidatePort","database","db","user","_user","password","secretKey","cloudProfile","caData","caFile","readFile","caFilePath","tlsSecurity","_tlsSecurity","val","clientSecurity","duration","parseDuration","settings","_b","output","outputLine","rawVal","isDefault","maxValLength","parsedPort","invalidField","config","serverUtils","resolvedConfig","fromEnv","fromProject","dsn","instanceName","hasCompoundOptions","resolveConfigOptions","projectDir","stashDir","instName","name","sources","compoundParamsError","_c","_d","_e","_f","_g","_h","_j","_k","_l","_m","_o","_p","_q","_r","_s","_t","_u","_v","anyOptionsUsed","fn","compoundParamsCount","parseDSNIntoConfig","creds","credentialsFile","parseCloudInstanceNameIntoConfig","_dsnString","dsnString","regexHostname","zoneId","regexResult","parsed","searchParams","key","handleDSNPart","paramName","currentValue","setter","formatter","paramSource","env","file","hostname","stripLeadingSlash","str","_source","serverSettings","cloudInstanceName","normInstanceName","org","domainName","profile","profilePath","fileData","e","keyParts","dnsZone","_jwtBase64Decode","dnsBucket","payload","require_map","__commonJSMin","exports","__createBinding","o","m","k","k2","desc","__setModuleDefault","v","__importStar","mod","result","errors","require_resolve","__commonJSMin","exports","__createBinding","o","m","k","k2","desc","__setModuleDefault","v","__importStar","mod","result","errors","map_1","resolveErrorCode","code","require_baseConn","__commonJSMin","exports","__createBinding","o","m","k","k2","desc","__setModuleDefault","v","__importStar","mod","result","__importDefault","codecs_1","namedtuple_1","object_1","tuple_1","utils_1","errors","resolve_1","ifaces_1","buffer_1","chars","event_1","lru_1","options_1","TransactionStatus","Capabilities","NO_TRANSACTION_CAPABILITIES","NO_TRANSACTION_CAPABILITIES_BYTES","RESTRICTED_CAPABILITIES","STUDIO_CAPABILITIES","CompilationFlag","OLD_ERROR_CODES","BaseRawConnection","registry","method","data","_a","err","numFields","ret","key","value","capabilities","headers","buf","cardinality","inTypeId","inTypeData","outTypeId","outTypeData","inCodec","outCodec","status","stateTypeId","stateData","code","message","errorType","codec","frb","$D","buffer","msg","name","typedescLen","typedescId","typedesc","mtype","severity","query","outputFormat","expectOne","wb","parseSendsTypeData","parsing","error","inCodecData","outCodecData","e","args","expectedCardinality","reExec","newCard","state","capabilitiesFlags","options","_b","inCodecBuf","outCodecBuf","newInCodec","newOutCodec","card","privilegedMode","requiredOne","asJson","allowTransactionCommands","require_scram","__commonJSMin","exports","adapter_shared_node_1","buffer_1","errors_1","RAW_NONCE_LENGTH","saslprep","str","bufferEquals","a","b","i","len","generateNonce","length","buildClientFirstMessage","clientNonce","username","bare","parseServerFirstMessage","msg","attrs","nonceAttr","nonceB64","nonce","saltAttr","saltB64","salt","iterAttr","iter","iterCount","parseServerFinalMessage","signatureB64","buildClientFinalMessage","password","iterations","clientFirstBare","serverFirst","serverNonce","clientFinal","authMessage","saltedPassword","getSaltedPassword","clientKey","getClientKey","storedKey","clientSignature","clientProof","XOR","serverKey","getServerKey","serverProof","Hi","Ui","_","res","require_httpScram","__commonJSMin","exports","errors_1","buffer_1","scram_1","AUTH_ENDPOINT","HTTPSCRAMAuth","baseUrl","username","password","_a","authUrl","clientNonce","clientFirst","clientFirstBare","serverFirstRes","utf8ToB64","authenticateHeader","body","authParams","sid","serverFirst","parseScramAttrs","serverNonce","salt","iterCount","clientFinal","expectedServerSig","serverFinalRes","authInfoHeader","serverFinal","sidFinal","serverSig","str","b64ToUtf8","paramsStr","params","attr","key","val","rawData","data","require_fetchConn","__commonJSMin","exports","__createBinding","o","m","k","k2","desc","__setModuleDefault","v","__importStar","mod","result","__importDefault","baseConn_1","event_1","chars","errors_1","httpScram_1","PROTO_MIME","BaseFetchConnection","config","registry","data","mtype","headers","resp","respData","buf","e","conn","AdminUIFetchConnection","address","tlsSecurity","database","_tokens","FetchConnection","_FetchConnection","addr","user","password","secretKey","token","baseUrl","require_browserClient","__commonJSMin","exports","baseClient_1","conUtils_1","errors_1","fetchConn_1","options_1","parseConnectArguments","FetchClientPool","createClient","createHttpClient","options","require_adapter_node","__commonJSMin","exports","__createBinding","o","m","k","k2","desc","__setModuleDefault","v","__importStar","mod","result","__importDefault","crypto","fs_1","net","os","path","tls","process_1","readline","stream_1","readFileUtf8","pathParts","hasFSReadPermission","watch","dir","readDir","pathString","hashSHA1toHex","msg","walk","params","match","skip","dirents","files","dirent","fspath","re","exists","filepath","input","message","silent","output","chunk","encoding","callback","rl","resolve","rej","val","exit","code","srcDir","require_platform","__commonJSMin","exports","adapter_node_1","_configDir","_a","localAppDataDir","xdgConfigDir","searchConfigDir","configPath","filePath","fallbackPath","require_conUtils_server","__commonJSMin","exports","__createBinding","o","m","k","k2","desc","__setModuleDefault","v","__importStar","mod","result","adapter_node_1","platform","conUtils_1","projectDirCache","findProjectDir","required","workingDir","dir","cwdDev","parentDir","findStashPath","projectDir","projectPath","hash","dirName","require_rawConn","__commonJSMin","exports","__createBinding","o","m","k","k2","desc","__setModuleDefault","v","__importStar","mod","result","__importDefault","adapter_node_1","baseConn_1","utils_1","buffer_1","event_1","chars","scram","errors","AuthenticationStatuses","_tlsOptions","getTlsOptions","config","tlsSecurity","tlsOptions","hostname","cert","err","RawConnection","sock","registry","newErr","data","e","addr","options","host","port","opts","useTls","conn","connPromise","timeoutCb","timeoutHappened","handshake","clientHandshakeOptions","key","value","hi","lo","proposed","status","major","minor","numMethods","methods","foundScram256","_","method","clientNonce","clientFirst","clientFirstBare","wb","serverFirst","serverNonce","salt","itercount","clientFinal","expectedServerSig","serverFinal","serverSig","expectedMtype","mtype","require_nodeClient","__commonJSMin","exports","baseClient_1","browserClient_1","conUtils_server_1","options_1","rawConn_1","ClientPool","createClient","options","createHttpClient","require_index_shared","__commonJSMin","exports","__createBinding","o","m","k","k2","desc","__setModuleDefault","v","__exportStar","p","__importStar","mod","result","datetime_1","memory_1","range_1","reg","buf","bigint_1","require_enums","__commonJSMin","exports","Cardinality","TypeKind","ExpressionKind","SelectModifierKind","OperatorKind","require_util","__commonJSMin","exports","util","assertNever","arg","error","splitName","name","parts","toIdent","args","map","id","obj","def","getter","method","flatMap","array","callbackfn","omitDollarPrefixed","object","key","require_typeutil","__commonJSMin","exports","require_strictMap","__commonJSMin","exports","StrictMap","key","require_reservedKeywords","__commonJSMin","exports","require_types","__commonJSMin","exports","strictMap_1","numberType","getTypes","cxn","params","_a","_b","_c","_d","_e","debug","v2Plus","QUERY","_types","type","backlink","isName","ptrs","ptr","rawExclusives","exclusives","ex","target","targets","t","newEx","types","topoSort","_","unionTypes","id","first","rest","restPointerNames","p","pointer","names","graph","adj","base","visiting","visited","sorted","visit","last","adjId","require_casts","__commonJSMin","exports","types_1","reachableFrom","source","adj","seen","reachable","cast","item","casts","cxn","params","_a","_b","_c","_d","_e","_f","_g","_h","allCastsRaw","allCasts","types","typesById","castsById","castsBySource","implicitCastsBySource","implicitCastsByTarget","assignmentCastsBySource","assignmentCastsByTarget","castMap","implicitCastMap","implicitCastFromMap","assignmentCastMap","assignableByMap","type","fromId","castArr","id","require_functions","__commonJSMin","exports","strictMap_1","types_1","functions","cxn","_a","functionsJson","functionMap","seenFuncDefHashes","func","name","funcDef","replaceNumberTypes","hash","hashFuncDef","def","type","param","require_globals","__commonJSMin","exports","globals","cxn","globalsMap","QUERY","allGlobals","g","require_operators","__commonJSMin","exports","strictMap_1","functions_1","util_1","_operators","cxn","_a","_b","operatorsJson","operators","seenOpDefHashes","op","identifier","anno","mod","name","opDef","hash","hashOpDef","def","param","require_scalars","__commonJSMin","exports","strictMap_1","_scalars","cxn","scalarArray","scalars","type","require_queries","__commonJSMin","exports","__createBinding","o","m","k","k2","desc","__exportStar","p","require_analyzeQuery","__commonJSMin","exports","array_1","consts_1","enum_1","ifaces_1","namedtuple_1","object_1","range_1","codecs_1","set_1","tuple_1","ifaces_2","options_1","analyzeQuery","client","query","parseResult","holder","cardinality","inCodec","outCodec","imports","args","walkCodec","generateSetType","type","codec","ctx","val","fields","name","subCodecs","field","i","subCodec","require_reflection","__commonJSMin","exports","__createBinding","o","m","k","k2","desc","__setModuleDefault","v","__exportStar","p","__importStar","mod","result","require_index_node","__commonJSMin","exports","__createBinding","o","m","k","k2","desc","__setModuleDefault","v","__importStar","mod","result","__exportStar","p","nodeClient_1","nodeClient_2","adapter","rawConn_1","options_1","options_2","import_edgedb","CRUDService","config","data","tx","newId","id","field","value","obj","fields","createClient","attemptNo"]}